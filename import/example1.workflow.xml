<?xml version="1.0" encoding="utf-8"?>
<dictionary>
<item key="activities" type="list"><list>
<item><![CDATA[AC_CHANGED]]></item>
<item type="dictionary"><dictionary>
<item key="icon"></item>
<item key="name"><![CDATA[Changed]]></item>
</dictionary>
</item>
<item><![CDATA[AC_REQUESTED]]></item>
<item type="dictionary"><dictionary>
<item key="icon" type="image">
<data width="20" height="20" content_type="image/gif" filename="state_requested.gif" type="image">47494638396114001400b30000b0b0fffefeff4e50b27278a57480b2cad5f48aa8d8b6daffcde5fe55a7edffffa0ed0000cecece646464ffffff00000021f9040100000e002c000000001400140000046dd0c949abbd386b2df66d4ce755a0609c27e1954d101484913574e922442253b51228b4d08b40ac081abe5a4df002a828c79fd4e763e28c48a91284400c240b4994aa0d74bd8e45d87124d7188805e230504f8e596a23ae3ed827340e5b676a7f190388896a5f23146b8d908d11003b</data></item>
<item key="name"><![CDATA[Commit requested]]></item>
</dictionary>
</item>
<item><![CDATA[AC_REJECTED]]></item>
<item type="dictionary"><dictionary>
<item key="icon" type="image">
<data width="20" height="20" content_type="image/gif" filename="state_rejected.gif" type="image">47494638396114001400c4ff00b0b0fffefeff4e50b27278a57480b2cad5f48aa8d8cde5fe55a7edffffa0cf3001d61901e15947e3604fe46b5be77769e88073fffdfdcecece646464c0c0c000000000000000000000000000000000000000000000000000000000000000000021f90401000014002c000000001400140000057d20258e64699e68aaaec27a4e52eb96b060dc37e1d653101404436a42acf90e048490544c0412c4d88f402d0926ce6251f003e848d7a7d8e954981556ac58bb782c168c05b847162b18110824c2408bae75450a6d11110e0b7e14576a6413830e856e8944145a13070a0d790f86722803a0030b876d9e33678933aa3321003b2e21003b</data></item>
<item key="name"><![CDATA[Commit rejected]]></item>
</dictionary>
</item>
<item><![CDATA[AC_COMMITTED]]></item>
<item type="dictionary"><dictionary>
<item key="icon"></item>
<item key="name"><![CDATA[Committed]]></item>
</dictionary>
</item>
<item><![CDATA[AC_ROLLEDBACK]]></item>
<item type="dictionary"><dictionary>
<item key="icon"></item>
<item key="name"><![CDATA[Rolled back]]></item>
</dictionary>
</item>
</list>
</item>
<item key="transitions" type="list"><list>
<item><![CDATA[TR_ENTER]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"></item>
<item key="from"></item>
<item key="name"><![CDATA[Enter Workflow]]></item>
<item key="performer" type="list"><list>
</list>
</item>
<item key="to" type="list"><list>
<item><![CDATA[AC_CHANGED]]></item>
</list>
</item>
</dictionary>
</item>
<item><![CDATA[TR_EXPRESSCOMMIT]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"><![CDATA[<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  F o r m
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-if "REQUEST.get('btn','')==''">

<!-- ##### Form #### -->
<dtml-var manage_page_header>
</head>
<dtml-var "manage_tabs(_,_,my_manage_options=[{'label':'Commit','action':''}])">
<form name="form0" method="post">
<input type="hidden" name="preview" value="preview">
<input type="hidden" name="lang" value="<dtml-var lang>">
<input type="hidden" name="custom" value="<dtml-var custom>">
<table cellspacing="0" cellpadding="1" border="0" width="100%">
<colgroup>
 <col width="20%" />
 <col width="80%" />
</colgroup>
<tr>
 <td colspan="2"><dtml-var "f_headline(_,_,headline='Express commit!')"></td>
</tr>
<tr>
 <td><div class="form-label">Comment</div></td>
 <td><dtml-var "getTextInput(fmName='form0', elName='work_desc', size=40, value='')"></td>
</tr>
</table>
<hr size="1">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_SEND'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="processMultiselectsOnFormSubmit(); self.btnClicked=this.value;">&nbsp;&nbsp;
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_CANCEL'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_RESET'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="reset"  value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<br/><br/>
</form>
<dtml-var manage_page_footer>

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  E x e c u t e
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-elif "REQUEST.get('btn','')==getZMILangStr('BTN_SEND')">

<!-- ##### Notification #### -->
<!-- Recipients -->
<dtml-call "REQUEST.set('s_mto',getRecipientsByRole(['ZMSEditor'],REQUEST))">
<!-- Subject -->
<dtml-call "REQUEST.set('s_msubject','[ZMS::%s]: Changes were express committed'%getDocumentElement().getTitle(REQUEST))">
<!-- Body -->
<dtml-call "REQUEST.set('l_mbody',[])">
<dtml-call "l_mbody.append('Changes were express committed.\n')">
<dtml-call "l_mbody.append('Reason: %s\n'%REQUEST.get('work_desc'))">
<dtml-call "l_mbody.append('\nWith best regards\n')">
<dtml-call "l_mbody.append('%s\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('------------------------\n')">
<dtml-call "l_mbody.append('Message generated by ZMS\n')">
<!-- Send notification via MailHost -->
<dtml-call "sendMail(s_mto, s_msubject, ''.join(l_mbody), REQUEST)">

<!-- ##### Commit #### -->
<dtml-call "commitObj(REQUEST)">

<!-- Return with message -->
<dtml-call "REQUEST.set('s_message','Changes were express-committed.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_wfTransitionFinalize',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message, 'work_desc':REQUEST.get('work_desc')}))">

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  C a n c e l
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-else>
<dtml-call "REQUEST.set('s_message','Operation cancelled.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_main',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">

</dtml-if>]]></item>
<item key="from" type="list"><list>
<item><![CDATA[AC_CHANGED]]></item>
<item><![CDATA[AC_REQUESTED]]></item>
<item><![CDATA[AC_REJECTED]]></item>
</list>
</item>
<item key="name"><![CDATA[Express commit!]]></item>
<item key="performer" type="list"><list>
<item><![CDATA[ZMSEditor]]></item>
<item><![CDATA[ZMSAuthor]]></item>
<item><![CDATA[ZMSAdministrator]]></item>
</list>
</item>
<item key="to" type="list"><list>
<item><![CDATA[AC_COMMITTED]]></item>
</list>
</item>
</dictionary>
</item>
<item><![CDATA[TR_REQUEST]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"><![CDATA[<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  F o r m
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-if "REQUEST.get('btn','')==''">

<!-- ##### Form #### -->
<dtml-var manage_page_header>
</head>
<dtml-var "manage_tabs(_,_,my_manage_options=[{'label':'Commit','action':''}])">
<form name="form0" method="post">
<input type="hidden" name="preview" value="preview">
<input type="hidden" name="lang" value="<dtml-var lang>">
<input type="hidden" name="custom" value="<dtml-var custom>">
<table cellspacing="0" cellpadding="1" border="0" width="100%">
<colgroup>
 <col width="20%" />
 <col width="80%" />
</colgroup>
<tr>
 <td colspan="2"><dtml-var "f_headline(_,_,headline='Request commit')"></td>
</tr>
<tr>
 <td><div class="form-label">Comment</div></td>
 <td><dtml-var "getTextInput(fmName='form0', elName='work_desc', size=40, value='')"></td>
</tr>
</table>
<hr size="1">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_SEND'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="processMultiselectsOnFormSubmit(); self.btnClicked=this.value;">&nbsp;&nbsp;
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_CANCEL'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_RESET'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="reset"  value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<br/><br/>
</form>
<dtml-var manage_page_footer>

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  E x e c u t e
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-elif "REQUEST.get('btn','')==getZMILangStr('BTN_SEND')">

<!-- ##### Notification #### -->
<!-- Recipients -->
<dtml-call "REQUEST.set('s_mto',getRecipientsByRole(['ZMSEditor'],REQUEST))">
<!-- Subject -->
<dtml-call "REQUEST.set('s_msubject','[ZMS-Workflow::%s - %s]: Request for committing my changes'%(getDocumentElement().getTitlealt(REQUEST),getTitlealt(REQUEST)))">
<!-- Body -->
<dtml-call "REQUEST.set('l_mbody',[])">
<dtml-call "l_mbody.append('Request for committing my changes:\n')">
<!-- Micronavigation -->
<dtml-call "l_mbody.append('%s: \t'%display_type(REQUEST))">
<dtml-in "breadcrumbs_obj_path()">
 <dtml-call "l_mbody.append('>> %s'%getTitlealt(REQUEST))">
</dtml-in>
<dtml-call "l_mbody.append('\n')">
<!-- Link to Management Interface -->
<dtml-call "l_mbody.append('URL: \t%s/manage\n\n'%absolute_url())">
<dtml-call "REQUEST.set('res',[this()])">
<dtml-call "res.extend(getChildNodes(REQUEST))">
<dtml-in res>
 <dtml-if "isObjModified(REQUEST)">
  <dtml-call "REQUEST.set('s_mbody',[])">
  <dtml-call "s_mbody.append('- %s'%(display_type(REQUEST)))">
  <dtml-call "s_mbody.append(' [')">
  <dtml-call "REQUEST.set('s_mstate',[])">
  <dtml-in "['STATE_NEW','STATE_MODIFIED','STATE_DELETED']">
   <dtml-let state=sequence-item>
    <dtml-if "inObjStates([state],REQUEST)">
     <dtml-if s_mstate>
      <dtml-call "s_mstate.append(',')">
     </dtml-if>
     <dtml-call "s_mstate.append(getZMILangStr(state))">
    </dtml-if>
   </dtml-let>
  </dtml-in>
  <dtml-call "s_mbody.extend(s_mstate)">
  <dtml-call "s_mbody.append('] ')">
  <dtml-call "s_mbody.append('%s '%(getLangFmtDate(getObjProperty('change_dt',REQUEST))))">
  <dtml-call "s_mbody.append('%s %s '%(getZMILangStr('BY'),getObjProperty('change_uid',REQUEST)))">
  <dtml-call "l_mbody.append(''.join(s_mbody)+'\n')">
 </dtml-if>
</dtml-in>
<dtml-call "l_mbody.append('\n')">
<!-- Comment -->
<dtml-call "l_mbody.append('Comment by %s:\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('========================\n')">
<dtml-call "l_mbody.append('%s\n'%REQUEST.get('work_desc'))">
<dtml-call "l_mbody.append('========================\n\n')">
<dtml-call "l_mbody.append('\nWith best regards\n')">
<dtml-call "l_mbody.append('%s\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('------------------------\n')">
<dtml-call "l_mbody.append('Message generated by ZMS\n')">
<!-- Send notification via MailHost -->
<dtml-call "sendMail(s_mto, s_msubject, ''.join(l_mbody), REQUEST)">

<!-- Return with message -->
<dtml-call "REQUEST.set('s_message','Sent request for committing your changes.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_wfTransitionFinalize',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  C a n c e l
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-else>
<dtml-call "REQUEST.set('s_message','Operation cancelled.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_main',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">

</dtml-if>]]></item>
<item key="from" type="list"><list>
<item><![CDATA[AC_CHANGED]]></item>
<item><![CDATA[AC_REJECTED]]></item>
</list>
</item>
<item key="name"><![CDATA[Request commit]]></item>
<item key="performer" type="list"><list>
<item><![CDATA[ZMSAdministrator]]></item>
<item><![CDATA[ZMSAuthor]]></item>
<item><![CDATA[ZMSEditor]]></item>
</list>
</item>
<item key="to" type="list"><list>
<item><![CDATA[AC_REQUESTED]]></item>
</list>
</item>
</dictionary>
</item>
<item><![CDATA[TR_REJECT]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"><![CDATA[<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  F o r m
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-if "REQUEST.get('btn','')==''">

<!-- ##### Form #### -->
<dtml-var manage_page_header>
</head>
<dtml-var "manage_tabs(_,_,my_manage_options=[{'label':'Reject','action':''}])">
<form name="form0" method="post">
<input type="hidden" name="preview" value="preview">
<input type="hidden" name="lang" value="<dtml-var lang>">
<input type="hidden" name="custom" value="<dtml-var custom>">
<table cellspacing="0" cellpadding="1" border="0" width="100%">
<colgroup>
 <col width="20%" />
 <col width="80%" />
</colgroup>
<tr>
 <td colspan="2"><dtml-var "f_headline(_,_,headline='Reject commit')"></td>
</tr>
<tr>
 <td><div class="form-label">Comment</div></td>
 <td><dtml-var "getTextInput(fmName='form0', elName='work_desc', size=40, value='')"></td>
</tr>
</table>
<hr size="1">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_SEND'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="processMultiselectsOnFormSubmit(); self.btnClicked=this.value;">&nbsp;&nbsp;
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_CANCEL'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_RESET'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="reset"  value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<br/><br/>
</form>
<dtml-var manage_page_footer>

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  E x e c u t e
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-elif "REQUEST.get('btn','')==getZMILangStr('BTN_SEND')">

<!-- ##### Notification #### -->
<!-- Recipients -->
<dtml-call "REQUEST.set('s_mto',getRecipientsByRole(['ZMSEditor'],REQUEST))">
<!-- Subject -->
<dtml-call "REQUEST.set('s_msubject','[ZMS-Workflow::%s - %s]: Committing your changes was rejected'%(getDocumentElement().getTitlealt(REQUEST),getTitlealt(REQUEST)))">
<!-- Body -->
<dtml-call "REQUEST.set('l_mbody',[])">
<dtml-call "l_mbody.append('Committing your changes was rejected.\n')">
<!-- Micronavigation -->
<dtml-call "l_mbody.append('%s: \t'%display_type(REQUEST))">
<dtml-in "breadcrumbs_obj_path()">
 <dtml-call "l_mbody.append('>> %s'%getTitlealt(REQUEST))">
</dtml-in>
<dtml-call "l_mbody.append('\n')">
<!-- Link to Management Interface -->
<dtml-call "l_mbody.append('URL: \t%s/manage\n\n'%absolute_url())">
<!-- Comment -->
<dtml-call "l_mbody.append('Comment by %s:\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('========================\n')">
<dtml-call "l_mbody.append('%s\n'%REQUEST.get('work_desc'))">
<dtml-call "l_mbody.append('========================\n\n')">
<dtml-call "l_mbody.append('\nWith best regards\n')">
<dtml-call "l_mbody.append('%s\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('------------------------\n')">
<dtml-call "l_mbody.append('Message generated by ZMS\n')">
<!-- Send notification via MailHost -->
<dtml-call "sendMail(s_mto, s_msubject, ''.join(l_mbody), REQUEST)">

<!-- Return with message -->
<dtml-call "REQUEST.set('s_message','Changes have been rejected.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_wfTransitionFinalize',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  C a n c e l
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-else>
<dtml-call "REQUEST.set('s_message','Operation cancelled.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_main',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">

</dtml-if>]]></item>
<item key="from" type="list"><list>
<item><![CDATA[AC_REQUESTED]]></item>
</list>
</item>
<item key="name"><![CDATA[Reject commit]]></item>
<item key="performer" type="list"><list>
<item><![CDATA[ZMSAdministrator]]></item>
<item><![CDATA[ZMSEditor]]></item>
</list>
</item>
<item key="to" type="list"><list>
<item><![CDATA[AC_REJECTED]]></item>
</list>
</item>
</dictionary>
</item>
<item><![CDATA[TR_COMMIT]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"><![CDATA[<!-- ##### Notification #### -->
<!-- Recipient -->
<dtml-call "REQUEST.set('s_name',getObjProperty('work_uid',REQUEST))">
<dtml-call "REQUEST.set('s_mto',getRecipientWf(REQUEST))">
<!-- Subject -->
<dtml-call "REQUEST.set('s_msubject','[ZMS::%s]: Your changes were committed'%getDocumentElement().getTitle(REQUEST))">
<!-- Body -->
<dtml-call "REQUEST.set('l_mbody',[])">
<dtml-call "l_mbody.append('Your changes were committed.\n')">
<dtml-call "l_mbody.append('\nWith best regards\n')">
<dtml-call "l_mbody.append('%s\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('------------------------\n')">
<dtml-call "l_mbody.append('Message generated by ZMS\n')">
<!-- Send notification via MailHost -->
<dtml-call "sendMail(s_mto, s_msubject, ''.join(l_mbody), REQUEST)">

<!-- ##### Commit #### -->
<dtml-call "commitObj(REQUEST)">

<!-- Return with message -->
<dtml-call "REQUEST.set('s_message','Changes were committed.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_wfTransitionFinalize',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">]]></item>
<item key="from" type="list"><list>
<item><![CDATA[AC_CHANGED]]></item>
<item><![CDATA[AC_REQUESTED]]></item>
<item><![CDATA[AC_REJECTED]]></item>
</list>
</item>
<item key="name"><![CDATA[Commit]]></item>
<item key="performer" type="list"><list>
<item><![CDATA[ZMSEditor]]></item>
<item><![CDATA[ZMSAdministrator]]></item>
</list>
</item>
<item key="to" type="list"><list>
<item><![CDATA[AC_COMMITTED]]></item>
</list>
</item>
</dictionary>
</item>
<item><![CDATA[TR_ROLLBACK]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"><![CDATA[<!-- ##### Notification #### -->
<!-- Recipient -->
<dtml-call "REQUEST.set('s_name',getObjProperty('work_uid',REQUEST))">
<dtml-call "REQUEST.set('s_mto',getRecipientWf(REQUEST))">
<!-- Subject -->
<dtml-call "REQUEST.set('s_msubject','[ZMS::%s]: Your changes were rolled back'%getDocumentElement().getTitle(REQUEST))">
<!-- Body -->
<dtml-call "REQUEST.set('l_mbody',[])">
<dtml-call "l_mbody.append('Your changes were rolled back.\n')">
<dtml-call "l_mbody.append('\nWith best regards\n')">
<dtml-call "l_mbody.append('%s\n'%AUTHENTICATED_USER.getId())">
<dtml-call "l_mbody.append('------------------------\n')">
<dtml-call "l_mbody.append('Message generated by ZMS\n')">
<!-- Send notification via MailHost -->
<dtml-call "sendMail(s_mto, s_msubject, ''.join(l_mbody), REQUEST)">

<!-- ##### Rollback #### -->
<dtml-call "rollbackObj(REQUEST)">

<!-- Return with message -->
<dtml-call "REQUEST.set('s_message','Changes were rolled back.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_wfTransitionFinalize',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">]]></item>
<item key="from" type="list"><list>
<item><![CDATA[AC_CHANGED]]></item>
<item><![CDATA[AC_REQUESTED]]></item>
<item><![CDATA[AC_REJECTED]]></item>
</list>
</item>
<item key="name"><![CDATA[Rollback]]></item>
<item key="performer" type="list"><list>
<item><![CDATA[ZMSEditor]]></item>
<item><![CDATA[ZMSAuthor]]></item>
<item><![CDATA[ZMSAdministrator]]></item>
</list>
</item>
<item key="to" type="list"><list>
<item><![CDATA[AC_ROLLEDBACK]]></item>
</list>
</item>
</dictionary>
</item>
<item><![CDATA[TR_LEAVE]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"></item>
<item key="from" type="list"><list>
<item><![CDATA[AC_COMMITTED]]></item>
<item><![CDATA[AC_ROLLEDBACK]]></item>
</list>
</item>
<item key="name"><![CDATA[Leave Workflow]]></item>
<item key="performer" type="list"><list>
</list>
</item>
<item key="to"></item>
</dictionary>
</item>
<item><![CDATA[createMasterVersion]]></item>
<item type="dictionary"><dictionary>
<item key="dtml"><![CDATA[<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  F o r m
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-if "REQUEST.get('btn','')==''">

<!-- ##### Form #### -->
<dtml-var manage_page_header>
</head>
<dtml-var "manage_tabs(_,_,my_manage_options=[{'label':'Create master','action':'manage_createMasterVersion'}])">
<form name="form0" method="post">
<input type="hidden" name="preview" value="preview">
<input type="hidden" name="lang" value="<dtml-var lang>">
<input type="hidden" name="custom" value="<dtml-var custom>">
<table cellspacing="0" cellpadding="1" border="0" width="100%">
<colgroup>
 <col width="20%" />
 <col width="80%" />
</colgroup>
<tr>
 <td colspan="2"><dtml-var "f_headline(_,_,headline='Create master')"></td>
</tr>
<tr>
 <td><div class="form-label">Master-Version</div></td>
 <td><dtml-var "getTextInput(fmName='form0', elName='version_nr', size=10, value='%i.*.*'%(getObjProperty('master_version',REQUEST)+1), type='text', enabled=False)"></td>
</tr>
</table>
<hr size="1">
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_SAVE'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="processMultiselectsOnFormSubmit(); self.btnClicked=this.value;">&nbsp;&nbsp;
<dtml-call "REQUEST.set('submitBtn',getZMILangStr('BTN_CANCEL'))"><input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" value="<dtml-var submitBtn html_quote>" accesskey="<dtml-var "submitBtn[0]" html_quote>" title="ALT+<dtml-var "submitBtn[0]" html_quote>" onclick="self.btnClicked=this.value;">
<br/><br/>
</form>
<dtml-var manage_page_footer>

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  E x e c u t e
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-elif "REQUEST.get('btn','')==getZMILangStr('BTN_SAVE')">
 <!-- Return with message -->
 <dtml-try>
  <dtml-return "RESPONSE.redirect(url_append_params('manage_main',{'lang':lang, 'custom': custom, 'manage_tabs_message':'Created %i master versions.'%tagObjVersions(getObjProperty('master_version',REQUEST)+1,REQUEST)}))">
 <dtml-except>
  <dtml-call "REQUEST.set('manage_tabs_error_message',str(error_type))">
  <dtml-if error_value>
   <dtml-call "REQUEST.set('manage_tabs_error_message',manage_tabs_error_message+': '+str(error_value))">
  </dtml-if>
  <dtml-return "RESPONSE.redirect(url_append_params('manage_main',{'lang':lang, 'custom': custom, 'manage_tabs_error_message':manage_tabs_error_message}))">
 </dtml-try>

<!-- +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
     +-  C a n c e l
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- -->
<dtml-else>
<dtml-call "REQUEST.set('s_message','Operation cancelled.')">
<dtml-return "RESPONSE.redirect(url_append_params('manage_main',{'lang':lang, 'custom': custom, 'manage_tabs_message':s_message}))">

</dtml-if>]]></item>
<item key="from"></item>
<item key="name"><![CDATA[Create master version]]></item>
<item key="performer" type="list"><list>
<item><![CDATA[ZMSAdministrator]]></item>
</list>
</item>
<item key="to" type="list"><list>
</list>
</item>
</dictionary>
</item>
</list>
</item>
</dictionary>
