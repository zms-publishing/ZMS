<?xml version="1.0" encoding="utf-8" ?>
<?zms version='ZMS5-5.0.0'?>
<list>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMS</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-home]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">titlealt</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titleimage</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Titleimage</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">levelnfc</item>
                  <item key="keys" type="list">
                    <list>
                      <item>##</item>
                      <item><![CDATA[return [(x,context.getZMILangStr('OPT_L_%i'%x)) for x in range(3)]]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">levelnfc</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Level</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">TAB_METADATA</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">TAB_METADATA</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_subject</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_subject</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Subject</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_type</item>
                  <item key="keys" type="list">
                    <list>
                      <item>Home</item>
                      <item>Artikel</item>
                      <item>Forum</item>
                      <item>News</item>
                      <item>Resource</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_type</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Type</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_creator</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_creator</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Creator</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">delimiter_permalinks</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Permalinks</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMS.interface_permalinks -->

<div class="control-group" tal:define="zmscontext options/zmscontext">
	<table class="table table-bordered m-0" title="Permalinks">
		<tbody tal:define="prefix python:'%s.permalink.'%zmscontext.meta_id;
			keys python:[x for x in zmscontext.getConfProperties() if x.startswith(prefix)];
			dummy0 python:keys.sort();">
		<tal:block tal:repeat="key keys">
		<tr tal:define="id python:key[len(prefix):]">
			<td class="meta-sort">
				<div class="btn-group">
					<a class="btn btn-secondary" href="javascript:;" tal:attributes="onclick python:'if (confirm(getZMILangStr(\'MSG_CONFIRM_DELOBJ\'))){$(this).parents(\'tr\').remove()}'; title python:here.getZMILangStr('BTN_DELETE')"
						><i class="fas fa-times"></i></a>
				</div><!-- .btn-group -->
			</td>
			<td class="meta-id"><input class="form-control form-control" tal:attributes="name python:'permalink_key_%s'%id; value id;"/>
			<td class="meta-url form-group"><input class="form-control form-control url-input" tal:attributes="name python:'permalink_val_%s'%id; value python:zmscontext.getConfProperty(key)"/>
		</tr>
		</tal:block>
		<tr class="row_insert">
			<td class="meta-sort"><span class="btn btn-light"><i class="fas fa-plus"></i></td>
			<td class="meta-id"><input class="form-control form-control" name="permalink_key__" placeholder="Enter Id..."/>
			<td class="meta-url form-group"><input class="form-control form-control url-input" name="permalink_val__" placeholder="Select Url..."/>
		</tr>
		</tbody>
	</table>
</div>

<!-- /ZMS.interface_permalinks -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface_permalinks</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface_permalinks</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">zmsindex</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">ZMSIndex</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">ZMSIndexZCatalog</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">e</item>
                  <item key="keys" type="list">
                    <list>
                      <item>type(ZMSDocument)</item>
                      <item>type(ZMSObject)</item>
                      <item>type(ZMSRecordSet)</item>
                      <item>type(ZMSReference)</item>
                      <item>type(ZMSModule)</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Objects</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">*</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMS.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Event: onChange
##
# --// ZMS.onChangeObjEvt //--

request = zmscontext.REQUEST
# permalinks
if 'permalink_key__' in request and 'permalink_val__' in request:
  prefix = '%s.permalink.'%zmscontext.meta_id
  # delete all conf-properties
  for key in [x for x in zmscontext.getConfProperties() if x.startswith(prefix)]:
    zmscontext.delConfProperty(key)
  # set new conf-properties
  reqprefix = 'permalink_key_'
  for reqkey in request.form:
    if reqkey.find(reqprefix) >= 0:
      id = reqkey[len(reqprefix):]
      k = request.get('permalink_key_%s'%id)
      v = request.get('permalink_val_%s'%id)
      if k and v:
        zmscontext.setConfProperty(prefix+k,v)

# --// /ZMS.onChangeObjEvt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">onChangeObjEvt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChange]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMS.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext"
		tal:content="structure python:zmscontext.bodyContentZMSLib_page(zmscontext,request)">
	The page-content
</tal:block>

<!-- /ZMS.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMS]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">ZMS</item>
          <item key="name">ZMS</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.2.6</item>
          <item key="type">ZMSDocument</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSDocument</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[far fa-file-alt]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">titlealt</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titleimage</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Titleimage</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">levelnfc</item>
                  <item key="keys" type="list">
                    <list>
                      <item>##</item>
                      <item><![CDATA[return [(x,context.getZMILangStr('OPT_L_%i'%x)) for x in range(3)]]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">levelnfc</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Level</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">TAB_METADATA</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">TAB_METADATA</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_subject</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_subject</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Subject</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_type</item>
                  <item key="keys" type="list">
                    <list>
                      <item>Home</item>
                      <item>Artikel</item>
                      <item>Forum</item>
                      <item>News</item>
                      <item>Resource</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_type</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Type</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_creator</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_creator</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Creator</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">e</item>
                  <item key="keys" type="list">
                    <list>
                      <item>type(ZMSObject)</item>
                      <item>type(ZMSRecordSet)</item>
                      <item>type(ZMSModule)</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Objects</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">*</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSDocument.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext"
		tal:content="structure python:zmscontext.bodyContentZMSLib_page(zmscontext,request)">
	The page-content
</tal:block>

<!-- /ZMSDocument.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSDocument]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSDocument</item>
          <item key="name">ZMSDocument</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.0.1</item>
          <item key="type">ZMSDocument</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSFile</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">titlealt</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="text/plain" filename="f_css_defaults" type="file"><![CDATA[
div.ZMSFile.none, div.ZMSLinkElement.none 
	{
	background-color: transparent;
	border: 2px dashed #eee;
	}

div.ZMSFile.floatleft, div.ZMSLinkElement.floatleft 
	{ 
	float:left;
	width:50%
	}

div.ZMSFile.floatright, div.ZMSLinkElement.floatright 
	{ 
	float:right;
	width:50%
	}

div.ZMSFile div.title a:link, div.ZMSFile div.title a:visited, 
div.ZMSLinkElement div.title a:link, div.ZMSLinkElement div.title a:visited 
	{
	font-weight:bold;
	text-decoration:none;
	}
]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">file</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">File</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">file</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">align</item>
                  <item key="keys" type="list">
                    <list>
                      <item>LEFT</item>
                      <item>LEFT_FLOAT</item>
                      <item>RIGHT</item>
                      <item>RIGHT_FLOAT</item>
                      <item>NONE</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Align</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<script type="text/javascript">

$(function(){
	$('#file_'+getZMILang()).change( function() {
		var filename = $(this).val();
		var i = Math.max(filename.lastIndexOf('/'),filename.lastIndexOf('\\'));
		if (i > 0) {
			filename = filename.substring(i+1);
		}
		var title = $('.ZMSFile.properties #title_'+getZMILang()+',.modal-body #title_'+getZMILang());
		var titlealt = $('.ZMSFile.properties #titlealt_'+getZMILang()+',.modal-body #titlealt_'+getZMILang());
		if (title.val().length == 0) {
			title
				.attr({'data-value-attr':'placeholder','placeholder':filename})
				.val(filename)
		};
		if (titlealt.val().length == 0) {
			titlealt
				.attr({'data-value-attr':'placeholder','placeholder':filename})
				.val(filename)
		};
	});
});

</script>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">TAB_METADATA</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">TAB_METADATA</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-download]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.attr_img_src"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Image
##
# --// BO attr_img_src //--

file = zmscontext.attr('file')
mt = file.getContentType()
return zmscontext.getMimeTypeIconSrc(mt)

# --// EO attr_img_src //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_img_src</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.attr_url"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Url
##
# --// BO attr_url //--

file = zmscontext.attr('file')
return file.getHref(zmscontext.REQUEST)

# --// EO attr_url //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_url</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Url]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.attr_abstract"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Abstract
##
# --// BO attr_abstract //--
#
return zmscontext.attr('attr_dc_description')

# --// EO attr_abstract //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_abstract</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Abstract]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.getHref2IndexHtml"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Function: index_html
##
# --// BO getHref2IndexHtml //--

file = zmscontext.attr('file')
if file:
    return file.getHref(zmscontext.REQUEST)
return ''

# --// EO getHref2IndexHtml //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">getHref2IndexHtml</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Function: index_html]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSFile.standard_html -->

<tal:block tal:define="Std modules/Products.PythonScripts/standard; newline_to_br nocall:Std/newline_to_br; global 
		zmscontext options/zmscontext;
		subclass      python:[zmscontext.meta_id];
		title         python:zmscontext.attr('title');
		titlealt      python:zmscontext.attr('titlealt');
		file          python:zmscontext.attr('file');
		align         python:zmscontext.attr('align');
		displaytype   python:zmscontext.attr('displaytype');
		abstract      python:zmscontext.attr('attr_abstract')">
	<tal:block tal:condition="python:align not in ['','NONE'] or request.get('URL','').find('/manage')>0">
		<tal:block tal:condition="python:align in [ '', 'NONE']">
			<tal:block tal:define="global subclass python:subclass+['none']"></tal:block>
		</tal:block>
		<tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
			<tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
		</tal:block>
		<tal:block tal:condition="python:align in [ 'LEFT_FLOAT'] and displaytype in [ 'top', 'bottom']">
			<tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
		</tal:block>
		<tal:block tal:condition="python:align in [ 'RIGHT_FLOAT'] and displaytype in [ 'top', 'bottom']">
			<tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
		</tal:block>
		<div tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)">
			<tal:block tal:condition="python:file">
				<div class="title" tal:define="mt python:file.getContentType()">
					<img style="width:1rem;vertical-align:bottom" src="data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23666666' d='M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z'%3E%3C/path%3E%3C/svg%3E"
						tal:attributes="title python:'%s (%s)'%(mt,file.getDataSizeStr())" border="0" alt="Icon" align="absmiddle" />
					<a tal:attributes="href python:file.getHref(request)" tal:content="structure python:titlealt" target="_blank">The titlealt</a>
					(<span tal:content="python:file.getDataSizeStr()">The data-size string</span>)
				</div>
				<div tal:condition="python:title and title!=titlealt" tal:content="structure title" class="text">The title</div>
				<div tal:condition="python:abstract" tal:content="structure python:newline_to_br(abstract)" class="description">The abstract</div>
			</tal:block>
			<tal:block tal:condition="python:not (file)" tal:content="python:zmscontext.getZMILangStr('ATTR_NONE')">
				None
			</tal:block>
		</div>
	</tal:block>
</tal:block>

<!-- /ZMSFile.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSFile]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSFile</item>
          <item key="name">ZMSFile</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.4.0</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSFlexbox</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-columns fas fa-columns]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon-Class (CSS)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">e</item>
                  <item key="keys" type="list">
                    <list>
                      <item>type(ZMSObject)</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Items</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">*</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[@media only screen and (min-width: 576px) {
	body:not(.zmi) .ZMSFlexbox:not(.contentEditable) {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
	}
	body:not(.zmi) .ZMSFlexbox:not(.contentEditable) .ZMSFlexboxItem {
		flex-direction: column;
		background: rgba(0,0,0,.05);
		padding: 1rem;
		margin:1rem 0;
	}
	body:not(.zmi) .ZMSFlexbox:not(.contentEditable) .ZMSFlexboxItem > * {
		margin:0 !important;
		padding:0 !important;
	}
	body:not(.zmi) .ZMSFlexbox .ZMSFlexboxItem {
		flex-basis:calc((100% / var(--data-itemcount)) - 3rem);
	}
	body:not(.zmi) .ZMSFlexbox .ZMSFlexboxItem .ZMSGraphic .graphic,
	body:not(.zmi) .ZMSFlexbox .ZMSFlexboxItem .ZMSGraphic .graphic img {
		width:100% !important;
		max-width:100% !important;
	}
	body:not(.zmi) .ZMSFlexbox .ZMSFlexboxItem .ZMSGraphic .text {
		padding-top:1em;
	}
}
}]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSFlexbox.standard_html -->
<div class="ZMSFlexbox"
	tal:define="zmscontext options/zmscontext;
		childnodes python:zmscontext.filteredChildNodes(request);
		itemcount python:len(childnodes);"
	tal:attributes="class python:'ZMSFlexbox itemcount-%s'%(itemcount)">
	<div class="ZMSFlexboxItem"
		tal:repeat="childnode childnodes"
		tal:attributes="style python:'--data-itemcount:%s'%(itemcount)"
		tal:content="structure python:childnode.renderShort(request)">
	</div>
</div>
<!-- /ZMSFlexbox.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Box-Container]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSFlexbox</item>
          <item key="name">Flexbox-Container</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">0.0.6</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSFolder</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[far fa-folder]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">titlealt</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titleimage</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Titleimage</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">levelnfc</item>
                  <item key="keys" type="list">
                    <list>
                      <item>##</item>
                      <item><![CDATA[return [(x,context.getZMILangStr('OPT_L_%i'%x)) for x in range(3)]]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">levelnfc</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Level</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">TAB_METADATA</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">TAB_METADATA</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_subject</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_subject</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Subject</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_type</item>
                  <item key="keys" type="list">
                    <list>
                      <item>Home</item>
                      <item>Artikel</item>
                      <item>Forum</item>
                      <item>News</item>
                      <item>Resource</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_type</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Type</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_creator</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_creator</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Creator</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">e</item>
                  <item key="keys" type="list">
                    <list>
                      <item>type(ZMSDocument)</item>
                      <item>type(ZMSObject)</item>
                      <item>type(ZMSRecordSet)</item>
                      <item>type(ZMSModule)</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Objects</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">*</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSFolder.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext"
		tal:content="structure python:zmscontext.bodyContentZMSLib_page(zmscontext,request)">
	The page-content
</tal:block>

<!-- /ZMSFolder.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSFolder]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSFolder</item>
          <item key="name">ZMSFolder</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.0.1</item>
          <item key="type">ZMSDocument</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSGraphic</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[far fa-image]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="text/plain" filename="default.css" type="file"><![CDATA[
/*--------- .ZMSGraphic --------------*/
a.fancybox img {
	padding:1px 1px 21px 1px;
	background:transparent url(/++resource++zms_/img/zoom.gif) bottom right no-repeat;
	background-color:transparent;
}
div.ZMSGraphic {
	background-color: transparent;
	margin: 1em 0;
}
.zmi div.ZMSGraphic {
	margin:0;
}
div.ZMSGraphic.left {
	text-align:left;
}
div.ZMSGraphic.right {
	text-align:right;
}
div.ZMSGraphic.center {
	text-align:center;
}
div.ZMSGraphic.floatleft {
	float:left;
	margin-right:2em;
}
div.ZMSGraphic.floatright {
	float:right;
	margin-left:2em;
}
div.ZMSGraphic .alignleft {
	margin-right:10px;
}
div.ZMSGraphic.center div.graphic {
	text-align:center;
	margin:0px auto;
}
div.graphic {
	max-width:100% !important;
}
div.graphic.alignleft {
	float:left;
	text-align:right;
}
div.graphic.alignright {
	float:right;
	text-align:right;
}
div.ZMSGraphic div.text {
	padding: 4px;
}
.ZMSGraphic .text {
	background-color:transparent;
	padding:.5em 1em 0em 1em;
	font-size:smaller;
	font-style:italic;
}
.ZMSGraphic .graphic {
	margin-bottom: 7px;
}
.ZMSGraphic.center div.graphic  {
	margin:0 auto
}
.ZMSGraphic.left .graphic.alignleft {
	float:left;
	margin-right:15px;
}
.ZMSGraphic.left .text,
.ZMSGraphic.right .graphic,
.ZMSGraphic.right .text {
	width: auto !important;
}
/*-- ## FF Patch ## --*/
div.ZMSGraphic.right div.graphic {
	width:100% !important;
}
div.ZMSGraphic.right div.graphic img {
	display:inline !important;
}
a.zoom img.zoom,
a.superzoom img.superzoom {
	width: 26px;
	height: 21px;
	background-position:top right;
	background-repeat:no-repeat;
	margin:0px;
	padding:0px;
}
a.zoom img.zoom {
	background-image: url(/++resource++zms_/img/zoom.gif);
}
a.superzoom img.superzoom {
	background-image: url(/++resource++zms_/img/superzoom.gif);
}
/*--------- /.ZMSGraphic --------------*/
]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default">2</item>
                  <item key="id">displaytype</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Display-Type</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">int</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">img</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Image</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">imghires</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image (Hires)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">imgsuperres</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image (Superres)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default">alt=""</item>
                  <item key="id">img_attrs_spec</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">WAI-Attributes</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_url</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image (URL)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">url</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">align</item>
                  <item key="keys" type="list">
                    <list>
                      <item>LEFT</item>
                      <item>LEFT_FLOAT</item>
                      <item>RIGHT</item>
                      <item>RIGHT_FLOAT</item>
                      <item>CENTER</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Align</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">text</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Text</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">richtext</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[##
return context.getTextFormatDefault()]]>
                  </item>
                  <item key="id">format</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Format</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">textalign</item>
                  <item key="keys" type="list">
                    <list>
                      <item>LEFT</item>
                      <item>RIGHT</item>
                      <item>CENTER</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Text-Align</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSGraphic.titlealt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None
##title=py: DC.Title.Alt
##
# --// BO titlealt //--

from Products.zms import standard
try:
    titlealt = standard.string_maxlen(zmscontext.attr('text'),24)
    img = zmscontext.attr('img')
    if titlealt:
        if len(titlealt) < 24:
            return titlealt
        else:
            return '%s...'%(titlealt)
    else:
        return img.getFilename() 
except:
    return zmscontext.display_type(zmscontext.REQUEST)

# --// EO titlealt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSGraphic.getHref2IndexHtml"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Function: index_html
##
# --// getHref2IndexHtml //--

img = zmscontext.attr('img')
if img:
    return img.getHref(zmscontext.REQUEST)
return ''

# --// /getHref2IndexHtml //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">getHref2IndexHtml</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Function: index_html]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSGraphic.standard_html -->

<tal:block tal:define="
		standard      modules/Products/zms/standard;
		zmscontext    options/zmscontext;
		subclass      python:[zmscontext.meta_id];
		text          python:zmscontext.getText(request);
		format        python:zmscontext.attr('format');
		textclass     python:'text';
		displaytype   python:zmscontext.dctDisplaytype.get(str(zmscontext.attr('displaytype')),'left');
		align         python:zmscontext.attr('align');
		textalign     python:zmscontext.attr('textalign');
		imgclass      python:'img img-responsive';
		imgurl        python:zmscontext.getLinkUrl(zmscontext.attr('attr_url'),request);
		isimghires    python:zmscontext.attr('imghires');
		imgthumb      python:request['URL'].find('/manage')>0;
		imgspecial    python:str(zmscontext.attr('img_attrs_spec'));">
	<tal:block tal:condition="python:imgurl and isimghires">
		<tal:block
			tal:define="global text python:text+'\n<span class=\042imgurl\042>'+zmscontext.getLangStr('HREF_MORE',request['lang'])%(' href=\042%s\042'%imgurl)+'</span>';
			            global imgurl python:''">
		</tal:block>
	</tal:block>
	<tal:block
		tal:define="global renderedtext python:zmscontext.renderText(format,'text',text,request);
		            global bodyContent python:zmscontext.renderDisplaytype(displaytype,'img','imghires',imgurl,imgthumb,imgspecial,imgclass,renderedtext,textalign,textclass,request)">
	</tal:block>
	<tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
		<tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
	</tal:block>
	<tal:block tal:condition="python:align in [ 'LEFT_FLOAT'] and displaytype in [ 'top', 'bottom']">
		<tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
	</tal:block>
	<tal:block tal:condition="python:align in [ 'RIGHT_FLOAT'] and displaytype in [ 'top', 'bottom']">
		<tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
	</tal:block>
	<div tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)" tal:content="structure bodyContent">
		The graphic
	</div>
</tal:block>

<!-- /ZMSGraphic.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSGraphic]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSGraphic</item>
          <item key="name">ZMSGraphic</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.3.2</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSLib</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- bodyContentZMSLib_page -->

	<tal:block tal:condition="python:here.meta_id in ['ZMS','ZMSFolder','ZMSDocument']" tal:define="global 
		childNodes python:[ob for ob in here.getObjChildren('e',request,here.PAGEELEMENTS) if ob.meta_id not in ['bt_carousel']]">
    <tal:block tal:repeat="childNode childNodes" tal:content="structure python:childNode.getBodyContent(request)">
      The page-element body-content
    </tal:block>
	</tal:block>
	<tal:block tal:condition="python:here.meta_id not in ['ZMS','ZMSFolder','ZMSDocument']">
		<tal:block tal:content="structure python:here.getBodyContent(request)">
			The body-content
		</tal:block>
	</tal:block>

<!-- /bodyContentZMSLib_page -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">bodyContentZMSLib_page</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Page]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Page Template]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLib.uploadMedia"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None
##title=py: Upload: Media
##
# --// BO uploadMedia //--
from Products.zms import pilutil

result = {}
temp_folder = context.temp_folder
request = context.REQUEST
base_url = request.get('SERVER_URL')
form_id = request.get('form_id')
file = request.get('file')

def resize_image(context, orig, maxdims):
  width = orig.getWidth()
  height = orig.getHeight()
  while width > maxdims or height > maxdims:
    if width > maxdims:
      height = int(height * maxdims / width)
      width = maxdims
    elif height > maxdims:
      width = int(width * maxdims / height)
      height = maxdims
  size = (width,height)
  blob = pilutil.resize( orig, size)
  return blob

def create_blob(container, blob):
  filename = blob.getFilename()
  data = blob.getData()
  id = form_id + '_' + filename
  if id in container.objectIds():
    container.manage_delObjects(ids=[id])
  if blob.getContentType().startswith('image'):
    container.manage_addImage( id=id, title=filename, file=data)
  else:
    container.manage_addFile( id=id, title=filename, file=data)
  ob = getattr(container,id)
  d = {}
  d['content_type'] = blob.getContentType()
  d['filename'] = blob.getFilename()
  d['absolute_url'] = ob.absolute_url()[len(base_url):]
  return d

if file and file.filename:
  blobs = {}
  blob = context.FileFromData(file,file.filename)
  content_type = blob.getContentType()
  if content_type.startswith('image'):
    image = context.ImageFromData(file,file.filename)
    maxdims = int(context.getConfProperty('InstalledProducts.pil.thumbnail.max'))
    if image.getWidth() > maxdims:
      result['imghires'] = create_blob(temp_folder,image)
      result['image'] = create_blob(temp_folder,resize_image(context, image, maxdims))
    else:
      result['image'] = create_blob(temp_folder,image)
  else:
    result['file'] = create_blob(temp_folder,blob)

result['message'] = context.getZMILangStr( 'MSG_UPLOADED')
return context.str_json(result)

# --// EO uploadMedia //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">uploadMedia</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Upload: Media]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSLib.show_version -->

<tal:block tal:define="global zmscontext options/zmscontext">
	<tal:block tal:condition="python:zmscontext.getHistory()">
		<script>
		<!--
			function showHistory(el) {
				var v = $(el).val();
				var version_nr = v.substr(0,v.indexOf(" "));
				var version_dt = v.substr(v.indexOf(" ")+1);
				// $(el).prop('selectedIndex',0);
				$.get("ajaxBodyContentObjHistory",{lang:$("input#lang").val(),version_nr:version_nr,revision:1,ts:new Date()},function(data) {
					var $xml = $( data );
					var body = $xml.find( "ObjHistory" );
					var title = $xml.find("title").text();
					var description = $xml.find("description").text();
					if ($("div#revision").length==0) {
						$("body").append('<'+'div id="revision"><'+'/div>');
					}
					var html = ''
						+ '<'+'div id="flow" class="hyphenate">'
						+ '<'+'article>'
						+ '<'+'header>'
						+ '<'+'h1 style="font-weight:bold!important">'+title+'<'+'/h1>'
						+ '<'+'p style="text-decoration:italic!important" class="description">'+description+'<'+'/p>'
						+ '<'+'/header>'
						+ '<'+'/section>';
					for (var i = 0; i < body.length; i++) {
						html += $(body[i]).text();
					}
					html += ''
						+ '<'+'/section>';
						+ '<'+'/article>';
						+ '<'+'/div>';
					$("div#revision").html(html);
					if ($("div#revision .ZMSGraphic").length> 0){
						showFancybox({
							'href':'#revision',
							'title':'r'+v,
							'autoDimensions':true,
							'transitionIn':'fade',
							'transitionOut':'fade',
							onCleanup:function() {
								$("div#revision").remove();
							}
						});
					}
					$("div#revision>div").show();
					// Quickfix1: Remove ZMSLinkElement doublicates
					$('#Content .ZMSLinkElement[id]').each(function (i) {
						$('[id="' + this.id + '"]').slice(1).remove();
					});
					$('#Content .ZMSTeaserContainer,#Content .ZMSTeaserElement').hide();
					
				});
			}
			// Quickfix2: Load last version initially
			$ZMI.registerReady(function(){
			var historyselect = $("div#ZMSLib-show_version select");
			if ( historyselect.children().length > 1 ) {
				showHistory(historyselect.prop("selectedIndex", 1));
				historyselect.prop("selectedIndex", 1);
			}
			});
		-->
		</script>
		<input type="hidden" id="lang" name="lang" tal:attributes="value request/lang"/>
		<select onchange="showHistory(this)">
			<option value="" tal:content="python:'--- %s ---'%zmscontext.getLangStr('TAB_HISTORY',request['lang'])">the history</option>
			<tal:block tal:define="global 
					change_history python:zmscontext.attr('change_history');
					rchange_history python:[change_history[len(change_history)-(x+1)] for x in range(len(change_history))]"
					tal:repeat="history rchange_history">
				<option
						tal:attributes="value python:'%i.%i.%i %s'%(history['master_version'],history['major_version'],0,zmscontext.getLangFmtDate(history['version_dt'],request['lang'],'SHORTDATETIME_FMT'))" 
						tal:content="python:'r%i.%i.%i (%s)'%(history['master_version'],history['major_version'],0,zmscontext.getLangFmtDate(history['version_dt'],request['lang'],'SHORTDATETIME_FMT'))">version_nr version_dt</option>
			</tal:block>
		</select>
	</tal:block>
</tal:block>

<!-- /ZMSLib.show_version -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">show_version</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Show version]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "index_html"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=
##title=Index-Html
##
# --// index_html //--

request = container.REQUEST
RESPONSE =  request.RESPONSE
RESPONSE.redirect(context.objectValues(['ZMS'])[0].getHref2IndexHtml(request,deep=False), status=301)

# --// /index_html //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">index_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Index-Html</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Script (Python)]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                </list>
              </item>
              <item key="insert_custom"></item>
              <item key="insert_deny" type="list">
                <list>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">ZMSLib</item>
          <item key="name">ZMSLib</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.1.2</item>
          <item key="type">ZMSLibrary</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSLinkContainer</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-link]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="text/plain" filename="default.css" type="file"><![CDATA[div.ZMSLinkContainer {
	background-color: #eee;
}]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Defaults]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
<tal:block tal:define="global
		zmscontext options/zmscontext;">

<style>
table.ZMSLinkContainer td.meta-sort .input-group {
	width: 68px;
}
table.ZMSLinkContainer td.meta-sort select.zmi-sort {
    width: 3em !important;
}
.zmi-manage-main-change div.constraint {
	display:inline-block;
	max-width:200px;
	overflow:hidden;
}
</style>

<!--
################################################################################
##### Align: EDIT
################################################################################
-->
<div class="form-group row" id="tr_align" tal:condition="python:zmscontext.getParentNode().meta_id in ['ZMS','ZMSFolder','ZMSDocument']">
	<label class="col-sm-2 control-label" for="title_ger"><span tal:content="structure python:here.getZMILangStr('ALIGN')">Align</span></label>
	<div class="col-sm-10" tal:content="structure python:zmscontext.getObjInput('align',request)">the align-input</div>
</div>

<table class="table table-striped table-bordered zmi-sortable ZMSLinkContainer">
<tr>
	<colgroup>
		<col style="width:5%">
		<col style="width:5%">
		<col style="width:29%">
		<col style="width:29%">
		<col style="width:29%">
		<col style="width:5%">
	</colgroup> 
	<th>&nbsp;</th>
	<th class="text-center">
		<label for="_active" tal:content="structure python:here.getZMILangStr('ATTR_ACTIVE')">Active*</label>
	</th>
	<th>
		<label for="_url" tal:content="structure python:here.getZMILangStr('ATTR_URL')">Url*</label>
	</th>
	<th>
		<label for="_title" tal:content="structure python:here.getZMILangStr('ATTR_TITLE')">Title*</label>
	</th>
	<th colspan="2">
		<label for="_description" tal:content="structure python:here.getZMILangStr('ATTR_DESCRIPTION')">Description</label>
	</th>
</tr>

<!--
################################################################################
##### Link-Elements: EDIT
################################################################################
-->
<tal:block tal:condition="python:request.get( 'ZMS_INSERT', None)==None">
<tal:block tal:define="objChildren python:zmscontext.getObjChildren('e',request); hasChildren python:len(objChildren)>0">
<tr tal:repeat="childNode objChildren">
	<td class="meta-sort">
		<div class="input-group">
			<select class="zmi-sort" tal:attributes="onchange python:'location.href=\'%s/manage_moveObjToPos?lang=%s&pos:int=\'+(this.selectedIndex+1)'%(childNode.id,request['lang'])">
				<tal:block tal:repeat="seqindex python:range(len(objChildren))">
					<option tal:attributes="selected python:['','selected'][int(seqindex==objChildren.index(childNode))]" tal:content="python:seqindex+1">seqindex+1</option>
				</tal:block>
			</select>
			<div class="input-group-append">
				<a class="btn btn-secondary" href="javascript:;" 
					tal:attributes="onclick python:'if (confirm(getZMILangStr(\'MSG_CONFIRM_DELOBJ\'))){self.location.href=\'manage_deleteObjs?ids:list=%s&lang=%s&preview=%s\'}'%(childNode.id,request['lang'],request['preview']); title python:here.getZMILangStr('BTN_DELETE')"
					><i class="fas fa-times"></i></a>
			</div>
		</div><!-- .input-group -->
	</td>
	<td align="center" tal:content="structure python:childNode.getCheckbox(fmName='form0',elName='active%s'%(childNode.getId()),value=childNode.isActive(request))"></td>
	<td tal:content="structure python:childNode.getUrlInput(fmName='form0',elName='url%s'%(childNode.getId()),elTextName='title%s'%(childNode.getId()),size=15,value=childNode.getObjAttrValue(childNode.getObjAttr('attr_ref'),request))"><input/></td>
	<td tal:content="structure python:childNode.getTextInput(fmName='form0',elName='title%s'%(childNode.getId()),size=15,value=childNode.getObjAttrValue(childNode.getObjAttr('title'),request))"><input/></td>
	<td tal:content="structure python:childNode.getTextArea(fmName='form0',elName='description%s'%(childNode.getId()),cols=20,rows=2,value=childNode.getObjAttrValue(childNode.getObjAttr('attr_dc_description'),request))"><textarea/></td>
	<td>
		<div class="zmi-manage-main-change" style="display:block;visibility:visible" tal:content="structure python:childNode.zmi_manage_main_change(childNode,request)">
			the info child-node
		</div>
	</td>
</tr>
</tal:block>
</tal:block>
<!--
################################################################################
##### Link-Elements: INSERT
################################################################################
-->
<tal:block tal:define="global dummy0 python:request.set( 'ZMS_INSERT', 'ZMSLinkElement')"></tal:block>
<tr class="row_insert">
	<td class="meta-sort"><span class="btn btn-light"><i class="fas fa-plus"></i></span></td>
	<td align="center" tal:content="structure python:here.getCheckbox(fmName='form0',elName='active_',value=True)"></td>
	<td tal:content="structure python:here.getUrlInput(fmName='form0',elName='url_',elTextName='_title',size=15,value='')"><input/></td>
	<td tal:content="structure python:here.getTextInput(fmName='form0',elName='title_',size=15,value='')"><input/></td>
	<td colspan="2"
		tal:content="structure python:here.getTextArea(fmName='form0',elName='description_',cols=20,rows=2,value='')"><textarea/>
	</td>
</tr>
<tal:block tal:define="global dummy0 python:request.set( 'ZMS_INSERT', None)"></tal:block>

</table>

</tal:block>
</tal:block>
<tal:block tal:define="dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['align','e'])"></tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">align</item>
                  <item key="keys" type="list">
                    <list>
                      <item>LEFT</item>
                      <item>LEFT_FLOAT</item>
                      <item>RIGHT</item>
                      <item>RIGHT_FLOAT</item>
                      <item>NONE</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Align</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">e</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Link-Elements</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">ZMSLinkElement</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkContainer.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Event: onChangeObj
##
# --// BO onChangeObjEvt //--

def equals(o, d):
  for k in d:
    if o.attr(k) != d[k]:
      return False
  return True

request = zmscontext.REQUEST
lang = request['lang']
if request.get('btn') == zmscontext.getZMILangStr('BTN_SAVE'):
  align = zmscontext.attr('align')
  # Save.
  for childNode in zmscontext.getChildNodes(request,['ZMSLinkElement']):
    id = childNode.id
    active = int(request.get('active%s'%id,1))
    url = request['url%s'%id].strip()
    title = request['title%s'%id].strip()
    description = request['description%s'%id].strip()
    attr_type = ['new','replace'][int(url.startswith('{$') and url.endswith('}'))]
    d = {'active':active,'title':title,'titlealt':title,'attr_ref':url,'attr_dc_description':description,'attr_type':attr_type,'align':align}
    if not equals(childNode,d):
      childNode.setObjStateModified(request)
      for k in d:
        childNode.setObjProperty(k,d[k],lang)
      childNode.onChangeObj(request)
  # Insert.
  id = '_'
  url = request['url%s'%id].strip()
  if len(url) > 0:
    active = int(request.get('active%s'%id,1))
    title = request['title%s'%id].strip()
    description = request['description%s'%id].strip()
    attr_type = ['new','replace'][int(url.startswith('{$') and url.endswith('}'))]
    d = {'active':active,'title':title,'titlealt':title,'attr_ref':url,'attr_dc_description':description,'attr_type':attr_type,'align':align}
    childNode = zmscontext.manage_addZMSCustom('ZMSLinkElement',d,request)

# --// EO onChangeObjEvt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">onChangeObjEvt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChangeObj]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSLinkContainer.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		subclass      python:[zmscontext.meta_id];
		align         python:zmscontext.attr('align')">
  <tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
    <tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
  </tal:block>
  <tal:block tal:condition="python:align in [ 'LEFT_FLOAT']">
    <tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
  </tal:block>
  <tal:block tal:condition="python:align in [ 'RIGHT_FLOAT']">
    <tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
  </tal:block>
  <div tal:condition="python:len(subclass)>0"
       tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)"
       tal:content="structure python:''.join([x.renderShort(request) for x in zmscontext.filteredChildNodes(request,'ZMSLinkElement')])">
    The content
  </div>
</tal:block>

<!-- /ZMSLinkContainer.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSLinkContainer]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSLinkContainer</item>
          <item key="name">ZMSLinkContainer</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.1.10</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSLinkElement</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-link]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="text/plain" filename="default.css" type="file"><![CDATA[/* @see ZMSFile.f_css_defaults */]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">titlealt</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<div id="inferface0" tal:define="global
		zmscontext options/zmscontext;
		dummy0 python:request.set('beforeSubmitBtnClick','if ( zmiOnSubmitEventHandler(this)) { ');
		dummy0 python:request.set('afterSubmitBtnClick',' } ')">
<script type="text/javascript">
<!--//

var btn = null;
var remoteHref = null;
var remoteHrefValid = false;
var remoteHrefResponseWaiting = false;
var remoteHrefResponseTimeout = 5000;

function zmiOnSubmitEventHandler(el) {
	btn = el;
	if ($("#attr_type").val() == "remote") {
		var href = $("#attr_ref").val();
		if ( !remoteHrefValid || remoteHref != href) {
			remoteHref = href;
			remoteHrefValid = false;
			remoteHrefResponseWaiting = true;
			self.btnClicked = 'break';
			// Set wait-cursor.
			$(document.body).css( "cursor", "wait");
			// JQuery.AJAX.get
			$.get( remoteHref+"/ajaxGetBodyContent", remoteResponse);
			// Set time-out.
			setTimeout("remoteResponseTimedout()",remoteHrefResponseTimeout);
		}
		return remoteHrefValid;
	}
	return true;
}

function remoteResponse(data) {
	if (remoteHrefResponseWaiting) {
		remoteHrefResponseWaiting = false;
		// Reset wait-cursor.
		$(document.body).css( "cursor", "auto");
		//
		$("#attr_ref").removeClass("form-error");
		remoteHrefValid = true;
		btn.click();
	}
}

function remoteResponseTimedout() {
	if (remoteHrefResponseWaiting) {
		remoteHrefResponseWaiting = false;
		// Reset wait-cursor.
		$(document.body).css( "cursor", "auto");
		//
		$("#attr_ref").addClass("form-error");
		remoteHrefValid = false;
		if (confirm( "Time-Out "+getZMILangStr('ATTR_URL')+": "+remoteHref)) {
			remoteHrefValid = true;
			btn.click();
		}
	}
}

initAttrRef = function() {
		var v = $(this).val();
		var $select = $("select#attr_type");
		$("option",$select).each(function() {
			$(this).prop("disabled","");
			if (v.indexOf("{$")!=0 && $.inArray($(this).prop("value"),["embed","recursive","remote"])>=0) {
				$(this).prop("disabled","disable");
			}
		});
	};

$(function(){

	$ZMI.afterInitInputFields(function() {
		$("input#attr_ref").each(function() {
				var $input = $(this);
				var $inputgroup = $input.parent();
				if ($input.val().indexOf('{$')==0 && $input.prop("disabled")) {
					$input.attr("data-value",$input.val());
					if ($(".dropdown.languages .dropdown-menu li").length>0) {
						var html = ''
							+ '<div class="btn-group">'
							+ '<button type="button" class="dropdown-toggle btn btn-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'
								+ '<i class="fas fa-flag"></i>'
							+ '</button>'
							+ '<div class="dropdown-menu">'
							+ '<a class="dropdown-item" href="#" data-language=""><i class="far fa-square"></i> Default</a>';
						$(".dropdown.languages .dropdown-menu li").each(function() {
								html += '<a class="dropdown-item" href="#" data-language="'+$("a",this).attr("data-language")+'"><i class="far fa-square"></i> '+$("a",this).text()+'</a>';
							});
						html += ''
							+ '</div>'
							+ '</div>';
						$(".input-group-addon",$inputgroup).html(html).addClass("input-group-dropdown");
						var fn = function() {
								var v = $("#ref_lang").val();
								var attr_ref = $input.attr("data-value");
								if (v!="") {
									attr_ref = attr_ref.replace(/;lang\=\w*/gi,'');
									attr_ref = attr_ref.substr(0,attr_ref.indexOf('}'));
									attr_ref += ';lang='+v+'}';
								}
								$input.val(attr_ref).change();
								$(".input-group-addon button .fas fa-flag",$inputgroup).removeClass("text-muted text-primary").addClass(v==""?"text-muted":"text-primary");
								$(".input-group-addon .dropdown-menu li a",$inputgroup).each(function() {
										$(".fa-check-square",this).toggleClass("fa-square fa-check-square");
										if (v==$(this).attr("data-language")) {
											$(".fa-square",this).toggleClass("fa-square fa-check-square");
										}
									});
							};
						fn();
						$(".input-group-addon .dropdown-menu li a",$inputgroup)
							.click(function() {
									$("#ref_lang").val($(this).attr("data-language"));
									fn();
								});
					}
				}
				else {
				$("#ref_lang").val("");
				}
			});
		});

	$("input#attr_ref").change(initAttrRef).change();
	$("#tr_attr_ref_type select").css("width", "100%");
});

//-->
</script>
<!--
################################################################################
##### Ref & Type: EDIT
################################################################################
-->
<input type="hidden" id="ref_lang" tal:attributes="name python:'ref_lang_%s'%request['lang']; value python:zmscontext.attr('ref_lang')"/>
<div class="form-group row" id="tr_attr_ref">
	<label class="col-sm-2 col-md-2 col-lg-2 control-label mandatory" for="attr_ref"><span tal:content="structure python:here.getZMILangStr('ATTR_URL')">Url</span></label>
	<div class="col-sm-10">
		<div class="pull-left" style="width:50%">
			<tal:block tal:content="structure python:zmscontext.getObjInput('attr_ref',request)">the ref-input</tal:block>
		</div>
		<div id="tr_attr_ref_type" class="form-inline" style="width:50%;float:right" tal:content="structure python:zmscontext.getObjInput('attr_type',request)">the type-input</div>
	</div>
</div>
<!--
################################################################################
##### Embedded Object: PREVIEW
################################################################################
-->
<div class="form-group row" id="tr_attr_preview" tal:condition="not:python:request.get('ZMS_INSERT')">
	<label class="col-sm-2 control-label" for="attr_ref_preview"><span tal:content="structure python:here.getZMILangStr('TAB_PREVIEW')"></span></label>
	<div id="attr_ref_preview" class="col-sm-10 attr_ref_preview"
		tal:attributes="style python:['background-color:#fff','background-color:#eee'][int(zmscontext.isPage())]"
		tal:content="structure python:zmscontext.renderShort(request)">
			renderShort
	</div>
</div>
<tal:block tal:define="global dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['attr_ref','ref_lang','attr_type'])"></tal:block>
</div>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">inferface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">inferface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_ref</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Reference</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">url</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">ref_lang</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Reference (lang)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_type</item>
                  <item key="keys" type="list">
                    <list>
                      <item>replace</item>
                      <item>new</item>
                      <item>embed</item>
                      <item>recursive</item>
                      <item>remote</item>
                      <item>iframe</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Type</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">align</item>
                  <item key="keys" type="list">
                    <list>
                      <item>LEFT</item>
                      <item>LEFT_FLOAT</item>
                      <item>RIGHT</item>
                      <item>RIGHT_FLOAT</item>
                      <item>NONE</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Align</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">TAB_METADATA</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">TAB_METADATA</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_creator</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_creator</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Creator</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkElement.attr_url"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Alias: Url
##
# --// attr_url //--

request = zmscontext.REQUEST
lang = request.get('lang',zmscontext.getPrimaryLanguage())
ref = zmscontext.attr('attr_ref')
if ref.startswith('{$') and ref.endswith('}'):
  ref_lang = zmscontext.attr('ref_lang')
  if lang != zmscontext.getPrimaryLanguage() and len(ref_lang) > 0:
    ref = zmscontext.re_sub(';lang\\=\\w*','',ref)
    ref = ref[:-1]
    ref += ';lang='+ref_lang+'}'
return ref

# --// /attr_url //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_url</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Url]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkElement.attr_abstract"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Alias: Abstract
##
# --// attr_abstract //--

return zmscontext.attr('attr_dc_description')

# --// /attr_abstract //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_abstract</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Abstract]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkElement.check_constraints"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Hook: check constraints
##
# --// check_constraints //--

constraints = {}
request = zmscontext.REQUEST
try:
  if not request.get('ZMS_INSERT')=='ZMSLinkElement':
    ref = zmscontext.getRef()
    if ref.startswith('{$') and ref.endswith('}'):
      ref_obj = zmscontext.getRefObj()
      if ref_obj is None:
        constraints['ERRORS'] = constraints.get('ERRORS',[])
        constraints['ERRORS'].append(('ref-obj','link-target not found: '+str(ref)))
except:
  constraints['ERRORS'] = constraints.get('ERRORS',[])
  constraints['ERRORS'].append(('ref-obj',zmscontext.writeError('can\'t check_constraints')))
return constraints

# --// /check_constraints //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">check_constraints</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Hook: Check constraints]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSLinkElement.standard_html -->

<tal:block tal:on-error="structure string:<!-- URL ERROR -->" tal:define="global
		zmscontext options/zmscontext;
		zmsid         python:zmscontext.getId();
		title         python:zmscontext.attr('title');
		titlealt      python:zmscontext.attr('titlealt');
		ref           python:zmscontext.attr('attr_url');
		target        python:zmscontext.attr('attr_type');
		align         python:zmscontext.attr('align');
		abstract      python:zmscontext.attr('attr_abstract').replace('\n','<br/>');
		domain        python:zmscontext.getConfProperty('ASP.ip_or_domain','');
		subclass      python:[zmscontext.meta_id]+[['external','internal'][int((domain != '' and domain in ref) or (ref.startswith('{$') and ref.endswith('}')))]];"
	><tal:block tal:condition="python:target!='iframe'"
		><tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']"
			><tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block
		></tal:block
		><tal:block tal:condition="python:align in [ 'LEFT_FLOAT']"
			><tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block
		></tal:block
		><tal:block tal:condition="python:align in [ 'RIGHT_FLOAT']"
			><tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block
		></tal:block
		><div tal:condition="python:zmscontext.getParentNode().meta_id=='ZMSLinkContainer' or align not in ['','NONE'] or request.get('URL','').find('/manage')>0"
				tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)">
			<div class="title" tal:condition="title">
				<tal:block tal:content="structure python:zmscontext.tal_anchor(zmscontext.getLinkUrl(ref,request),target=['','_blank'][int(zmscontext.attr('attr_type')=='new')],content=titlealt)">the link</tal:block>
			</div>
			<div tal:condition="python:title and title!=titlealt" class="text" tal:content="structure title">The title</div>
			<div tal:condition="python:abstract" class="description" tal:content="structure abstract">The abstract</div>
		</div>
	</tal:block
	><tal:block tal:condition="python:target=='iframe'"
		><iframe class="ZMSLinkElement" tal:attributes="src ref; id zmsid" style="width:100%;padding:0;margin:0;border:0;min-height:260px;background-color:#f5f5f5">IFRAME CONTENT</iframe>
		<tal:block tal:replace="structure python:'<script type=\042text/javascript\042>'"></tal:block>
			// $ZMI Register function: On Docment Ready the iFrameResizer Script will be Executed
			// IMOPRTANT HINT: Targetted Content Needs to be linked to the iframeResizer.contentWindow Script:
			// /++resource++zms_/iframeresizer/iframeResizer.contentWindow.min.js
			// SOURCE: https://github.com/davidjbradshaw/iframe-resizer/blob/master/js/iframeResizer.contentWindow.min.js
			if (typeof(ZMI)!='undefined') {
				$ZMI.registerReady(function() {
					try {
						<tal:block tal:replace="python:'iFrameResize({},\047iframe#%s.ZMSLinkElement\047);'%(zmsid)"></tal:block>
					}
					catch(err) {
					}
				})
			}
		<tal:block tal:replace="structure string:</script>"></tal:block>
		<script tal:condition="python:request.get('link_iframeResizer',True)"
			src="/++resource++zms_/iframeresizer/iframeResizer.min.js"></script>
		<tal:block tal:define="iframeexists python:request.set('link_iframeResizer',False)"></tal:block>
	</tal:block>
</tal:block>

<!-- /ZMSLinkElement.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSLinkElement]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSLinkElement</item>
          <item key="name">ZMSLinkElement</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.1.20</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSNote</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[far fa-comment-alt]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsnote_bg.gif" type="file"><![CDATA[b"b'62273632323733343337333433393334333633333338333333393336333133303634333033303330363433303330363233333330333033303330363636333633363533363334363636333636333636323633363636333634363133383633363636333634333233373334363636363636363636363636363636333633363533363633363636333636363536333633333033303330333033373337333733383338333233363338363536343330333033323331333133323330333036353338333033303330333033303330333933303330333236363635333033303330333036363636333033303330333036363636333033303330333036363636333233313636333933303334333033303330333033303330333033303330333033323633333033303330333033303330333033303330363433303330333036343330333033303333333033343332363336323330333933303334333936353632333033343633333233363631333133303338333636313635333833303331333133363334333136363331333133383631363436353337333733383631363133343632333536313332333936323332333136333632363133333333363236333636333136343337333836353333363536343337363236343337363133363634363433323636333533333330333033313338333836363334333833363333333033343330333033333632323727'"]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">zmsnote_bg.gif</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Resource: Background]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">text</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Memotext</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<script language="JavaScript">
	$ZMI.registerReady(function(){
		$('#zmiIframeAddDialog textarea').attr('title','INFO: the note element is just for internal usage - it is not published');
		$('#zmiIframeAddDialog textarea').attr('placeholder','INFO: the note element is just for internal usage - it is not published');
	});
	</script>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"></item>
                  <item key="default"></item>
                  <item key="id">catalogText</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Hook: Catalog-Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSNote.renderShort -->

<tal:block tal:define="global zmscontext options/zmscontext;
	ishtml python:zmscontext.attr('text').find('<');
	id python:zmscontext.id;
	containerid python:'contentEditable_%s_%s'%(id,request.get('lang','ger'))">

<tal:block tal:condition="python:not request.get('ZMSNote.renderShort')">

<script language="JavaScript">
var firedZMSNoteDiv = false;
var repeatZMSNoteDiv = false;

function onKeyUpZMSNoteDiv(el) {
	if (!firedZMSNoteDiv) {
		firedZMSNoteDiv = true;
		setTimeout('onChangeZMSNoteDiv(\''+el.id+'\')',500);
	}
	else {
		repeatZMSNoteDiv = true;
	}
}

function onChangeZMSNoteDiv(id) {
	if (repeatZMSNoteDiv) {
		repeatZMSNoteDiv = false;
		setTimeout('onChangeZMSNoteDiv(\''+id+'\')',500);
	}
	else {
		firedZMSNoteDiv = false;
		repeatZMSNoteDiv = false;
		var el = $('div#'+id);
		var v = el.text();
		el.addClass('zmiTeaserColor');
		var lang = getZMILang();
		var params = {};
		params['lang'] = lang;
		params['text_'+lang] = v;
		$.post(id+'/manage_changeProperties',params,function(data){
			el.removeClass('zmiTeaserColor');
		},'html');
	}
}
</script>

<tal:block tal:define="global dummy0 python:request.set('ZMSNote.renderShort',True)"></tal:block>
</tal:block>

<div class="note alert alert-warning">
	<div 
		contentEditable="true"
		onkeyup="onKeyUpZMSNoteDiv(this)" 
		tal:attributes="id id;
			contentEditable python:'true' and ishtml<0 or 'false'; 
			onkeyup python:'onKeyUpZMSNoteDiv(this)' and ishtml<0 or None"
		tal:content="structure python:zmscontext.getText(request).replace('\n','<br/>')">the text</div>
</div>

</tal:block>

<!-- /ZMSNote.renderShort -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">renderShort</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[ZMI: Render short]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSNote.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Event: onChangeObj
##
# --// BO onChangeObjEvt //--

request = zmscontext.REQUEST
zmscontext.commitObj(request)

# --// EO onChangeObjEvt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">onChangeObjEvt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChangeObj]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSNote</item>
          <item key="name">ZMSNote</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.0.2</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSObjectSet</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[far fa-list-alt]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">record_meta_ids</item>
                  <item key="keys" type="list">
                    <list>
                      <item>##</item>
                      <item><![CDATA[l = []]]></item>
                      <item><![CDATA[request = context.REQUEST]]></item>
                      <item><![CDATA[metaobj_manager = context.getMetaobjManager()]]></item>
                      <item><![CDATA[l = [metaobj_manager.getMetaobj(x) for x in metaobj_manager.getMetaobjIds()]]]></item>
                      <item><![CDATA[l = [x for x in l if x['type'] in ['ZMSDocument','ZMSObject','ZMSRecordSet']]]]></item>
                      <item><![CDATA[l = [(x['id'],('%s %s'%(context.display_icon(request,x['id']),context.display_type(request,x['id']))).replace('<','<!--').replace('>','-->')) for x in l]]]></item>
                      <item><![CDATA[return l]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Type(s)</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">multiselect</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">record_attr_ids</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Attribute(s) [id:type,...]]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">record_order_default</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Sort-Order (Default) [id:asc|desc]]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[<!-- effective_standard_html(default) -->

<tal:block tal:define="zmscontext context">

<script src="/++resource++zms_/jquery/plugin/jquery.plugin.zmi_highlight.js"></script>
<script>
$(function() {
	var applyListFilter = function() {
			var filter = $('input.filter').val().toLowerCase().trim();
			var v = filter;
			var regexp = new RegExp('<span class="highlight(.*?)">(.*?)</span>', "gi");
			$(".card .card-header.matched").removeClass("matched").each(function() {
					var html = $(this).html();
					html = html.replace(regexp,'$2');
					$(this).html(html);
				});
			if (v.length>0) {
				$(".card .card-header a").each(function() {
						if ($(this).text().toLowerCase().indexOf(v)>=0) {
							htmlReplace($(this),'('+v+')','<span class="highlight">$1</span>');
							$(this).parent(".card-header").addClass("matched");
						}
					});
			}
			$(".card").each(function() {
					if ($(this).text().toLowerCase().indexOf(v)>=0) {
						$(this).show();
					}
					else {
						$(this).hide();
					}
				});
			$(window).trigger('resize');
		};
	var t = null;
	$('input.filter').focus().keyup(function(e) {
		var that = this;
		if (t != null) {
			clearTimeout(t);
		}
		t = setTimeout(applyListFilter, 500);
	});
});
</script>

	<form class="form-filter" method="get" tal:attributes="action request/URL">
		<div class="row">
			<div class="col-md-12">
				<div class="input-group">
					<div class="input-group-prepend">
						<span class="input-group-text"><i class="fas fa-filter"></i> <span class="badge badge-pill badge-info">0</span></span>
					</div>
					<input type="text" class="form-control filter" name="search" placeholder="Filter"/>
				</div><!-- .input-group -->
			</div>
		</div><!-- .row -->
	</form>

	<div class="ZMSObjectSet accordion" tal:define="recordSet python:zmscontext.getSelf().evalMetaobjAttr('recordSet_Prepare')">
		<div class="card" tal:repeat="record recordSet">
			<h3 class="card-header" tal:define="childNode python:zmscontext.operator_getattr(zmscontext,record['__id__'])">
				<a tal:attributes="href python:childNode.getHref2IndexHtml(request,deep=False); class python:childNode.meta_id;" tal:content="python:childNode.getTitle(request)">
					the title
				</a>
			</h3><!-- .card-header -->
		</div><!-- .card -->
	</div>

</tal:block>

<!-- /effective_standard_html(default) -->]]>
                  </item>
                  <item key="id">effective_standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Standard Html]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="application/javascript" filename="script.zmi.js" type="file"><![CDATA[function addZMSCustom(sort_id,custom) {
	var title = '<i class="fas fa-plus"></i> '+getZMILangStr('BTN_INSERT');
	var target = 'manage_addProduct/zms/manage_addzmscustomform';
	var data = {lang:getZMILang(),preview:'preview',id_prefix:'records','_sort_id:int':sort_id,custom:custom};
	// Show add-dialog.
	$ZMI.iframe(target,data,{
			id:'zmiIframeAddDialog',
			title:title,
			width:800,
			open:function(event,ui) {
				$ZMI.runReady();
				$('#addInsertBtn').click(function() {
							self.btnClicked = $(this).text();
							var $fm = $(".modal form.form-horizontal");
							$("input[name=btn]:hidden",$fm).remove();
							$fm.append('<input type="hidden" name="btn" value="BTN_INSERT">');
							$fm.submit();
						});
				$('#addCancelBtn').click(function() {
							zmiModal("hide");
						});
				if($('#zmiIframeAddDialog .form-control').length==0) {
					$('#addInsertBtn').click();
				}
			},
			close:function(event,ui) {
				$('#manage_addProduct').remove();
			},
			buttons:[
					{id:'addInsertBtn', text:getZMILangStr('BTN_INSERT'), name:'btn', 'class':'btn btn-primary'},
					{id:'addCancelBtn', text:getZMILangStr('BTN_CANCEL'), name:'btn', 'class':'btn btn-secondary'}
			]
		});
	return false;
}

function _zmiObjectSetExec(sender, target) {
	var $btnGroup = $(sender).parents(".btn-group");
	$("input[name='qindices:list']",$btnGroup).prop("checked","checked");
	var i = $("input[name='qindices:list']:checkbox:checked").length;
    var b = true;
	if (target.indexOf("manage_cutObjects") >= 0) {
		var msg = getZMILangStr('MSG_CONFIRM_CUTOBJS') + $ZMI.getDescendantLanguages();
		msg = msg.replace("%i",""+i);
		b = i > 0 && confirm(msg);
	}
	else if (target.indexOf("manage_deleteObjs") >= 0) {
		var msg = getZMILangStr('MSG_CONFIRM_TRASHOBJS');
		msg = msg.replace("%i",""+i);
		msg += $ZMI.getDescendantLanguages();
		b = i > 0 && confirm(msg);
	}
    if (b) {
		var html = '';
		html += '<form class="d-none" id="zmiObjectSetExecForm" method="post" action="'+target+'">';
		html += '<input type="hidden" name="lang" value="'+getZMILang()+'"/>';
		$("input[name='qindices:list']:checkbox:checked").each(function() {
				html += '<input type="hidden" name="ids:list" value="'+$(this).val()+'"/>';
			});
		html += '</form>';
		$("body").append(html);
		$("#zmiObjectSetExecForm").submit();
	}
	else {
		$("input[name='qindices:list']",$btnGroup).prop("checked","");
	}
	return false;
}

function zmiObjectSetDelete(sender) {
	return _zmiObjectSetExec(sender,'manage_deleteObjs');
}

function zmiObjectSetCut(sender) {
	return _zmiObjectSetExec(sender,'manage_cutObjects');
}

function zmiObjectSetCopy(sender) {
	return _zmiObjectSetExec(sender,'manage_copyObjects');
}

function zmiObjectSetPaste(sender) {
	return _zmiObjectSetExec(sender,'manage_pasteObjs');
}

$(function() {

	// always collapse last-modified-accordion
	$(".attr_last_modified a.card-toggle").each(function(){
			var data_root = $("body").attr('data-root');
			var id = $(this).attr('href').substr(1);
			var key = "ZMS."+data_root+".collapse-"+id;
			console.log("$ZMILocalStorageAPI.set("+key+",0)");
			$ZMILocalStorageAPI.set(key,'0');
		});

	$("#tabProperties").hide();
	$(".zmi-change-uid").after(' <a href="javascript:;" title="Change Objectset Configuration" onclick="$(\'#tabProperties\').toggle();"><i class="fas fa-cog"></i></a>');

	// Relocate buttons.
	var e = $(".controls.save:gt(0)").detach();
	e.insertAfter(".form-group.coverage");

	$(".ZMSRecordSet form.form-horizontal,.ZMSRecordSet.main_grid > form").each(function() {
			var prefix = $("meta[name=physical_path]").attr("content").split("/");
			prefix = prefix[prefix.length-1]+".ZMSRecordSet.";
			console.log(prefix);
			var $fm = $(this);
			localStorage[prefix+"btn"] = getZMILangStr('BTN_REFRESH');
			if (zmiParams['btn']==getZMILangStr('BTN_REFRESH')) {
				for (var i in zmiParams) {
					localStorage[prefix+i] = zmiParams[i];
				}
				$("input:text,input:checkbox,input:radio,select,textarea",$fm).each(function() {
						var $input = $(this);
						var n = $input.attr("name");
						var v = $input.val();
						if ($input.attr("type")=="radio") {
							v = $("input[name='"+n+"']:radio:checked").val();
						}
						if ($input.attr("type")=="checkbox") {
							v = $input.prop("checked")?v:null;
						}
						if ($input[0].nodeName.toUpperCase()=="SELECT") {
							v = $("option:selected",$input).val();
						}
						localStorage[prefix+n] = v;
					});
			}
			else if (typeof zmiParams['btn']!='undefined') {
				for (var i in localStorage) {
					if (i.indexOf(prefix)==0) {
						localStorage.removeItem(i);
					}
				}
			}

			var params = {lang:zmiParams['lang'],AUTHENTICATED_USER:$(".authenticated_user").text()};
			for (var i in localStorage) {
				if (i.indexOf(prefix)==0) {
					console.log("i="+i);
					params[i.substr(prefix.length)] = localStorage[i];
				}
			}
			// Force to ZMI language
			params['lang'] = zmiParams['lang'];

			$.get("publicRecordSetGrid",params,function(data) {
					// Assemble grid.
					var $grid = $("#metaobj_recordset_main_grid");
					$grid.html(data);

					// Assemble info.
					$(".zmi-info",$grid).each(function() {
							if (!$(this).hasClass("active")) {
								$(this).parents("tr").addClass("inactive");
							}
					});

					// Assemble update.
					$(".dropdown-menu a[onclick='[[UPDATE]]']",$grid).each(function() {
							var $btnGroup = $(this).parents(".btn-group");
							var id = $("input[name='qindices:list']",$btnGroup).val();
							var href = id + '/manage_main?lang=' + getZMILang();
							$(this).attr({href:href,onclick:''});
					});

					// Assemble insert.
					var insertHtml = ''
					insertHtml += '<li class="dropdown-header insert-action"><i class="icon-caret-down fas fa-caret-down"></i> '+getZMILangStr('BTN_INSERT')+'</li>';
					$("select[name='record_meta_ids:list'] option:selected").each(function() {
							var $option = $(this);
							insertHtml += '<a class="dropdown-item" href="javascript:;" onclick="addZMSCustom(0,\''+$option.text().trim()+'\')">'+$option.html().replace(/<!--/gi,'<').replace(/-->/gi,'>')+'</a>';
					});
					insertHtml += '<li class="dropdown-header insert-action"><i class="icon-caret-down fas fa-caret-down"></i> '+getZMILangStr('ATTR_ACTION')+'</li>';
					$(".dropdown-menu .fa-plus",$grid).each(function() {
							$(this).parents(".dropdown-item").replaceWith(insertHtml);
					});

					$(".ZMSRecordSet.main_grid table.zmi-sortable th a").on("click",function() {
							$(".ZMSRecordSet.main_grid form").css({'transition':'opacity 1.5s','opacity':'0.25'});
							$(".ZMSRecordSet.main_grid").prepend( "<div id='loading' class='zmi-page text-center' style='width:100%;position:absolute;margin-bottom:0.75em'><i class='text-primary icon-spinner icon-3x icon-spin fas fa-spinner fa-spin fa-3x'></i></div>");
					})

				});
		});
});]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">script.zmi.js</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Script ZMI (JS)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.attr_dc_identifier_doi"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: DC.Identifier: DOI (Declarative ID)
##
# --// attr_dc_identifier_doi //--

return zmscontext.getId() 

# --// /attr_dc_identifier_doi //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_dc_identifier_doi</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[DC.Identifier: DOI (Declarative ID)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
<tal:block tal:define="standard modules/Products.zms/standard;
	zmscontext options/zmscontext;
	attr_ids python:zmscontext.attr('record_attrs');">

<code title="HTML-Consistency: Pre-Closing 1" tal:replace="structure string:</div>"></code>
		<div class="card-body">
			<div class="form-row">
				<div class="controls save">
					<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:zmscontext.getZMILangStr('BTN_SAVE')" tal:content="python:zmscontext.getZMILangStr('BTN_SAVE')">Action</button>
					<button type="submit" name="btn" class="btn btn-secondary" tal:attributes="value python:zmscontext.getZMILangStr('BTN_CANCEL')" tal:content="python:zmscontext.getZMILangStr('BTN_CANCEL')">Cancel</button>
				</div>
			</div><!-- .form-row -->
		</div><!-- .card-body -->
<code title="HTML-Consistency: Pre-Closing 2" tal:replace="structure string:</div></div></div></form>"></code>

<script type="text/javascript" tal:attributes="src python:'%s/%s.script.zmi.js'%(zmscontext.getMetaobjManager().absolute_url(),zmscontext.meta_id)"></script>
<style>
.card.zmi-container {
	display:none;
}
tr.inactive > td.data > * {
	color:#AAA;
}
</style>

		<tal:block tal:define="global
				record_duplicate python:zmscontext.attr('record_duplicate');
				metaObjAttrs python:[{'id':'objectset','name':'','type':'html'}]
						+attr_ids
						+[{'id':'change_uid','name':zmscontext.getZMILangStr('BY'),'type':'string'}]
						+[{'id':'change_dt','name':zmscontext.getZMILangStr('ON'),'type':'datetime'}];
				metaObjAttrIds python:['__id__']+[x['id'] for x in metaObjAttrs];
				dummy0 python:zmscontext.attr('recordSet_Prepare')">

<tal:block tal:condition="record_duplicate">
	<tal:block tal:define="dummy0 python:request.RESPONSE.redirect('%s/manage_main?manage_tabs_message=%s'%(record_duplicate[0].absolute_url(),record_duplicate[1]))"></tal:block>
</tal:block>

<tal:block tal:repeat="record_meta_id python:zmscontext.attr('record_meta_ids')">
	<tal:block tal:condition="python:'objectset_interface' in zmscontext.getMetaobjAttrIds(record_meta_id)">
		<tal:block tal:content="structure python:zmscontext.evalMetaobjAttr('%s.objectset_interface'%record_meta_id)"></tal:block>
	</tal:block>
</tal:block>

<div class="ZMSRecordSet">
<form method="get" class="form-horizontal">
	<input type="hidden" name="lang" tal:attributes="value request/lang">
	<input type="hidden" name="preview" tal:attributes="value request/preview">
	<input tal:condition="python:'qorder' in request" type="hidden" name="qorder" tal:attributes="value request/qorder">
	<input tal:condition="python:'qorderdir' in request" type="hidden" name="qorderdir" tal:attributes="value request/qorderdir">
	<div class="card" tal:define="filter_columns attr_ids">
		<div class="card-header filters btn-collapse">
			<a class="btn card-toggle pull-left" data-toggle="collapse" href="#attrProperties">
				<i class="icon-caret-down fas fa-caret-down"></i>
				<tal:block tal:content="structure python:zmscontext.getZMILangStr('ATTR_FILTER')">the label</tal:block>
			</a>
		</div><!-- .card-header -->
		<div id="attrProperties" class="filters collapse show">
			<div class="card-body">
				<tal:block tal:repeat="filterIndex python:range(request.get('qfilters',1)+1)">
					<div tal:attributes="class python:' '.join(['form-row']+[[],['d-none']][int(filterIndex==request.get('qfilters',1))])">
						<div class="form-group col-md-4">
							<select class="form-control form-control-sm" tal:attributes="name python:'filterattr%i'%filterIndex">
								<option value="" tal:content="python:zmscontext.getZMILangStr('CAPTION_SELECT')">the option</option>
								<tal:block tal:repeat="filter_column filter_columns">
									<option tal:attributes="value python:filter_column['id']; selected python:['','selected'][int(standard.get_session_value(zmscontext,'filterattr%i_%s'%(filterIndex,zmscontext.id))==filter_column['id'])]" tal:content="filter_column/name">label</option>
								</tal:block>
							</select>
						</div>
						<div class="form-group col-md-2">
							<select class="form-control form-control-sm" tal:attributes="name python:'filterop%i'%filterIndex">
								<tal:block tal:repeat="op python:['LIKE','=','<','<=','>','>=','NULL','NOT NULL']">
									<option tal:attributes="value python:op; selected python:['','selected'][str(op).lower()==str(request.get('filterop%i'%filterIndex, standard.get_session_value(zmscontext,'filterop%i_%s'%(filterIndex,zmscontext.id),''))).lower()]" tal:content="python:op">op</option>
								</tal:block>
							</select>
						</div>
						<div class="form-group col-md-6">
							<input class="form-control form-control-sm" type="text" tal:attributes="name python:'filtervalue%i'%filterIndex; value python:request.get('filtervalue%i'%filterIndex, standard.get_session_value(zmscontext,'filtervalue%i_%s'%(filterIndex,zmscontext.id),''))" />
						</div>
					</div><!-- .form-row -->
				</tal:block>
				<div class="form-row">
					<button type="submit" id="btn-search" class="btn btn-primary" name="btn" tal:attributes="value python:zmscontext.getZMILangStr('BTN_REFRESH')">
						<i class="fas fa-search"></i>
						<tal:block tal:content="python:zmscontext.getZMILangStr('BTN_SEARCH')">Search</tal:block>
					</button>
					<button type="submit" id="btn-reset" class="btn btn-secondary" name="btn" tal:attributes="value python:zmscontext.getZMILangStr('BTN_RESET')">
						<tal:block tal:content="python:zmscontext.getZMILangStr('BTN_RESET')">Reset</tal:block>
					</button>
				</div><!-- .form-row -->
			</div><!-- .card-body -->
		</div><!-- .collapse -->
	</div><!-- .card -->
</form>
</div><!-- .ZMSRecordSet -->

<div id="metaobj_recordset_main_grid"><div class="container text-center p-3"><i class="fas fa-spinner fa-spin fa-3x text-primary"></i></div></div>

</tal:block>

<tal:block 
    tal:replace="structure string:<form><div><div><div><div>">
    <!-- Set of ZMI/HTML closing tags-->
</tal:block>

<tal:block tal:define="dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['records'])"></tal:block>
</tal:block>
</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">records</item>
                  <item key="keys" type="list">
                    <list>
                      <item>type(ZMSObject)</item>
                      <item>type(ZMSDocument)</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Records</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">*</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.publicRecordSetGrid"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Grid record-set.
##
# --// publicRecordSetGrid //--

request = container.REQUEST
RESPONSE =  request.RESPONSE
zmscontext.zmi_page_request(zmscontext,request)
url = request['HTTP_REFERER']+'?'
url = url[:url.find('?')]
request.set('URL',url)

attr_ids = zmscontext.attr('record_attrs')
metaObjAttrs =[{'id':'objectset','name':'','type':'html'}] \
		+attr_ids \
		+[{'id':'change_uid','name':zmscontext.getZMILangStr('BY'),'type':'string'}] \
		+[{'id':'change_dt','name':zmscontext.getZMILangStr('ON'),'type':'datetime'}]
metaObjAttrIds = ['__id__']+[x['id'] for x in metaObjAttrs]
zmscontext.attr('recordSet_Prepare')
# hook: objectset-filter
for record_meta_id in zmscontext.attr('record_meta_ids'):
	if 'objectset_interface' in zmscontext.getMetaobjAttrIds(record_meta_id):
		zmscontext.evalMetaobjAttr('%s.objectset_filter'%record_meta_id)

return zmscontext.metaobj_recordset_main_grid( \
		metaObjAttrIds=metaObjAttrIds, \
		metaObjAttrs=metaObjAttrs, \
		record_handler=zmscontext.attr('record_handler'), \
		records=request['res'], \
		filtered_records=request['res'], \
		actions=['insert','update','delete','cut','copy','paste'], \
		insert='[[INSERT]]', \
		update='[[UPDATE]]', \
		delete='zmiObjectSetDelete(this)', \
		cut='zmiObjectSetCut(this)', \
		copy='zmiObjectSetCopy(this)', \
		paste='zmiObjectSetPaste(this)', \
		)

# --// /publicRecordSetGrid //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">publicRecordSetGrid</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Grid record-set.]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.sortChildNodes"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Sort record-set.
##
# --// sortChildNodes //--

from Products.zms import standard

request = container.REQUEST
records = options.get('records')
prepare = options.get('prepare',True)

qorder = request.get('qorder','')
qorderdir = request.get('qorderdir','')
if not qorder:
  qorderdefault = zmscontext.attr('record_order_default')
  if qorderdefault.find(':')>=0:
    qorder = qorderdefault[:qorderdefault.find(':')]
    qorderdir = qorderdefault[qorderdefault.find(':')+1:]
  qorder = standard.get_session_value(zmscontext,'qorder%s'%zmscontext.id,qorder)
  qorderdir = standard.get_session_value(zmscontext,'qorderdir%s'%zmscontext.id,qorderdir)
if records and qorder and qorderdir:
  if prepare:
    records = [{qorder:x.attr(qorder),'ob':x} for x in records]
  [standard.operator_setitem(x,qorder,'None') for x in records if x.get(qorder) is None]
  records = standard.sort_list(records,qorder,qorderdir)
  if prepare:
    records = [x['ob'] for x in records]
  request.set('qorder',qorder)
  request.set('qorderdir',qorderdir)

return records

# --// /sortChildNodes //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">sortChildNodes</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Sort record-set]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.recordSet_Prepare"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Prepare record-set.
##
# --// recordSet_Prepare //--

from Products.zms import standard

request = zmscontext.REQUEST
lang = request['lang']
session = request.SESSION

records = []
attr_ids = [x['id'] for x in zmscontext.attr('record_attrs')]+['change_uid','change_dt']
buff = {}
for childNode in zmscontext.getChildNodes(request):
  meta_id = childNode.meta_id
  if not meta_id in buff:
    buff[meta_id] = {}
    for attr_id in attr_ids:
      objAttr = childNode.getObjAttr(attr_id)
      buff[meta_id][objAttr['id']] = {'id':objAttr['id'],'attr_name':childNode.getObjAttrName(objAttr,lang)}
  obj_version = childNode.getObjVersion(request)
  record = {'__id__':childNode.id}
  objAttrs = buff[meta_id]
  for objAttr in objAttrs.values():
    record[objAttr['id']] = getattr(obj_version,objAttr['attr_name'],None)  
  records.append(record)
res = records
request.set('res',res)

# Filter
for filterIndex in range(10):
  for filterStereotype in ['attr','op','value']:
    requestkey = 'filter%s%i'%(filterStereotype,filterIndex)
    sessionkey = '%s_%s'%(requestkey,zmscontext.id)
    requestvalue = request.form.get(requestkey,standard.get_session_value(zmscontext,sessionkey,''))
    if request.get('btn','')==zmscontext.getZMILangStr('BTN_RESET'):
      requestvalue = ''
    request.set(requestkey,requestvalue)
    standard.set_session_value(zmscontext,sessionkey,requestvalue)
standard.set_session_value(zmscontext,'qfilters_%s'%zmscontext.id,request.form.get('qfilters',standard.get_session_value(zmscontext,'qfilters_%s'%zmscontext.id,1)))
for filterIndex in range(10):
  suffix = '%i_%s'%(filterIndex,zmscontext.id)
  sessionattr = standard.get_session_value(zmscontext,'filterattr%s'%suffix,'')
  sessionop = standard.get_session_value(zmscontext,'filterop%s'%suffix,'%')
  sessionvalue = standard.get_session_value(zmscontext,'filtervalue%s'%suffix,'')
  if sessionattr and sessionvalue:
    res = standard.filter_list(res,sessionattr,sessionvalue,sessionop)

# Order
res = zmscontext.evalMetaobjAttr('sortChildNodes',records=res,prepare=False)

request.set('res',res)
return res

# --// /recordSet_Prepare //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">recordSet_Prepare</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Prepare record-set]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.record_attrs"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Record-Attrs
##
# --// record_attrs //--

attrs = []
for x in zmscontext.attr('record_attr_ids').split(','):
  id = x
  type = 'string'
  if x.find(':') > 0:
    id = x[:x.find(':')]
    type = x[x.find(':')+1:]
  name = id.capitalize()
  if id.find('[') < id.find(']'):
    name = id[id.find('[')+1:-1]
    id = id[:id.find('[')]
  attrs.append({'id':id,'name':name,'type':type})
return attrs

# --// /record_attrs //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">record_attrs</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Record-Attrs</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.record_handler"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Record-Handler
##
# --// record_handler //--

request = zmscontext.REQUEST
class EntityRecordHandler():
  def handle_record(self, r):
    id = r['__id__']
    childNode = getattr(zmscontext,id)
    objectset = childNode.attr('objectset')
    if not objectset:
      objectset = '<span class=\042label label-default zmi-info %s\042><a href=\042%s/manage_main?lang=%s\042>%s %s</a></span>'%(['','active'][int(childNode.isActive(request))],childNode.absolute_url(),request['lang'],childNode.display_icon(request),childNode.display_type(request))
    r['objectset'] = objectset
    return r
record_handler = EntityRecordHandler()
return record_handler

# --// /record_handler //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">record_handler</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Record-Handler</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSObjectSet.record_duplicate"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Record-Duplicate
##
# --// record_duplicate //--

request = zmscontext.REQUEST
if request.get('action') == 'record_duplicate':
  before = zmscontext.objectIds()
  ids = [request.get('id')]
  cp = zmscontext.manage_copyObjects(ids)
  zmscontext.manage_pasteObjects(cb_copy_data=cp)
  after = zmscontext.objectIds()
  id = [x for x in after if x not in before][0]
  new_id = zmscontext.getNewId('records')
  zmscontext.manage_renameObject(id=id,new_id=new_id)
  new_ob = [x for x in zmscontext.objectValues() if x.id == new_id][0]
  new_ob.setObjStateNew(request)
  new_ob.setObjProperty('attr_active_start',None,request['lang'])
  new_ob.setObjProperty('attr_active_end',None,request['lang'])
  for attr_id in new_ob.getObjAttrs():
    if attr_id.find('title')>=0:
      new_ob.setObjProperty(attr_id,'Copy of %s'%new_ob.attr(attr_id),request['lang'])
      break
  new_ob.onChangeObj(request)
  return (new_ob,zmscontext.getZMILangStr('MSG_PASTED'))
return None

# --// /record_duplicate //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">record_duplicate</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Record-Duplicate</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSObjectSet.standard_html -->

<tal:block tal:define="zmscontext options/zmscontext">
	<tal:block tal:content="structure python:zmscontext.attr('effective_standard_html')"></tal:block>
</tal:block>

<!-- /ZMSObjectSet.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSObjectSet]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">ZMSObjectSet</item>
          <item key="name">ZMSObjectSet</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">4.1.2</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSRichtext</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-file-word]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:define="
		standard modules/Products.zms/standard;
		zmscontext options/zmscontext;
		dummy0 python:request.set('CKEDITOR_config_toolbar',[
				['Format'],
				['Bold','Italic','Underline','NumberedList','BulletedList'],
				['Undo','Redo'],
				['mediabutton'],
				['Find','linkbutton','Link','Unlink'],
				['Anchor','Table'],
				['Source','ShowBlocks','Maximize','About']
			])">

<style>
span.active {
	background-color:#FFF;
	font-weight:bold;
}
span.mouseover {
	border:1px solid #999;
	background-color:#DFF1FF;
}
</style>

<!--
////////////////////////////////////////////////////////////////////////////////
/// CKEDITOR Plugin
////////////////////////////////////////////////////////////////////////////////
-->

<tal:block tal:content="structure python:'<script>'">script</tal:block>

$(function(){
	$(".zmiRichtextEditorHeadline").hide();
});

<tal:block tal:content="structure python:'</script>'">/script</tal:block>

</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">text</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Text</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">richtext</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSRichtext.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None
##title=py: Event: onChange-Object
##
# --// BO onChangeObjEvt //--

temp_folder = context.temp_folder
request = context.REQUEST

# Find images/files.
text = zmscontext.attr('text')
l = []
lt = []
for sp in ['src="', 'href="' ]:
  for s in text.split(sp):
    ref = s[:s.find('"')]
    if ref.find('/'+zmscontext.id+'/') >= 0:
      idmedia = ref.split('/')[-1]
      l.append(idmedia)
    elif ref.find('/'+temp_folder.id+'/') >= 0:
      lt.append(ref)

# Remove unused images/files.
ob_ids = zmscontext.objectIds(['File','Image'])
for ref in l:
  id = ref.split('/')[-1]
  if id in ob_ids:
    ob_ids.remove(id)
if len(ob_ids) > 0:
  zmscontext.manage_delObjects(ids=ob_ids)

# Add new images/files from temp_folder.
for ref in lt:
  id = ref.split('/')[-1]
  ob = getattr(temp_folder,id,None)
  if ob is not None:
    new_id = ob.title_or_id()
    new_title = ''
    new_data = ob.data
    if ob.meta_type == 'Image':
      zmscontext.manage_addImage( id=new_id, title=new_title, file=new_data)
    else:
      zmscontext.manage_addFile( id=new_id, title=new_title, file=new_data)
    temp_folder.manage_delObjects(ids=[id])
    text = text.replace('"'+ref+'"','"./'+zmscontext.id+'/'+new_id+'"')
zmscontext.attr('text',text)

# --// EO onChangeObjEvt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">onChangeObjEvt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChange-Object]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSRichtext.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		text          python:zmscontext.getText(request);
		format        python:zmscontext.attr('format');
		renderedText  python:zmscontext.renderText(format,'text',text,request,zmscontext.id)"
		tal:content="structure renderedText">
	The text
</tal:block>

<!-- /ZMSRichtext.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSRichtext]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">ZMSRichtext</item>
          <item key="name">ZMSRichtext</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.0.0</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSSqlDb</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-database]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSSqlDb.renderShort -->

<tal:block tal:define="global 
		zmscontext options/zmscontext">
	<h4>
		<i class="icon-table"></i>
		<tal:block tal:content="python:zmscontext.connection_id">the connection-id</tal:block>
	</h4>
	<ul>
		<li tal:repeat="table python:[x for x in zmscontext.getEntities() if x['type']=='table']">
			<a tal:attributes="href python:'%s/manage_main?qentity=%s'%(zmscontext.id,table['id'])" tal:content="table/id">the table</a>
		</li>
	</ul>
	<br/>
</tal:block>

<!-- /ZMSSqlDb.renderShort -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">renderShort</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[ZMI: Render short]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">ZMSSqlDb</item>
          <item key="name">ZMSSqlDb</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.0.0</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSSysFolder</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-folder]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">titlealt</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">0</item>
                  <item key="default"></item>
                  <item key="id">attr_cacheable</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Cacheable</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">TAB_METADATA</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">TAB_METADATA</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">delimiter</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
<tal:block tal:define="global
		standard modules/Products.zms/standard;
		zmscontext options/zmscontext;
		SecurityManager modules/AccessControl/getSecurityManager;
		skey python:request.get('skey', 'id');
		rkey python:request.get('rkey', '')">

<!--
################################################################################
##### Action-List
################################################################################
-->
<div class="pull-right" style="margin:1.5em 0 0.5em">
	<select class="form-control" style="background-color: aliceblue;"
			name=":action" tal:attributes="onchange python:'this.name=\':action\';;location.href=\'%s/\'+this.options[this.selectedIndex].value'%request['URL1']">
		<option value="manage_workspace" tal:content="python:'----- %s -----'%zmscontext.getZMILangStr('ACTION_INSERT')%zmscontext.display_type(request)">----- Insert -----</option>
		<tal:block tal:repeat="meta_type python:[x for x in standard.sort_list(zmscontext.filtered_meta_types(),'name') if x['name'].find('ZMS')<>0]">
			<option tal:attributes="value python:meta_type['action']" tal:content="python:meta_type['name']">the name</option>
		</tal:block>
	</select>
</div>

<!--
################################################################################
##### Object-List
################################################################################
-->

<tal:block tal:define="global items python:[x for x in zmscontext.objectItems() if x[1].meta_type.find('ZMS')<>0]">
<tal:block tal:condition="python:len(items)>0">
<table class="table table-striped">
<thead>
<tr>
	<th>&nbsp;</th>
	<tal:block define="global
			columns python:['meta_type','id','get_size','bobobase_modification_time'];
			labels python:{'meta_type':'type','id':'name','get_size':'size','bobobase_modification_time':'last_modified'}">
		<tal:block tal:repeat="column columns">
			<th tal:define="global label python:zmscontext.getZMILangStr('ATTR_%s'%labels[column].upper())">
				<i tal:condition="python:skey==column or rkey==column" tal:attributes="class python:['icon-caret-down','icon-caret-up'][int(rkey==column)]"></i>
				<a tal:attributes="href python:zmscontext.url_append_params(request['URL'],{['skey','rkey'][int(skey==column)]:column}); title python:'Sort objects by %s'%label"><tal:block tal:content="label">the label</tal:block></a>
			</th>
		</tal:block>
	</tal:block>
</tr>
</thead>
<tbody>
<tr tal:repeat="item items">
	<td><input type="checkbox" name="ids:list" tal:attributes="value python:item[0]"/></td>
	<td>
		<tal:block tal:condition="python:item[1].icon">
			<img tal:attributes="src python:item[1].icon; title python:item[1].meta_type"/>
		</tal:block>
	</td>
	<td>
		<a tal:attributes="href python:'%s/manage_workspace'%item[1].absolute_url()">
			<tal:block tal:content="python:item[0]">the id</tal:block>
			<tal:block tal:condition="python:item[1].title">(<tal:block tal:content="python:item[1].title">the title</tal:block>)</tal:block>
		</a>
	</td>
	<td><tal:block tal:content="python:zmscontext.getDataSizeStr(item[1].get_size())">the size</tal:block></td>
	<td><tal:block tal:content="python:zmscontext.getLangFmtDate(item[1].bobobase_modification_time())">the timestamp</tal:block></td>
</tr>
</tbody>
</table>
<tal:block tal:condition="not:python:request.get('dontAllowCopyAndPaste')">
	<input class="btn" type="submit" name="manage_renameForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_RENAME')" tal:condition="items"/>
	<input class="btn" type="submit" name="manage_cutForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_CUT')" tal:condition="items"/>
	<input class="btn" type="submit" name="manage_copyForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_COPY')" tal:condition="items"/>
	<input class="btn" type="submit" name="manage_pasteForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_PASTE')" tal:condition="python:request.get('cb_dataValid')"/>
	<input class="btn" type="submit" name="manage_delObjects:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_DELETE')" tal:condition="python:SecurityManager.checkPermission('Delete objects',zmscontext)"/>
	<input class="btn" type="submit" name="manage_importExportForm:method" value="Import/Export" tal:condition="python:SecurityManager.checkPermission('Import/Export objects',zmscontext)"/>
</tal:block>
</tal:block>
</tal:block>

</tal:block>
</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item>ZMSAdministrator</item>
                  <item>ZMSAuthor</item>
                  <item>ZMSEditor</item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">ZMSSysFolder</item>
          <item key="name">ZMSSysFolder</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.0.2</item>
          <item key="type">ZMSDocument</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSTable</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">caption</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Caption</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default">0</item>
                  <item key="id">sortable</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Sortable</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">boolean</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default">0</item>
                  <item key="id">colgroup</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Colgroup</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">boolean</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.titlealt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: DC.Title.Alt
##
# --// BO titlealt //--

titlealt = zmscontext.attr('caption')
if titlealt:
    return titlealt
return zmscontext.display_type(zmscontext.REQUEST)

# --// EO titlealt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:define="textFormatDefault python:here.getConfProperty('ZMSTable.getTextFormatDefault',here.getTextFormatDefault())">
	<!-- ### Table(Type,Cols,Rows): INSERT ### -->
	<tal:block tal:condition="python:request.get('ZMS_INSERT')">
		<input type="hidden" name="redirect_self:int" value="1"/>
		<span class="d-none" id="fmName" tal:content="request/fmName"></span>
		<span class="d-none" id="textFormatDefault" tal:content="textFormatDefault"></span>
		<script>
		var fmName;
		var textFormatDefault;

		$(function() {
				fmName = $('#fmName').text();
				textFormatDefault = $("#textFormatDefault").text();
				$("form[name="+fmName+"]").submit( onZMSTableFormSubmit);

				$("[name=\x22type:int\x22]").on('change',function(){
					let sortableTr = $('#tr_sortable');
					if(this.value==3){
						sortableTr.hide();
					}else{
						sortableTr.show()
					}
				});
			});

		function onZMSTableFormSubmit() {
			var xml = '';
			var type = parseInt($("[name=\x22type:int\x22]").val());
			xml += '<'+'list>\n';
			for ( var y = 0; y < parseInt($('#rows').val()); y++) {
				xml += '<'+'item type="list"><list>\n';
				if ( y==0 && type == 2) {
					xml += '<'+'item type="dictionary"><'+'dictionary>\n';
					xml += '<'+'item key="colspan" type="int">'+parseInt($('#cols').val())+'<'+'/item>\n';
					xml += '<'+'item key="content"><'+'/item>\n';
					xml += '<'+'item key="format">'+textFormatDefault+'<'+'/item>\n';
					xml += '<'+'item key="tag">th<'+'/item>\n';
					xml += '<'+'/dictionary><'+'/item>\n';
				}
				else {
					for ( var x = 0; x < parseInt($('#cols').val()); x++) {
						xml += '<'+'item type="dictionary"><'+'dictionary>\n';
						if ( y==0 && x == 0 && type == 4) {
							xml += '<'+'item key="colspan" type="int">1<'+'/item>\n';
						}
						else {
							var tag = "td";
							if ( (type == 1 && y == 0) ||
								(type == 3 && x == 0) ||
								(type == 4 && (x == 0 || y == 0))) {
								tag = "th";
							}
							xml += '<'+'item key="colspan" type="int">1<'+'/item>\n';
							xml += '<'+'item key="content"><'+'/item>\n';
							xml += '<'+'item key="format">'+textFormatDefault+'<'+'/item>\n';
							xml += '<'+'item key="tag">'+tag+'<'+'/item>\n';
						}
						xml += '<'+'/dictionary><'+'/item>\n';
					}
				}
				xml += '<'+'/list><'+'/item>\n';
			}
			xml += '<'+'/list>\n';
			$("#table_table").val( xml);
			return true;
		}
		</script>

<div class="form-group row">
	<label class="col-sm-2 control-label mandatory"><span tal:content="structure python:here.getZMILangStr('ATTR_COLS')">Cols</span></label>
	<div class="col-sm-2">
		<tal:block tal:content="structure python:here.getTextInput(fmName=request['fmName'],elName='cols',value='3',size=2)"></tal:block>
	</div>
	<label class="col-sm-1 control-label mandatory"><span tal:content="structure python:here.getZMILangStr('ATTR_ROWS')">Rows</span></label>
	<div class="col-sm-2">
		<tal:block tal:content="structure python:here.getTextInput(fmName=request['fmName'],elName='rows',value='3',size=2)"></tal:block>
	</div>
</div>

<div class="form-group row">
	<label class="col-sm-2 control-label mandatory" tal:content="python:here.getZMILangStr('ATTR_TYPE')">the type-label</label>
	<div class="col-sm-10 form-group row">
		<div class="mr-2" title="Type 1">
			<input type="radio" name="type:int" value="1" checked="checked" /> <tal:block tal:content="python:here.getZMILangStr('HORIZONTAL')"></tal:block>
			<table class="ZMSTable table table-sm">
			<thead>
				<tr><th>Firstname</th><th>Lastname</th><th>Age</th></tr>
			</thead>
			<tbody>
				<tr><td>Jill</td><td>Smith</td><td>50</td></tr>
				<tr><td>John</td><td>Doe</td><td>38</td></tr>
			</tbody>
			</table>
		</div>
		<div class="mr-2" title="Type 3">
			<input type="radio" name="type:int" value="3" /> <tal:block tal:content="python:here.getZMILangStr('VERTICAL')"></tal:block>
			<table class="ZMSTable table table-sm">
			<tbody>
				<tr><th>Firstname</th><td>Jill</td><td>John</td></tr>
				<tr><th>Lastname</th><td>Smith</td><td>Doe</td></tr>
				<tr><th>Age</th><td>50</td><td>38</td></tr>
			</tbody>
			</table>
		</div>
	</div>
</div>

<div class="form-group col-sm-12 col-sm-push-2" style="font-size: small;color: #999;"
	tal:content="python:here.getZMILangStr('MSG_ZMSTABLE_TYPE')">Note: Type can not be changed later
</div>

	</tal:block>

	<!-- ### Table(Type,Cols,Rows): EDIT ### -->
	<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
		<tal:block tal:define="zmscontext options/zmscontext;
					table_table python:zmscontext.attr('table');
					table_type python:zmscontext.attr('type');
					table_colgroup_cols python:zmscontext.attr('cols');
					table_cols python:len(table_table[-1]);
					table_rows python:len(table_table);
					table_widths python:zmscontext.attr('widths');">

			<!--### Table-Cell Styles ###-->
			<style>
				.th.placeholder {
					background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='50px' width='200px'><text x='20' y='20' fill='gray' font-size='12' font-family='Arial'>Enter Header here...</text></svg>");
					background-repeat:no-repeat;
				}
				.td.placeholder {
					background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='50px' width='200px'><text x='20' y='20' fill='silver' font-size='12' font-family='Arial'>Enter Data here...</text></svg>");
					background-repeat:no-repeat;
				}
				td.ZMSTable-cell {
					padding: 0;
				}
				#table_cell_editor > thead > tr > th {
					background-color: #32475b;
					color: #fff;
				}
				#table_cell_editor > thead > tr > th,
				#table_cell_editor > thead > tr > td {
					padding: 1.57143em 1.14286em 1.57143em 1.14286em;

				}
				#table_cell_editor tr th p:last-child,
				#table_cell_editor tr td p:last-child {
					 margin-bottom: 0;
				}
				#table_cell_editor .table_cell_editable.current {
					background-color: rgba(0,123,255,.15);
					color: #212529;
				}
				table tr:nth-child(even) td {
					background-color: #e3e8ed;
				}
				#table_cell_editor > thead > tr:first-child td{
					background-color: #32475b;
					color: #fff;
				}
				.zmi-interface table th textarea.form-control{
					color:white;
				}
				<tal:block tal:condition="python:table_type == 3">
					#tr_sortable{
						display:none;
					}

					#table_cell_editor>tbody>tr:nth-child(odd) td {
						background-color: #e3e8ed;
					}
					#table_cell_editor>tbody>tr:nth-child(even) td {
						background-color: #FFFFFF;
					}

					#table_cell_editor>tbody>tr>td:first-child{
						background-color: #32475b;
					}
					#table_cell_editor tr#colgrouping td{
						background-color:#FFFFFF;
					}
				</tal:block>
			</style>

			<!--### Table-Cell Editor ###-->
			<tal:block tal:define="celltypes python:[['td','td'],['th','th']];custom python:'<div class=\042pull-left celltypes\042>%s</div>'%(here.zmi_input_select(name='tag',value='',lang_str=here.getZMILangStr('ATTR_FORMAT'),options=celltypes))">
				<div class="d-none ui-helper-overlay modal-backdrop in">&nbsp;</div>
				<div class="d-none">
					<div id="div_table_cell_editor">
						<tal:block tal:content="structure python:here.f_selectRichtext(ob=here,fmName=request['fmName'],elName='content_editor',cols=25,rows=10,value='',key='cell',enabled=True,lang=request['lang'],lang_str=here.getZMILangStr('ACTION_EDIT_CELL'),custom_str=custom,REQUEST=request,wrap='virtual',format='')"></tal:block>
						<div class="form-row">
							<div class="controls save">
								<button class="btn btn-primary" type="submit" value="BTN_CHANGE" onclick="return table_cell_change();" tal:content="python:here.getZMILangStr('BTN_CHANGE')"></button>
								<button class="btn btn-secondary" type="submit" value="BTN_CANCEL" onclick="return table_cell_cancel();" tal:content="python:here.getZMILangStr('BTN_CANCEL')"></button>
							</div>
						</div>
					</div>
				</div>
			</tal:block>

			<!-- ### Table-Cell Grid ###-->

			<span class="d-none" id="fmName" tal:content="request/fmName"></span>
			<span class="d-none" id="elName" tal:content="request/elName"></span>

			<span class="d-none" id="textFormatDefault" tal:content="textFormatDefault"></span>
			<tal:block tal:condition="python:request.get('richedit_fmt',None)"><span class="d-none" id="richedit_fmt" tal:content="python:request.get('richedit_fmt').getId()"></span></tal:block>
			<span class="d-none" id="table_type" tal:content="table_type"></span>
			<span class="d-none" id="table_cell_uid" tal:content="python:table_cols*table_rows"></span>
			<style>
				#table_cell_editor .btn {
					padding: 0 .3em;
				}
				.zmi.ZMSTable.properties .modal-backdrop.in {
					filter: alpha(opacity=30);
					opacity: .3;
				}
				.div_table_cell_editor_parent {
					position:absolute;
					background:#FEFEFE;
					z-index:9999;
					border-radius: 4px;
					box-shadow: 0 4px 16px #333;
				}
				#div_table_cell_editor {
					width:65em;
					margin:1em;
				}
				#table_cell_editor #colgrouping td {
					min-width:6em
				}
				.celltypes select {
					width:10em;
				}
				/* Compensate Preview Styles */
				#table_cell_editor table.ZMSTable {
					margin:0
				}
				#table_cell_editor table.ZMSTable td,
				#table_cell_editor table.ZMSTable th {
					border:0 !important;
					margin:0;
					padding:0;
				}
				#table_cell_editor table.ZMSTable th > div,
				#table_cell_editor table.ZMSTable td > div {
					padding:.5em;
				}
				#table_cell_editor table.ZMSTable [contenteditable]:focus {
					outline: 2px dotted #007bff;
					background-color:rgba(0, 123, 255, 0.05);
				}
				img.vbutton {
					border:1px solid #CCC;
					height:16px!important;
					width:8px!important;
					border-radius:3px;
				}
				img.hbutton {
					border:1px solid #CCC;
					height:8px!important;
					width:16px!important;
					border-radius:3px;
				}
				td .btn-group {
					width:80px;
				}
				.ZMSTable-cell {
					border:1px solid #CCC;
				}
				.ZMSTable-cell.top,
				.ZMSTable-cell.right,
				.ZMSTable-cell.bottom,
				.ZMSTable-cell.left {
					border-top:2px solid #666;
				}
				.table_cell_editable.changed {
					background-color:#FFF;
				}
				.table_cell_editable.active {
					background-color:#FFC;
				}
				.table_cell_editable.new {
					background-color:#DFD;
				}
				.table_cell_editable.moved {
					background-color:#FFF;
				}
				/* shift url select modal win to top */
				.modal {
					z-index:10000;
				}
			</style>

			<script>
				var fmName;
				var elName;
				var textFormatDefault;
				var richedit_fmt;
				var table_type;
				var table_cell_uid;
				var table_cell_id;
				var table_cell_offs;

				$(function() {
						fmName = $('#fmName').text();
						elName = $('#elName').text();
						textFormatDefault = $("#textFormatDefault").text();
						richedit_fmt = $('#richedit_fmt').text();
						table_type = parseInt($('#table_type').text());
						table_cell_uid = $('#table_cell_uid').text();
						table_cell_id = '';
						table_cell_offs = 2;
						$('form[name='+fmName+']').submit( onZMSTableFormSubmit);
						table_cell_init();
					});

				function onZMSTableFormSubmit() {
					var xml = '';
					xml += '<'+'list>\n';
					var el_tbody = $($("#table_cell_editor").children()[0]);
					var el_trs = el_tbody.children().filter(":gt(0)");
					for ( var i=0; i < el_trs.length; i++) {
						xml += '<'+'item type="list"><'+'list>\n';
						//changed by uzk
						var el_tds = $(el_trs[i]).children();
						//var el_tds = $(el_trs[i]).children().filter(":gt(0)").filter(":not(:last)");
						for ( var j=0; j < el_tds.length; j++) {
							xml += '<'+'item type="dictionary"><'+'dictionary>\n';
							xml += '<'+'item key="colspan" type="int">'+1+'<'+'/item>\n';
							var el_inputs = $("textarea,input",el_tds[j]);
							for ( var k=0; k < el_inputs.length; k++) {
								var key = el_inputs[k].id.substr(0,el_inputs[k].id.indexOf("_"));
								xml += '<'+'item key="'+key+'"><'+'![CDATA'+'['+$(el_inputs[k]).val()+']'+']><'+'/item>\n';
							}
							xml += '<'+'/dictionary><'+'/item>\n';
						}
						xml += '<'+'/list><'+'/item>\n';
					}
					xml += '<'+'/list>\n';
					$("#table_table").val( xml);

					xml = '';
					xml += '<'+'list>\n';
					var el_trs = el_tbody.children().filter(":eq(0)");
					for ( var i=0; i < el_trs.length; i++) {
						var el_inputs = $("input:text",el_trs[i]);
						for ( var j = 0; j < el_inputs.length; j++) {
							xml += '<'+'item type="string">'+$(el_inputs[j]).val()
							+'<'+'/item>\n';
						}
					}
					xml += '<'+'/list>\n';

					$("#table_colgroup_cols").val( xml);
					return true;
				}


				function table_cell_edit(el_td) {
					var el = $('textarea',el_td);
					var el_name = el.attr('id');
					table_cell_id = el_name.substr(el_name.indexOf('_')+1);
					// Set cell background.
					el_td.addClass("active");
					// Apply values.
					$('#zmiRichtextEditor'+elName).hide();
					$('#zmiStandardEditor'+elName).show();
					$('#content_editor').val($('#content_'+ table_cell_id).val());
					$('select[name="tag"]').val($('#tag_'+ table_cell_id).val());
					$('#format').val($('#format_'+ table_cell_id).val());
					if (typeof richedit_fmt != 'undefined') {
						zmiRichtextSyncDataToView(elName);
						if ( $('#format').val()==richedit_fmt) {
							$('#zmiRichtextEditor'+'content_editor').show();
							$('#zmiStandardEditor'+'content_editor').hide();
							zmiStandardOnSubmitEventHandler();
						}
					}
					// Open cell editor.
					var offset = $(el_td).offset();
					$('.ui-helper-overlay').removeClass('d-none');
					//$('#div_table_cell_editor').parent().addClass('div_table_cell_editor_parent').css({left:offset.left,top:offset.top}).removeClass('d-none');
					let cell_editor = $('#div_table_cell_editor');
					let left = cell_editor.width() < window.innerWidth ? (window.innerWidth - cell_editor.width())/2  : 0;
					let top =  window.innerHeight > 400 ? (window.innerHeight - 400)/2 : 0;
					$('#div_table_cell_editor').parent().addClass('div_table_cell_editor_parent').css({left:left, top:top}).removeClass('d-none');
					$('#zmiRichtextEditor'+'content_editor').height(300);
					zmiRichtextResize('content_editor');
				}

				function table_cell_change() {
					if (typeof richedit_fmt != 'undefined') {
						if ( $('#format').val()==richedit_fmt) {
							zmiRichtextOnSubmitEventHandler();
							$('#input_'+ table_cell_id).hide();
							$('#preview_'+ table_cell_id).show();
						}
						else {
							$('#input_'+ table_cell_id).show();
							$('#preview_'+ table_cell_id).hide();
						}
					}
					$('#format_'+ table_cell_id).val($('#format').val());
					$('#tag_'+ table_cell_id).val($('select[name="tag"]').val());
					$('#content_'+ table_cell_id).val($('#content_editor').val());
					$('#preview_'+ table_cell_id).html($('#content_editor').val());
					return table_cell_cancel();
				}

				function table_cell_cancel(event) {
					// Reset cell background.
					var el_td = $("td.active");
					el_td.removeClass("active");
					// Close cell editor.
					if (!event) {
						/*
						$('#div_table_cell_editor').modal('hide');
						*/
						$('.ui-helper-overlay').addClass('d-none');
						$('#div_table_cell_editor').parent().addClass('d-none');
					}
					return false;
				}


				function table_cell_init() {
					$("form[name="+fmName+"] input[type=hidden]+textarea").change( function () { $(this).parents(".table_cell_editable").addClass('changed').removeClass('changed',1000);});
					$("form[name="+fmName+"] .table_cell_editable").dblclick( function () { table_cell_edit($(this));});
					$('div[id^=preview_]')
						.attr('contenteditable','').keyup(onKeyUpZMSTableDivContenteditable).blur(onKeyUpZMSTableDivContenteditable).on('contextmenu',function(){onKeyUpZMSTableDivContenteditable});
				}

				function actionBtnClick(el, fct) {
					var x = 0;
					var $td = $(el).closest("td");
					while ( $td.prev().length > 0) {
						x++;
						$td = $td.prev();
					}
					var y = 0;
					var $tr = $($td.parent("tr"));
					while ( $tr.prev().length > 0) {
						y++;
						$tr = $tr.prev();
					}
					var $tbody = $(el).closest("tbody");
					//////////////////////////////////////////////////////////////////////////////
					/// DELETE
					//////////////////////////////////////////////////////////////////////////////
					if (fct.indexOf('delete') == 0) {
						if (confirm(getZMILangStr('MSG_CONFIRM_DELOBJ'))) {
							if (fct.indexOf('delete_col') == 0) {
								var $trs = $tbody.children();
								for ( var i = 0; i < $trs.length; i++) {
									if ( i == table_cell_offs && table_type == 2) {
										var $td = $($trs[i]).children().filter(":eq("+table_cell_offs+")");
										$td.prop("colspan",parseInt($td.prop("colspan"))-1);
									}
									else {
										var $td = $($trs[i]).children().filter(":eq("+x+")");
										$td.remove();
									}
								}
								$('#cols').val( parseInt($('#cols').val())-1);
							}
							else if (fct.indexOf('delete_row') == 0) {
								var $tr = $tbody.children().filter(":eq("+y+")");
								$tr.remove();
								$('#rows').val( parseInt($('#rows').val())-1);
							}
						}
					}
					//////////////////////////////////////////////////////////////////////////////
					/// INSERT
					//////////////////////////////////////////////////////////////////////////////
					else if (fct.indexOf('insert_col') == 0) {
						var $trs = $tbody.children();
						for ( var i = 0; i < $trs.length; i++) {
							if ( i == table_cell_offs && table_type == 2) {
								var $td = $($trs[i]).children().filter(":eq("+table_cell_offs+")");
								$td.attr("colspan",parseInt($td.attr("colspan"))+1);
							}
							else {
								var $tds = $($trs[i]).children();
								var $td = $tds.filter(":eq("+x+")");
								var new_td = insertCell($tds[$tds.length-2]);
								if(fct.indexOf('insert_col_left') == 0){
									new_td.insertBefore( $td);
								}else{
									new_td.insertAfter( $td);
								}

							}
						}
						$('#cols').val( parseInt($('#cols').val())+1);
						table_cell_init();
					}
					else if (fct.indexOf('insert_row') == 0) {
						var $trs = $tbody.children();
						var $tr = $trs.filter(":eq("+y+")");
						var new_tr = insertCell($trs[$trs.length-2]);
						if(fct.indexOf('insert_row_above') == 0) {
							new_tr.insertBefore( $tr);
						}else{
							new_tr.insertAfter( $tr);
						}

						$('#rows').val( parseInt($('#rows').val())-1);
						table_cell_init();
					}
					//////////////////////////////////////////////////////////////////////////////
					/// MOVE
					//////////////////////////////////////////////////////////////////////////////
					else if (fct.indexOf('move_col') == 0) {
						var source_x = x;
						var target_x = x;
						if (fct == 'move_col_left') {
							target_x = target_x - 1;
						}
						else {
							target_x = target_x + 1;
						}
						var $trs = $tbody.children().filter(":gt(0)");
						for ( var i = 0; i < $trs.length; i++) {
							var source_td = $($trs[i]).children().filter(":eq("+source_x+")");
							var target_td = $($trs[i]).children().filter(":eq("+target_x+")");
							moveCell(source_td, target_td);
						}
					}
					else if (fct.indexOf('move_row') == 0) {
						var source_y = y;
						var target_y = y;
						if (fct == 'move_row_up') {
							target_y = target_y - 1;
						}
						else {
							target_y = target_y + 1;
						}
						var source_tr = $tbody.children().filter(":eq("+source_y+")");
						var target_tr = $tbody.children().filter(":eq("+target_y+")");
						moveCell(source_tr, target_tr);
					}
					else {
						var par = Math.max(x,y)-table_cell_offs;
						var fm = document.forms[fmName];
						fm.elements['function'].value = fct;
						fm.elements['param'].value = par;
						fm.submit();
					}
				}

				function insertCell(source) {
					var $clone = $(source).clone();
					$("table.ZMSTable th, table.ZMSTable td",$clone).each(function() {
							// Remove table with inline-links (if exists).
							$("table",this).remove();
							$("textarea,input",this).each(function() {
									var key = this.id.substr(0,this.id.indexOf("_"));
									$(this).attr( "id", key+"_" + table_cell_uid);
									$(this).attr( "name", key+"_" + table_cell_uid);
									if ( key.indexOf("format") == 0) {
										$(this).val( textFormatDefault);
									}
									else if ( key.indexOf("content") == 0) {
										$(this).val( "").css( 'border', '2px solid #00FF00');
									}
								});
							$('div[id^="preview"]',this).each(function() {
									$(this).attr("id","preview_"+table_cell_uid)
										.html('')
										.attr('contenteditable','')
										.keyup(onKeyUpZMSTableDivContenteditable).blur(onKeyUpZMSTableDivContenteditable);
								});
							$(this).addClass('new').removeClass('new',1000);
							table_cell_uid++;
						});
					return $clone;
				}

				function moveCell(source, target) {
					var source_inp = $("textarea,input",source);
					var target_inp = $("textarea,input",target);
					for ( var j = 0; j < source_inp.length; j++) {
						var v = $(source_inp[j]).val();
						$(source_inp[j]).val( $(target_inp[j]).val());
						$(target_inp[j]).val( v);
					}
					var source_preview = $("div[id^=preview]",source);
					var target_preview = $("div[id^=preview]",target);
					for ( var j = 0; j < source_preview.length; j++) {
						var v = $(source_preview[j]).html();
						$(source_preview[j]).html( $(target_preview[j]).html());
						$(target_preview[j]).html( v);
					}
					$("td.table_cell_editable",target).addClass("moved").removeClass("moved",1000);
				}

				function onKeyUpZMSTableDivContenteditable() {
					if ($(this).text().length==0) {
						$(this).addClass('placeholder');
					}
					else {
						$(this).removeClass('placeholder');
					}
					var $textarea = $("textarea",$(this).prev());
					$textarea.val($(this).html());
				}
			</script>

			<!-- BO Dropdown -->
			<div class="dropdown-menu dropdown-menu-sm" id="context-menu">
				<a class="dropdown-item move_col_left" href="#"><i class="fas fa-caret-left"></i>Spalte nach Link verschieben</a>
				<a class="dropdown-item move_col_right" href="#"><i class="fas fa-caret-right"></i>Spalte nach Rechts verschieben</a>
				<a class="dropdown-item delete_col" href="#"><i class="fas fa-trash"></i>Ganze Spalte l&ouml;schen</a>
				<a class="dropdown-item insert_col_left" href="#"><i class="far fa-plus-square"></i>Neue Spalte links einf&uuml;gen</a>
				<a class="dropdown-item insert_col_right" href="#"><i class="far fa-plus-square"></i>Neue Spalte rechts einf&uuml;gen</a>
				<div class="dropdown-divider"></div>
				<a class="dropdown-item move_row_up" href="#"><i class="fas fa-caret-up"></i>Zeile nach oben verschieben</a>
				<a class="dropdown-item move_row_down" href="#"><i class="fas fa-caret-down"></i>Zeile nach unten verschieben</a>

				<a class="dropdown-item delete_row" href="#"><i class="fas fa-trash"></i>Ganze Zeile l&ouml;schen</a>
				<a class="dropdown-item insert_row_above" href="#"><i class="far fa-plus-square"></i>Neue Zeile oberhalb einf&uuml;gen</a>
				<a class="dropdown-item insert_row_below" href="#"><i class="far fa-plus-square"></i>Neue Zeile unterhalb einf&uuml;gen</a>
			</div>
			<style>
				.dropdown-menu{ position:absolute; }
				.div_table_cell_editor_parent{ position:fixed; }
				.dropdown-item.disabled, .dropdown-item:disabled { cursor: no-drop;}
			</style>
			<script>
			// <!--
				$(function () {
					$('table.table *, table.table *').on('contextmenu', function (e) {
						$('table#table_cell_editor .table_cell_editable.current').removeClass('current');
						let contextMenu = $("#context-menu");
						var target = e.target;
						let card = contextMenu.closest('.card');
						var top = e.pageY - card.position().top;
						var left = e.pageX - card.position().left;

						var height =$("#context-menu").height();
						var bottom = top + height;
						var width = $("#context-menu").width();
						var right = left + width;

						var doc_bottom =  (window.pageYOffset + window.innerHeight);
						var doc_right = (window.pageXOffset + window.innerWidth);

						if(bottom > doc_bottom){
							top = top - height;
						}
						if( right > doc_right){
							left = left - width;
						}

						$("#context-menu").css({
							display: "block",
							top: top,
							left: left
						}).addClass("show");


						if($(target).hasClass('ZMSTable-cell')){
							target = $('.table_cell_editable', target).first();
						}

						let contextmenu = $('#context-menu');
						let selector = '.table_cell_edit';
						let btn = $(selector, contextmenu);
						let table_cell = $($(target).closest('.table_cell_editable'));
						table_cell.addClass('current');
						let actionlist = ['move_col_left', 'move_col_right', 'move_row_down', 'move_row_up', 'insert_row_above', 'insert_row_below', 'delete_row', 'insert_col_left', 'insert_col_right', 'delete_col'];
						for (let action of actionlist) {
							let selector = '.' + action;
							let btn = $('.' + action, contextmenu);
							let actionAvailable = true;

							if(action == 'move_row_up' && (table_cell.closest('tr#table_row_0').length > 0 || (table_type == 1 && table_cell.closest('tr#table_row_1').length > 0)) ){
								actionAvailable = false;
							}else if(action == 'move_col_left' && (table_cell.closest('.ZMSTable-cell').prev().length == 0 || table_type == 3 && table_cell.closest('.ZMSTable-cell').prevAll('.ZMSTable-cell').length == 1)){
								actionAvailable = false;
							}else if(action == 'move_col_right' && table_cell.closest('.ZMSTable-cell').next().length == 0){
								actionAvailable = false;
							}else if(action == 'move_row_down' && table_cell.closest('.ZMSTable-cell').closest('tr').next().length==0){
								actionAvailable = false;
							}else if(table_cell.prop("tagName") == "TH") {
								if(table_type == 1 && ['move_row_down','insert_row_above','delete_row'].includes(action)){
									actionAvailable = false;
								}else if(table_type == 3 && ['move_col_left','move_col_right','insert_col_left','delete_col'].includes(action)){
									actionAvailable = false;
								}
							}

							if(actionAvailable){
								btn.show();
								btn.off('click');
								btn.on('click', function (event) {
									event.preventDefault();
									actionBtnClick($(target).closest('.ZMSTable'), action);
									$('table#table_cell_editor .table_cell_editable.current').removeClass('current');
									contextmenu.removeClass("show").hide();
								});
							}else{
								btn.hide();
							}
						}

						return false; //blocks default Webbrowser right click menu
					})

					$(document).on("click ", function (event) {
						$('table#table_cell_editor .table_cell_editable.current').removeClass('current');
						$('#context-menu').removeClass("show").hide();
					});
				});
			//-->
			</script>
			<!-- EO Dropdown -->

			<table id="table_cell_editor" class="table" cellspacing="0" cellpadding="0" border="0">
				<tr id="colgrouping">
					<tal:block tal:repeat="col_index python:range(table_cols)">
						<td align="center" tal:attributes="style python:'width:%s'%([ 'initial', '%s%%'%((table_colgroup_cols+[''])[min(col_index,len(table_colgroup_cols))]) ][zmscontext.attr('colgroup')] )">
							<tal:block tal:condition="python:zmscontext.attr('colgroup')">
								<input class="form-control form-control-sm" type="text" size="3"
									style="display:inline;width:4em;"
									onchange="$(this).parent().css('width',$(this).val()+'%')"
									tal:attributes="name python:'col%i'%col_index;
										value python:(table_colgroup_cols+[''])[min(col_index,len(table_colgroup_cols))];
										title python: 'Calculated Average-Width = %s%%'%(table_widths[col_index])" />
								&#37;
							</tal:block>
						</td>
					</tal:block>
				</tr>
				<tr tal:repeat="row_index python:range(table_rows)" tal:attributes="id python:'table_row_%i'%row_index">
					<tal:block tal:repeat="col_index python:range(len(table_table[row_index]))">
						<tal:block tal:define="global
								cell python:table_table[row_index][col_index];
								pattern python:'%3Cdtml-var%20\042 getlinkurl\\((.*?),request\\)\042=\042\042>\042&gt\073';
								replacement python:'<dtml-var \042getLinkUrl(\\1,REQUEST)\042>\042>';
								cell_content python:here.re_sub(pattern,replacement,cell.get('content',''));
								cell_format python:cell.get('format',textFormatDefault);
								richedit_preview python:int(request.get('richedit_fmt') is not None and cell_format==request.get('richedit_fmt').getId())">

							<td class="ZMSTable-cell" tal:attributes="colspan cell/colspan">
								<div class="ZMSTable">
									<table style="width:100%" class="ZMSTable">
									<tr>
										<tal:block tal:content="structure python:'<%s title=\042onDblClick: %s\042 class=\042table_cell_editable\042>'%(['td',cell.get('tag','')][cell.get('tag','')!=''],here.getZMILangStr('ACTION_EDIT_CELL'))">start-tag</tal:block>
										<input type="hidden" tal:attributes="id python:'tag_%i_%i'%(col_index,row_index); value python:cell.get('tag','')" />
										<input type="hidden" tal:attributes="id python:'format_%i_%i'%(col_index,row_index); value cell_format" />
										<div tal:attributes="id python:'input_%i_%i'%(col_index,row_index); class python:['','d-none'][richedit_preview]">
											<textarea tal:attributes="id python:'content_%i_%i'%(col_index,row_index); placeholder python:'table:'+['td',cell.get('tag','')][cell.get('tag','')!='']" tal:content="cell_content"></textarea>
										</div>
										<div tal:attributes="id python:'preview_%i_%i'%(col_index,row_index);class python:cell.get('tag','')+[' placeholder',''][len(cell_content)>0]+[' d-none',''][richedit_preview]"
											><tal:block tal:condition="cell/content" tal:content="structure cell_content">the cell-content</tal:block
										></div>
										<tal:block tal:content="structure python:'</%s><!-- .table_cell_editable -->'%(cell.get('tag',''))">end-tag</tal:block>
									</tr>
									</table>
								</div>
							</td>

						</tal:block>
					</tal:block>
				</tr>
			</table>
			<div class="form-group row">
				<div class="col-sm-12">
					<small class="form-text text-muted mb-3"><i class="fas fa-info-circle"></i>
						<i class="fas fa-mouse"></i> <span class="badge badge-dark">Click</span> cell to edit,
						<span class="badge badge-dark">Double-click</span> cell to open WYSIWYG-editor,
						<span class="badge badge-dark">Right-click</span> to insert, move or delete cells.
					</small>
				</div>
			</div>
			<input type="hidden" id="cols" tal:attributes="value table_cols" />
			<input type="hidden" id="rows" tal:attributes="value table_rows" />

		</tal:block>
	</tal:block>

	<input type="hidden" id="table_table" tal:attributes="name python:'table_%s'%request['lang']" value="<list></list>"/>
	<input type="hidden" id="table_colgroup_cols" tal:attributes="name python:'cols_%s'%request['lang']" value="<list></list>"/>
	<tal:block tal:define="global dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['type','table','colgroup','cols','sortable'])"></tal:block>

</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">type</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Type</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">int</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">table</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Table</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">list</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">cols</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Cols</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">list</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="application/javascript" filename="jquery.tablesorter.min.js" type="file"><![CDATA[!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){return function(A){"use strict";var L=A.tablesorter={version:"2.31.3",parsers:[],widgets:[],defaults:{theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,resort:!0,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",duplicateSpan:!0,textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,initWidgets:!0,widgetClass:"widget-{name}",widgets:[],widgetOptions:{zebra:["even","odd"]},initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssInfoBlock:"tablesorter-infoOnly",cssNoSort:"tablesorter-noSort",cssIgnoreRow:"tablesorter-ignoreRow",cssIcon:"tablesorter-icon",cssIconNone:"",cssIconAsc:"",cssIconDesc:"",cssIconDisabled:"",pointerClick:"click",pointerDown:"mousedown",pointerUp:"mouseup",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[],globalize:0,imgAttr:0},css:{table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",colgroup:"tablesorter-colgroup",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},language:{sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",sortDisabled:"sorting is disabled",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},regex:{templateContent:/\{content\}/g,templateIcon:/\{icon\}/g,templateName:/\{name\}/i,spaces:/\s+/g,nonWord:/\W/g,formElements:/(input|select|button|textarea)/i,chunk:/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i,comma:/,/g,digitNonUS:/[\s|\.]/g,digitNegativeTest:/^\s*\([.\d]+\)/,digitNegativeReplace:/^\s*\(([.\d]+)\)/,digitTest:/^[\-+(]?\d+[)]?$/,digitReplace:/[,.'"\s]/g},string:{max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1},keyCodes:{enter:13},dates:{},instanceMethods:{},setup:function(t,r){if(t&&t.tHead&&0!==t.tBodies.length&&!0!==t.hasInitialized){var e,o="",s=A(t),a=A.metadata;t.hasInitialized=!1,t.isProcessing=!0,t.config=r,A.data(t,"tablesorter",r),L.debug(r,"core")&&(console[console.group?"group":"log"]("Initializing tablesorter v"+L.version),A.data(t,"startoveralltimer",new Date)),r.supportsDataObject=((e=A.fn.jquery.split("."))[0]=parseInt(e[0],10),1<e[0]||1===e[0]&&4<=parseInt(e[1],10)),r.emptyTo=r.emptyTo.toLowerCase(),r.stringTo=r.stringTo.toLowerCase(),r.last={sortList:[],clickedIndex:-1},/tablesorter\-/.test(s.attr("class"))||(o=""!==r.theme?" tablesorter-"+r.theme:""),r.namespace?r.namespace="."+r.namespace.replace(L.regex.nonWord,""):r.namespace=".tablesorter"+Math.random().toString(16).slice(2),r.table=t,r.$table=s.addClass(L.css.table+" "+r.tableClass+o+" "+r.namespace.slice(1)).attr("role","grid"),r.$headers=s.find(r.selectorHeaders),r.$table.children().children("tr").attr("role","row"),r.$tbodies=s.children("tbody:not(."+r.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),r.$table.children("caption").length&&((o=r.$table.children("caption")[0]).id||(o.id=r.namespace.slice(1)+"caption"),r.$table.attr("aria-labelledby",o.id)),r.widgetInit={},r.textExtraction=r.$table.attr("data-text-extraction")||r.textExtraction||"basic",L.buildHeaders(r),L.fixColumnWidth(t),L.addWidgetFromClass(t),L.applyWidgetOptions(t),L.setupParsers(r),r.totalRows=0,r.debug&&L.validateOptions(r),r.delayInit||L.buildCache(r),L.bindEvents(t,r.$headers,!0),L.bindMethods(r),r.supportsDataObject&&void 0!==s.data().sortlist?r.sortList=s.data().sortlist:a&&s.metadata()&&s.metadata().sortlist&&(r.sortList=s.metadata().sortlist),L.applyWidget(t,!0),0<r.sortList.length?(r.last.sortList=r.sortList,L.sortOn(r,r.sortList,{},!r.initWidgets)):(L.setHeadersCss(r),r.initWidgets&&L.applyWidget(t,!1)),r.showProcessing&&s.unbind("sortBegin"+r.namespace+" sortEnd"+r.namespace).bind("sortBegin"+r.namespace+" sortEnd"+r.namespace,function(e){clearTimeout(r.timerProcessing),L.isProcessing(t),"sortBegin"===e.type&&(r.timerProcessing=setTimeout(function(){L.isProcessing(t,!0)},500))}),t.hasInitialized=!0,t.isProcessing=!1,L.debug(r,"core")&&(console.log("Overall initialization time:"+L.benchmark(A.data(t,"startoveralltimer"))),L.debug(r,"core")&&console.groupEnd&&console.groupEnd()),s.triggerHandler("tablesorter-initialized",t),"function"==typeof r.initialized&&r.initialized(t)}else L.debug(r,"core")&&(t.hasInitialized?console.warn("Stopping initialization. Tablesorter has already been initialized"):console.error("Stopping initialization! No table, thead or tbody",t))},bindMethods:function(r){var e=r.$table,t=r.namespace,o="sortReset update updateRows updateAll updateHeaders addRows updateCell updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(t+" ");e.unbind(o.replace(L.regex.spaces," ")).bind("sortReset"+t,function(e,t){e.stopPropagation(),L.sortReset(this.config,function(e){e.isApplyingWidgets?setTimeout(function(){L.applyWidget(e,"",t)},100):L.applyWidget(e,"",t)})}).bind("updateAll"+t,function(e,t,r){e.stopPropagation(),L.updateAll(this.config,t,r)}).bind("update"+t+" updateRows"+t,function(e,t,r){e.stopPropagation(),L.update(this.config,t,r)}).bind("updateHeaders"+t,function(e,t){e.stopPropagation(),L.updateHeaders(this.config,t)}).bind("updateCell"+t,function(e,t,r,o){e.stopPropagation(),L.updateCell(this.config,t,r,o)}).bind("addRows"+t,function(e,t,r,o){e.stopPropagation(),L.addRows(this.config,t,r,o)}).bind("updateComplete"+t,function(){this.isUpdating=!1}).bind("sorton"+t,function(e,t,r,o){e.stopPropagation(),L.sortOn(this.config,t,r,o)}).bind("appendCache"+t,function(e,t,r){e.stopPropagation(),L.appendCache(this.config,r),A.isFunction(t)&&t(this)}).bind("updateCache"+t,function(e,t,r){e.stopPropagation(),L.updateCache(this.config,t,r)}).bind("applyWidgetId"+t,function(e,t){e.stopPropagation(),L.applyWidgetId(this,t)}).bind("applyWidgets"+t,function(e,t){e.stopPropagation(),L.applyWidget(this,!1,t)}).bind("refreshWidgets"+t,function(e,t,r){e.stopPropagation(),L.refreshWidgets(this,t,r)}).bind("removeWidget"+t,function(e,t,r){e.stopPropagation(),L.removeWidget(this,t,r)}).bind("destroy"+t,function(e,t,r){e.stopPropagation(),L.destroy(this,t,r)}).bind("resetToLoadState"+t,function(e){e.stopPropagation(),L.removeWidget(this,!0,!1);var t=A.extend(!0,{},r.originalSettings);(r=A.extend(!0,{},L.defaults,t)).originalSettings=t,this.hasInitialized=!1,L.setup(this,r)})},bindEvents:function(e,t,r){var o,i=(e=A(e)[0]).config,s=i.namespace,d=null;!0!==r&&(t.addClass(s.slice(1)+"_extra_headers"),(o=L.getClosest(t,"table")).length&&"TABLE"===o[0].nodeName&&o[0]!==e&&A(o[0]).addClass(s.slice(1)+"_extra_table")),o=(i.pointerDown+" "+i.pointerUp+" "+i.pointerClick+" sort keyup ").replace(L.regex.spaces," ").split(" ").join(s+" "),t.find(i.selectorSort).add(t.filter(i.selectorSort)).unbind(o).bind(o,function(e,t){var r,o,s,a=A(e.target),n=" "+e.type+" ";if(!(1!==(e.which||e.button)&&!n.match(" "+i.pointerClick+" | sort | keyup ")||" keyup "===n&&e.which!==L.keyCodes.enter||n.match(" "+i.pointerClick+" ")&&void 0!==e.which||n.match(" "+i.pointerUp+" ")&&d!==e.target&&!0!==t)){if(n.match(" "+i.pointerDown+" "))return d=e.target,void("1"===(s=a.jquery.split("."))[0]&&s[1]<4&&e.preventDefault());if(d=null,r=L.getClosest(A(this),"."+L.css.header),L.regex.formElements.test(e.target.nodeName)||a.hasClass(i.cssNoSort)||0<a.parents("."+i.cssNoSort).length||r.hasClass("sorter-false")||0<a.parents("button").length)return!i.cancelSelection;i.delayInit&&L.isEmptyObject(i.cache)&&L.buildCache(i),i.last.clickedIndex=r.attr("data-column")||r.index(),(o=i.$headerIndexed[i.last.clickedIndex][0])&&!o.sortDisabled&&L.initSort(i,o,e)}}),i.cancelSelection&&t.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},buildHeaders:function(d){var e,l,t,r;for(d.headerList=[],d.headerContent=[],d.sortVars=[],L.debug(d,"core")&&(t=new Date),d.columns=L.computeColumnIndex(d.$table.children("thead, tfoot").children("tr")),l=d.cssIcon?'<i class="'+(d.cssIcon===L.css.icon?L.css.icon:d.cssIcon+" "+L.css.icon)+'"></i>':"",d.$headers=A(A.map(d.$table.find(d.selectorHeaders),function(e,t){var r,o,s,a,n,i=A(e);if(!L.getClosest(i,"tr").hasClass(d.cssIgnoreRow))return/(th|td)/i.test(e.nodeName)||(n=L.getClosest(i,"th, td"),i.attr("data-column",n.attr("data-column"))),r=L.getColumnData(d.table,d.headers,t,!0),d.headerContent[t]=i.html(),""===d.headerTemplate||i.find("."+L.css.headerIn).length||(a=d.headerTemplate.replace(L.regex.templateContent,i.html()).replace(L.regex.templateIcon,i.find("."+L.css.icon).length?"":l),d.onRenderTemplate&&(o=d.onRenderTemplate.apply(i,[t,a]))&&"string"==typeof o&&(a=o),i.html('<div class="'+L.css.headerIn+'">'+a+"</div>")),d.onRenderHeader&&d.onRenderHeader.apply(i,[t,d,d.$table]),s=parseInt(i.attr("data-column"),10),e.column=s,n=L.getOrder(L.getData(i,r,"sortInitialOrder")||d.sortInitialOrder),d.sortVars[s]={count:-1,order:n?d.sortReset?[1,0,2]:[1,0]:d.sortReset?[0,1,2]:[0,1],lockedOrder:!1,sortedBy:""},void 0!==(n=L.getData(i,r,"lockedOrder")||!1)&&!1!==n&&(d.sortVars[s].lockedOrder=!0,d.sortVars[s].order=L.getOrder(n)?[1,1]:[0,0]),d.headerList[t]=e,i.addClass(L.css.header+" "+d.cssHeader),L.getClosest(i,"tr").addClass(L.css.headerRow+" "+d.cssHeaderRow).attr("role","row"),d.tabIndex&&i.attr("tabindex",0),e})),d.$headerIndexed=[],r=0;r<d.columns;r++)L.isEmptyObject(d.sortVars[r])&&(d.sortVars[r]={}),e=d.$headers.filter('[data-column="'+r+'"]'),d.$headerIndexed[r]=e.length?e.not(".sorter-false").length?e.not(".sorter-false").filter(":last"):e.filter(":last"):A();d.$table.find(d.selectorHeaders).attr({scope:"col",role:"columnheader"}),L.updateHeader(d),L.debug(d,"core")&&(console.log("Built headers:"+L.benchmark(t)),console.log(d.$headers))},addInstanceMethods:function(e){A.extend(L.instanceMethods,e)},setupParsers:function(e,t){var r,o,s,a,n,i,d,l,c,g,p,u,f,h,m=e.table,b=0,y=L.debug(e,"core"),w={};if(e.$tbodies=e.$table.children("tbody:not(."+e.cssInfoBlock+")"),0===(h=(f=void 0===t?e.$tbodies:t).length))return y?console.warn("Warning: *Empty table!* Not building a parser cache"):"";for(y&&(u=new Date,console[console.group?"group":"log"]("Detecting parsers for each column")),o={extractors:[],parsers:[]};b<h;){if((r=f[b].rows).length)for(n=0,a=e.columns,i=0;i<a;i++){if((d=e.$headerIndexed[n])&&d.length&&(l=L.getColumnData(m,e.headers,n),p=L.getParserById(L.getData(d,l,"extractor")),g=L.getParserById(L.getData(d,l,"sorter")),c="false"===L.getData(d,l,"parser"),e.empties[n]=(L.getData(d,l,"empty")||e.emptyTo||(e.emptyToBottom?"bottom":"top")).toLowerCase(),e.strings[n]=(L.getData(d,l,"string")||e.stringTo||"max").toLowerCase(),c&&(g=L.getParserById("no-parser")),p=p||!1,g=g||L.detectParserForColumn(e,r,-1,n),y&&(w["("+n+") "+d.text()]={parser:g.id,extractor:p?p.id:"none",string:e.strings[n],empty:e.empties[n]}),o.parsers[n]=g,o.extractors[n]=p,0<(s=d[0].colSpan-1)))for(n+=s,a+=s;0<s+1;)o.parsers[n-s]=g,o.extractors[n-s]=p,s--;n++}b+=o.parsers.length?h:1}y&&(L.isEmptyObject(w)?console.warn("  No parsers detected!"):console[console.table?"table":"log"](w),console.log("Completed detecting parsers"+L.benchmark(u)),console.groupEnd&&console.groupEnd()),e.parsers=o.parsers,e.extractors=o.extractors},addParser:function(e){var t,r=L.parsers.length,o=!0;for(t=0;t<r;t++)L.parsers[t].id.toLowerCase()===e.id.toLowerCase()&&(o=!1);o&&(L.parsers[L.parsers.length]=e)},getParserById:function(e){if("false"==e)return!1;var t,r=L.parsers.length;for(t=0;t<r;t++)if(L.parsers[t].id.toLowerCase()===e.toString().toLowerCase())return L.parsers[t];return!1},detectParserForColumn:function(e,t,r,o){for(var s,a,n,i=L.parsers.length,d=!1,l="",c=L.debug(e,"core"),g=!0;""===l&&g;)(n=t[++r])&&r<50?n.className.indexOf(L.cssIgnoreRow)<0&&(d=t[r].cells[o],l=L.getElementText(e,d,o),a=A(d),c&&console.log("Checking if value was empty on row "+r+", column: "+o+': "'+l+'"')):g=!1;for(;0<=--i;)if((s=L.parsers[i])&&"text"!==s.id&&s.is&&s.is(l,e.table,d,a))return s;return L.getParserById("text")},getElementText:function(e,t,r){if(!t)return"";var o,s=e.textExtraction||"",a=t.jquery?t:A(t);return"string"==typeof s?"basic"===s&&void 0!==(o=a.attr(e.textAttribute))?A.trim(o):A.trim(t.textContent||a.text()):"function"==typeof s?A.trim(s(a[0],e.table,r)):"function"==typeof(o=L.getColumnData(e.table,s,r))?A.trim(o(a[0],e.table,r)):A.trim(a[0].textContent||a.text())},getParsedText:function(e,t,r,o){void 0===o&&(o=L.getElementText(e,t,r));var s=""+o,a=e.parsers[r],n=e.extractors[r];return a&&(n&&"function"==typeof n.format&&(o=n.format(o,e.table,t,r)),s="no-parser"===a.id?"":a.format(""+o,e.table,t,r),e.ignoreCase&&"string"==typeof s&&(s=s.toLowerCase())),s},buildCache:function(e,t,r){var o,s,a,n,i,d,l,c,g,p,u,f,h,m,b,y,w,x,v,C,$,I,D=e.table,R=e.parsers,T=L.debug(e,"core");if(e.$tbodies=e.$table.children("tbody:not(."+e.cssInfoBlock+")"),l=void 0===r?e.$tbodies:r,e.cache={},e.totalRows=0,!R)return T?console.warn("Warning: *Empty table!* Not building a cache"):"";for(T&&(f=new Date),e.showProcessing&&L.isProcessing(D,!0),d=0;d<l.length;d++){for(y=[],o=e.cache[d]={normalized:[]},h=l[d]&&l[d].rows.length||0,n=0;n<h;++n)if(m={child:[],raw:[]},g=[],!(c=A(l[d].rows[n])).hasClass(e.selectorRemove.slice(1)))if(c.hasClass(e.cssChildRow)&&0!==n)for($=o.normalized.length-1,(b=o.normalized[$][e.columns]).$row=b.$row.add(c),c.prev().hasClass(e.cssChildRow)||c.prev().addClass(L.css.cssHasChild),p=c.children("th, td"),$=b.child.length,b.child[$]=[],x=0,C=e.columns,i=0;i<C;i++)(u=p[i])&&(b.child[$][i]=L.getParsedText(e,u,i),0<(w=p[i].colSpan-1)&&(x+=w,C+=w)),x++;else{for(m.$row=c,m.order=n,x=0,C=e.columns,i=0;i<C;++i){if((u=c[0].cells[i])&&x<e.columns&&(!(v=void 0!==R[x])&&T&&console.warn("No parser found for row: "+n+", column: "+i+'; cell containing: "'+A(u).text()+'"; does it have a header?'),s=L.getElementText(e,u,x),m.raw[x]=s,a=L.getParsedText(e,u,x,s),g[x]=a,v&&"numeric"===(R[x].type||"").toLowerCase()&&(y[x]=Math.max(Math.abs(a)||0,y[x]||0)),0<(w=u.colSpan-1))){for(I=0;I<=w;)a=e.duplicateSpan||0===I?a:"string"!=typeof e.textExtraction&&L.getElementText(e,u,x+I)||"",m.raw[x+I]=a,g[x+I]=a,I++;x+=w,C+=w}x++}g[e.columns]=m,o.normalized[o.normalized.length]=g}o.colMax=y,e.totalRows+=o.normalized.length}if(e.showProcessing&&L.isProcessing(D),T){for($=Math.min(5,e.cache[0].normalized.length),console[console.group?"group":"log"]("Building cache for "+e.totalRows+" rows (showing "+$+" rows in log) and "+e.columns+" columns"+L.benchmark(f)),s={},i=0;i<e.columns;i++)for(x=0;x<$;x++)s["row: "+x]||(s["row: "+x]={}),s["row: "+x][e.$headerIndexed[i].text()]=e.cache[0].normalized[x][i];console[console.table?"table":"log"](s),console.groupEnd&&console.groupEnd()}A.isFunction(t)&&t(D)},getColumnText:function(e,t,r,o){var s,a,n,i,d,l,c,g,p,u,f="function"==typeof r,h="all"===t,m={raw:[],parsed:[],$cell:[]},b=(e=A(e)[0]).config;if(!L.isEmptyObject(b)){for(d=b.$tbodies.length,s=0;s<d;s++)for(l=(n=b.cache[s].normalized).length,a=0;a<l;a++)i=n[a],o&&!i[b.columns].$row.is(o)||(u=!0,g=h?i.slice(0,b.columns):i[t],i=i[b.columns],c=h?i.raw:i.raw[t],p=h?i.$row.children():i.$row.children().eq(t),f&&(u=r({tbodyIndex:s,rowIndex:a,parsed:g,raw:c,$row:i.$row,$cell:p})),!1!==u&&(m.parsed[m.parsed.length]=g,m.raw[m.raw.length]=c,m.$cell[m.$cell.length]=p));return m}L.debug(b,"core")&&console.warn("No cache found - aborting getColumnText function!")},setHeadersCss:function(a){function e(e,t){e.removeClass(n).addClass(i[t]).attr("aria-sort",l[t]).find("."+L.css.icon).removeClass(d[2]).addClass(d[t])}var t,r,o=a.sortList,s=o.length,n=L.css.sortNone+" "+a.cssNone,i=[L.css.sortAsc+" "+a.cssAsc,L.css.sortDesc+" "+a.cssDesc],d=[a.cssIconAsc,a.cssIconDesc,a.cssIconNone],l=["ascending","descending"],c=a.$table.find("tfoot tr").children("td, th").add(A(a.namespace+"_extra_headers")).removeClass(i.join(" ")),g=a.$headers.add(A("thead "+a.namespace+"_extra_headers")).removeClass(i.join(" ")).addClass(n).attr("aria-sort","none").find("."+L.css.icon).removeClass(d.join(" ")).end();for(g.not(".sorter-false").find("."+L.css.icon).addClass(d[2]),a.cssIconDisabled&&g.filter(".sorter-false").find("."+L.css.icon).addClass(a.cssIconDisabled),t=0;t<s;t++)if(2!==o[t][1]){if((g=(g=a.$headers.filter(function(e){for(var t=!0,r=a.$headers.eq(e),o=parseInt(r.attr("data-column"),10),s=o+L.getClosest(r,"th, td")[0].colSpan;o<s;o++)t=!!t&&(t||-1<L.isValueInArray(o,a.sortList));return t})).not(".sorter-false").filter('[data-column="'+o[t][0]+'"]'+(1===s?":last":""))).length)for(r=0;r<g.length;r++)g[r].sortDisabled||e(g.eq(r),o[t][1]);c.length&&e(c.filter('[data-column="'+o[t][0]+'"]'),o[t][1])}for(s=a.$headers.length,t=0;t<s;t++)L.setColumnAriaLabel(a,a.$headers.eq(t))},getClosest:function(e,t){return A.fn.closest?e.closest(t):e.is(t)?e:e.parents(t).filter(":first")},setColumnAriaLabel:function(e,t,r){if(t.length){var o=parseInt(t.attr("data-column"),10),s=e.sortVars[o],a=t.hasClass(L.css.sortAsc)?"sortAsc":t.hasClass(L.css.sortDesc)?"sortDesc":"sortNone",n=A.trim(t.text())+": "+L.language[a];t.hasClass("sorter-false")||!1===r?n+=L.language.sortDisabled:(a=(s.count+1)%s.order.length,r=s.order[a],n+=L.language[0===r?"nextAsc":1===r?"nextDesc":"nextNone"]),t.attr("aria-label",n),s.sortedBy?t.attr("data-sortedBy",s.sortedBy):t.removeAttr("data-sortedBy")}},updateHeader:function(e){var t,r,o,s,a=e.table,n=e.$headers.length;for(t=0;t<n;t++)o=e.$headers.eq(t),s=L.getColumnData(a,e.headers,t,!0),r="false"===L.getData(o,s,"sorter")||"false"===L.getData(o,s,"parser"),L.setColumnSort(e,o,r)},setColumnSort:function(e,t,r){var o=e.table.id;t[0].sortDisabled=r,t[r?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+r),e.tabIndex&&(r?t.removeAttr("tabindex"):t.attr("tabindex","0")),o&&(r?t.removeAttr("aria-controls"):t.attr("aria-controls",o))},updateHeaderSortCount:function(e,t){var r,o,s,a,n,i,d,l,c=t||e.sortList,g=c.length;for(e.sortList=[],a=0;a<g;a++)if(d=c[a],(r=parseInt(d[0],10))<e.columns){switch(e.sortVars[r].order||(l=L.getOrder(e.sortInitialOrder)?e.sortReset?[1,0,2]:[1,0]:e.sortReset?[0,1,2]:[0,1],e.sortVars[r].order=l,e.sortVars[r].count=0),l=e.sortVars[r].order,o=(o=(""+d[1]).match(/^(1|d|s|o|n)/))?o[0]:""){case"1":case"d":o=1;break;case"s":o=n||0;break;case"o":o=0===(i=l[(n||0)%l.length])?1:1===i?0:2;break;case"n":o=l[++e.sortVars[r].count%l.length];break;default:o=0}n=0===a?o:n,s=[r,parseInt(o,10)||0],e.sortList[e.sortList.length]=s,o=A.inArray(s[1],l),e.sortVars[r].count=0<=o?o:s[1]%l.length}},updateAll:function(e,t,r){var o=e.table;o.isUpdating=!0,L.refreshWidgets(o,!0,!0),L.buildHeaders(e),L.bindEvents(o,e.$headers,!0),L.bindMethods(e),L.commonUpdate(e,t,r)},update:function(e,t,r){e.table.isUpdating=!0,L.updateHeader(e),L.commonUpdate(e,t,r)},updateHeaders:function(e,t){e.table.isUpdating=!0,L.buildHeaders(e),L.bindEvents(e.table,e.$headers,!0),L.resortComplete(e,t)},updateCell:function(e,t,r,o){if(A(t).closest("tr").hasClass(e.cssChildRow))console.warn('Tablesorter Warning! "updateCell" for child row content has been disabled, use "update" instead');else{if(L.isEmptyObject(e.cache))return L.updateHeader(e),void L.commonUpdate(e,r,o);e.table.isUpdating=!0,e.$table.find(e.selectorRemove).remove();var s,a,n,i,d,l,c=e.$tbodies,g=A(t),p=c.index(L.getClosest(g,"tbody")),u=e.cache[p],f=L.getClosest(g,"tr");if(t=g[0],c.length&&0<=p){if(n=c.eq(p).find("tr").not("."+e.cssChildRow).index(f),d=u.normalized[n],(l=f[0].cells.length)!==e.columns)for(s=!1,a=i=0;a<l;a++)s||f[0].cells[a]===t?s=!0:i+=f[0].cells[a].colSpan;else i=g.index();s=L.getElementText(e,t,i),d[e.columns].raw[i]=s,s=L.getParsedText(e,t,i,s),d[i]=s,"numeric"===(e.parsers[i].type||"").toLowerCase()&&(u.colMax[i]=Math.max(Math.abs(s)||0,u.colMax[i]||0)),!1!==(s="undefined"!==r?r:e.resort)?L.checkResort(e,s,o):L.resortComplete(e,o)}else L.debug(e,"core")&&console.error("updateCell aborted, tbody missing or not within the indicated table"),e.table.isUpdating=!1}},addRows:function(e,t,r,o){var s,a,n,i,d,l,c,g,p,u,f,h,m,b="string"==typeof t&&1===e.$tbodies.length&&/<tr/.test(t||""),y=e.table;if(b)t=A(t),e.$tbodies.append(t);else if(!(t&&t instanceof A&&L.getClosest(t,"table")[0]===e.table))return L.debug(e,"core")&&console.error("addRows method requires (1) a jQuery selector reference to rows that have already been added to the table, or (2) row HTML string to be added to a table with only one tbody"),!1;if(y.isUpdating=!0,L.isEmptyObject(e.cache))L.updateHeader(e),L.commonUpdate(e,r,o);else{for(d=t.filter("tr").attr("role","row").length,n=e.$tbodies.index(t.parents("tbody").filter(":first")),e.parsers&&e.parsers.length||L.setupParsers(e),i=0;i<d;i++){for(p=0,c=t[i].cells.length,g=e.cache[n].normalized.length,f=[],u={child:[],raw:[],$row:t.eq(i),order:g},l=0;l<c;l++)h=t[i].cells[l],s=L.getElementText(e,h,p),u.raw[p]=s,a=L.getParsedText(e,h,p,s),f[p]=a,"numeric"===(e.parsers[p].type||"").toLowerCase()&&(e.cache[n].colMax[p]=Math.max(Math.abs(a)||0,e.cache[n].colMax[p]||0)),0<(m=h.colSpan-1)&&(p+=m),p++;f[e.columns]=u,e.cache[n].normalized[g]=f}L.checkResort(e,r,o)}},updateCache:function(e,t,r){e.parsers&&e.parsers.length||L.setupParsers(e,r),L.buildCache(e,t,r)},appendCache:function(e,t){var r,o,s,a,n,i,d,l=e.table,c=e.$tbodies,g=[],p=e.cache;if(L.isEmptyObject(p))return e.appender?e.appender(l,g):l.isUpdating?e.$table.triggerHandler("updateComplete",l):"";for(L.debug(e,"core")&&(d=new Date),i=0;i<c.length;i++)if((s=c.eq(i)).length){for(a=L.processTbody(l,s,!0),o=(r=p[i].normalized).length,n=0;n<o;n++)g[g.length]=r[n][e.columns].$row,e.appender&&(!e.pager||e.pager.removeRows||e.pager.ajax)||a.append(r[n][e.columns].$row);L.processTbody(l,a,!1)}e.appender&&e.appender(l,g),L.debug(e,"core")&&console.log("Rebuilt table"+L.benchmark(d)),t||e.appender||L.applyWidget(l),l.isUpdating&&e.$table.triggerHandler("updateComplete",l)},commonUpdate:function(e,t,r){e.$table.find(e.selectorRemove).remove(),L.setupParsers(e),L.buildCache(e),L.checkResort(e,t,r)},initSort:function(t,e,r){if(t.table.isUpdating)return setTimeout(function(){L.initSort(t,e,r)},50);var o,s,a,n,i,d,l,c=!r[t.sortMultiSortKey],g=t.table,p=t.$headers.length,u=L.getClosest(A(e),"th, td"),f=parseInt(u.attr("data-column"),10),h="mouseup"===r.type?"user":r.type,m=t.sortVars[f].order;if(u=u[0],t.$table.triggerHandler("sortStart",g),d=(t.sortVars[f].count+1)%m.length,t.sortVars[f].count=r[t.sortResetKey]?2:d,t.sortRestart)for(a=0;a<p;a++)l=t.$headers.eq(a),f!==(d=parseInt(l.attr("data-column"),10))&&(c||l.hasClass(L.css.sortNone))&&(t.sortVars[d].count=-1);if(c){if(A.each(t.sortVars,function(e){t.sortVars[e].sortedBy=""}),t.sortList=[],t.last.sortList=[],null!==t.sortForce)for(o=t.sortForce,s=0;s<o.length;s++)o[s][0]!==f&&(t.sortList[t.sortList.length]=o[s],t.sortVars[o[s][0]].sortedBy="sortForce");if((n=m[t.sortVars[f].count])<2&&(t.sortList[t.sortList.length]=[f,n],t.sortVars[f].sortedBy=h,1<u.colSpan))for(s=1;s<u.colSpan;s++)t.sortList[t.sortList.length]=[f+s,n],t.sortVars[f+s].count=A.inArray(n,m),t.sortVars[f+s].sortedBy=h}else if(t.sortList=A.extend([],t.last.sortList),0<=L.isValueInArray(f,t.sortList))for(t.sortVars[f].sortedBy=h,s=0;s<t.sortList.length;s++)(d=t.sortList[s])[0]===f&&(d[1]=m[t.sortVars[f].count],2===d[1]&&(t.sortList.splice(s,1),t.sortVars[f].count=-1));else if(n=m[t.sortVars[f].count],t.sortVars[f].sortedBy=h,n<2&&(t.sortList[t.sortList.length]=[f,n],1<u.colSpan))for(s=1;s<u.colSpan;s++)t.sortList[t.sortList.length]=[f+s,n],t.sortVars[f+s].count=A.inArray(n,m),t.sortVars[f+s].sortedBy=h;if(t.last.sortList=A.extend([],t.sortList),t.sortList.length&&t.sortAppend&&(o=A.isArray(t.sortAppend)?t.sortAppend:t.sortAppend[t.sortList[0][0]],!L.isEmptyObject(o)))for(s=0;s<o.length;s++)if(o[s][0]!==f&&L.isValueInArray(o[s][0],t.sortList)<0){if(i=(""+(n=o[s][1])).match(/^(a|d|s|o|n)/))switch(d=t.sortList[0][1],i[0]){case"d":n=1;break;case"s":n=d;break;case"o":n=0===d?1:0;break;case"n":n=(d+1)%m.length;break;default:n=0}t.sortList[t.sortList.length]=[o[s][0],n],t.sortVars[o[s][0]].sortedBy="sortAppend"}t.$table.triggerHandler("sortBegin",g),setTimeout(function(){L.setHeadersCss(t),L.multisort(t),L.appendCache(t),t.$table.triggerHandler("sortBeforeEnd",g),t.$table.triggerHandler("sortEnd",g)},1)},multisort:function(l){var e,t,c,r,g=l.table,p=[],u=0,f=l.textSorter||"",h=l.sortList,m=h.length,o=l.$tbodies.length;if(!l.serverSideSorting&&!L.isEmptyObject(l.cache)){if(L.debug(l,"core")&&(t=new Date),"object"==typeof f)for(c=l.columns;c--;)"function"==typeof(r=L.getColumnData(g,f,c))&&(p[c]=r);for(e=0;e<o;e++)c=l.cache[e].colMax,l.cache[e].normalized.sort(function(e,t){var r,o,s,a,n,i,d;for(r=0;r<m;r++){if(s=h[r][0],a=h[r][1],u=0===a,l.sortStable&&e[s]===t[s]&&1===m)return e[l.columns].order-t[l.columns].order;if(n=(o=/n/i.test(L.getSortType(l.parsers,s)))&&l.strings[s]?(o="boolean"==typeof L.string[l.strings[s]]?(u?1:-1)*(L.string[l.strings[s]]?-1:1):l.strings[s]&&L.string[l.strings[s]]||0,l.numberSorter?l.numberSorter(e[s],t[s],u,c[s],g):L["sortNumeric"+(u?"Asc":"Desc")](e[s],t[s],o,c[s],s,l)):(i=u?e:t,d=u?t:e,"function"==typeof f?f(i[s],d[s],u,s,g):"function"==typeof p[s]?p[s](i[s],d[s],u,s,g):L["sortNatural"+(u?"Asc":"Desc")](e[s]||"",t[s]||"",s,l)))return n}return e[l.columns].order-t[l.columns].order});L.debug(l,"core")&&console.log("Applying sort "+h.toString()+L.benchmark(t))}},resortComplete:function(e,t){e.table.isUpdating&&e.$table.triggerHandler("updateComplete",e.table),A.isFunction(t)&&t(e.table)},checkResort:function(e,t,r){var o=A.isArray(t)?t:e.sortList;!1===(void 0===t?e.resort:t)||e.serverSideSorting||e.table.isProcessing?(L.resortComplete(e,r),L.applyWidget(e.table,!1)):o.length?L.sortOn(e,o,function(){L.resortComplete(e,r)},!0):L.sortReset(e,function(){L.resortComplete(e,r),L.applyWidget(e.table,!1)})},sortOn:function(e,t,r,o){var s,a=e.table;for(e.$table.triggerHandler("sortStart",a),s=0;s<e.columns;s++)e.sortVars[s].sortedBy=-1<L.isValueInArray(s,t)?"sorton":"";L.updateHeaderSortCount(e,t),L.setHeadersCss(e),e.delayInit&&L.isEmptyObject(e.cache)&&L.buildCache(e),e.$table.triggerHandler("sortBegin",a),L.multisort(e),L.appendCache(e,o),e.$table.triggerHandler("sortBeforeEnd",a),e.$table.triggerHandler("sortEnd",a),L.applyWidget(a),A.isFunction(r)&&r(a)},sortReset:function(e,t){var r;for(e.sortList=[],r=0;r<e.columns;r++)e.sortVars[r].count=-1,e.sortVars[r].sortedBy="";L.setHeadersCss(e),L.multisort(e),L.appendCache(e),A.isFunction(t)&&t(e.table)},getSortType:function(e,t){return e&&e[t]&&e[t].type||""},getOrder:function(e){return/^d/i.test(e)||1===e},sortNatural:function(e,t){if(e===t)return 0;e=(e||"").toString(),t=(t||"").toString();var r,o,s,a,n,i,d=L.regex;if(d.hex.test(t)){if((r=parseInt(e.match(d.hex),16))<(o=parseInt(t.match(d.hex),16)))return-1;if(o<r)return 1}for(r=e.replace(d.chunk,"\\0$1\\0").replace(d.chunks,"").split("\\0"),o=t.replace(d.chunk,"\\0$1\\0").replace(d.chunks,"").split("\\0"),i=Math.max(r.length,o.length),n=0;n<i;n++){if(s=isNaN(r[n])?r[n]||0:parseFloat(r[n])||0,a=isNaN(o[n])?o[n]||0:parseFloat(o[n])||0,isNaN(s)!==isNaN(a))return isNaN(s)?1:-1;if(typeof s!=typeof a&&(s+="",a+=""),s<a)return-1;if(a<s)return 1}return 0},sortNaturalAsc:function(e,t,r,o){if(e===t)return 0;var s=L.string[o.empties[r]||o.emptyTo];return""===e&&0!==s?"boolean"==typeof s?s?-1:1:-s||-1:""===t&&0!==s?"boolean"==typeof s?s?1:-1:s||1:L.sortNatural(e,t)},sortNaturalDesc:function(e,t,r,o){if(e===t)return 0;var s=L.string[o.empties[r]||o.emptyTo];return""===e&&0!==s?"boolean"==typeof s?s?-1:1:s||1:""===t&&0!==s?"boolean"==typeof s?s?1:-1:-s||-1:L.sortNatural(t,e)},sortText:function(e,t){return t<e?1:e<t?-1:0},getTextValue:function(e,t,r){if(r){var o,s=e?e.length:0,a=r+t;for(o=0;o<s;o++)a+=e.charCodeAt(o);return t*a}return 0},sortNumericAsc:function(e,t,r,o,s,a){if(e===t)return 0;var n=L.string[a.empties[s]||a.emptyTo];return""===e&&0!==n?"boolean"==typeof n?n?-1:1:-n||-1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:n||1:(isNaN(e)&&(e=L.getTextValue(e,r,o)),isNaN(t)&&(t=L.getTextValue(t,r,o)),e-t)},sortNumericDesc:function(e,t,r,o,s,a){if(e===t)return 0;var n=L.string[a.empties[s]||a.emptyTo];return""===e&&0!==n?"boolean"==typeof n?n?-1:1:n||1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:-n||-1:(isNaN(e)&&(e=L.getTextValue(e,r,o)),isNaN(t)&&(t=L.getTextValue(t,r,o)),t-e)},sortNumeric:function(e,t){return e-t},addWidget:function(e){e.id&&!L.isEmptyObject(L.getWidgetById(e.id))&&console.warn('"'+e.id+'" widget was loaded more than once!'),L.widgets[L.widgets.length]=e},hasWidget:function(e,t){return(e=A(e)).length&&e[0].config&&e[0].config.widgetInit[t]||!1},getWidgetById:function(e){var t,r,o=L.widgets.length;for(t=0;t<o;t++)if((r=L.widgets[t])&&r.id&&r.id.toLowerCase()===e.toLowerCase())return r},applyWidgetOptions:function(e){var t,r,o,s=e.config,a=s.widgets.length;if(a)for(t=0;t<a;t++)(r=L.getWidgetById(s.widgets[t]))&&r.options&&(o=A.extend(!0,{},r.options),s.widgetOptions=A.extend(!0,o,s.widgetOptions),A.extend(!0,L.defaults.widgetOptions,r.options))},addWidgetFromClass:function(e){var t,r,o=e.config,s="^"+o.widgetClass.replace(L.regex.templateName,"(\\S+)+")+"$",a=new RegExp(s,"g"),n=(e.className||"").split(L.regex.spaces);if(n.length)for(t=n.length,r=0;r<t;r++)n[r].match(a)&&(o.widgets[o.widgets.length]=n[r].replace(a,"$1"))},applyWidgetId:function(e,t,r){var o,s,a,n=(e=A(e)[0]).config,i=n.widgetOptions,d=L.debug(n,"core"),l=L.getWidgetById(t);l&&(a=l.id,o=!1,A.inArray(a,n.widgets)<0&&(n.widgets[n.widgets.length]=a),d&&(s=new Date),!r&&n.widgetInit[a]||(n.widgetInit[a]=!0,e.hasInitialized&&L.applyWidgetOptions(e),"function"==typeof l.init&&(o=!0,d&&console[console.group?"group":"log"]("Initializing "+a+" widget"),l.init(e,l,n,i))),r||"function"!=typeof l.format||(o=!0,d&&console[console.group?"group":"log"]("Updating "+a+" widget"),l.format(e,n,i,!1)),d&&o&&(console.log("Completed "+(r?"initializing ":"applying ")+a+" widget"+L.benchmark(s)),console.groupEnd&&console.groupEnd()))},applyWidget:function(e,t,r){var o,s,a,n,i,d=(e=A(e)[0]).config,l=L.debug(d,"core"),c=[];if(!1===t||!e.hasInitialized||!e.isApplyingWidgets&&!e.isUpdating){if(l&&(i=new Date),L.addWidgetFromClass(e),clearTimeout(d.timerReady),d.widgets.length){for(e.isApplyingWidgets=!0,d.widgets=A.grep(d.widgets,function(e,t){return A.inArray(e,d.widgets)===t}),s=(a=d.widgets||[]).length,o=0;o<s;o++)(n=L.getWidgetById(a[o]))&&n.id?(n.priority||(n.priority=10),c[o]=n):l&&console.warn('"'+a[o]+'" was enabled, but the widget code has not been loaded!');for(c.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),s=c.length,l&&console[console.group?"group":"log"]("Start "+(t?"initializing":"applying")+" widgets"),o=0;o<s;o++)(n=c[o])&&n.id&&L.applyWidgetId(e,n.id,t);l&&console.groupEnd&&console.groupEnd()}d.timerReady=setTimeout(function(){e.isApplyingWidgets=!1,A.data(e,"lastWidgetApplication",new Date),d.$table.triggerHandler("tablesorter-ready"),t||"function"!=typeof r||r(e),l&&(n=d.widgets.length,console.log("Completed "+(!0===t?"initializing ":"applying ")+n+" widget"+(1!==n?"s":"")+L.benchmark(i)))},10)}},removeWidget:function(e,t,r){var o,s,a,n,i=(e=A(e)[0]).config;if(!0===t)for(t=[],n=L.widgets.length,a=0;a<n;a++)(s=L.widgets[a])&&s.id&&(t[t.length]=s.id);else t=(A.isArray(t)?t.join(","):t||"").toLowerCase().split(/[\s,]+/);for(n=t.length,o=0;o<n;o++)s=L.getWidgetById(t[o]),0<=(a=A.inArray(t[o],i.widgets))&&!0!==r&&i.widgets.splice(a,1),s&&s.remove&&(L.debug(i,"core")&&console.log((r?"Refreshing":"Removing")+' "'+t[o]+'" widget'),s.remove(e,i,i.widgetOptions,r),i.widgetInit[t[o]]=!1);i.$table.triggerHandler("widgetRemoveEnd",e)},refreshWidgets:function(e,t,r){function o(e){A(e).triggerHandler("refreshComplete")}var s,a,n=(e=A(e)[0]).config.widgets,i=L.widgets,d=i.length,l=[];for(s=0;s<d;s++)(a=i[s])&&a.id&&(t||A.inArray(a.id,n)<0)&&(l[l.length]=a.id);L.removeWidget(e,l.join(","),!0),!0!==r?(L.applyWidget(e,t||!1,o),t&&L.applyWidget(e,!1,o)):o(e)},benchmark:function(e){return" ("+((new Date).getTime()-e.getTime())+" ms)"},log:function(){console.log(arguments)},debug:function(e,t){return e&&(!0===e.debug||"string"==typeof e.debug&&-1<e.debug.indexOf(t))},isEmptyObject:function(e){for(var t in e)return!1;return!0},isValueInArray:function(e,t){var r,o=t&&t.length||0;for(r=0;r<o;r++)if(t[r][0]===e)return r;return-1},formatFloat:function(e,t){return"string"!=typeof e||""===e?e:(e=(t&&t.config?!1!==t.config.usNumberFormat:void 0===t||t)?e.replace(L.regex.comma,""):e.replace(L.regex.digitNonUS,"").replace(L.regex.comma,"."),L.regex.digitNegativeTest.test(e)&&(e=e.replace(L.regex.digitNegativeReplace,"-$1")),r=parseFloat(e),isNaN(r)?A.trim(e):r);var r},isDigit:function(e){return isNaN(e)?L.regex.digitTest.test(e.toString().replace(L.regex.digitReplace,"")):""!==e},computeColumnIndex:function(e,t){var r,o,s,a,n,i,d,l,c,g,p=t&&t.columns||0,u=[],f=new Array(p);for(r=0;r<e.length;r++)for(i=e[r].cells,o=0;o<i.length;o++){for(d=r,l=(n=i[o]).rowSpan||1,c=n.colSpan||1,void 0===u[d]&&(u[d]=[]),s=0;s<u[d].length+1;s++)if(void 0===u[d][s]){g=s;break}for(p&&n.cellIndex===g||(n.setAttribute?n.setAttribute("data-column",g):A(n).attr("data-column",g)),s=d;s<d+l;s++)for(void 0===u[s]&&(u[s]=[]),f=u[s],a=g;a<g+c;a++)f[a]="x"}return L.checkColumnCount(e,u,f.length),f.length},checkColumnCount:function(e,t,r){var o,s,a=!0,n=[];for(o=0;o<t.length;o++)if(t[o]&&(s=t[o].length,t[o].length!==r)){a=!1;break}a||(e.each(function(e,t){var r=t.parentElement.nodeName;n.indexOf(r)<0&&n.push(r)}),console.error("Invalid or incorrect number of columns in the "+n.join(" or ")+"; expected "+r+", but found "+s+" columns"))},fixColumnWidth:function(e){var t,r,o,s,a,n=(e=A(e)[0]).config,i=n.$table.children("colgroup");if(i.length&&i.hasClass(L.css.colgroup)&&i.remove(),n.widthFixed&&0===n.$table.children("colgroup").length){for(i=A('<colgroup class="'+L.css.colgroup+'">'),t=n.$table.width(),s=(o=n.$tbodies.find("tr:first").children(":visible")).length,a=0;a<s;a++)r=parseInt(o.eq(a).width()/t*1e3,10)/10+"%",i.append(A("<col>").css("width",r));n.$table.prepend(i)}},getData:function(e,t,r){var o,s,a="",n=A(e);return n.length?(o=!!A.metadata&&n.metadata(),s=" "+(n.attr("class")||""),void 0!==n.data(r)||void 0!==n.data(r.toLowerCase())?a+=n.data(r)||n.data(r.toLowerCase()):o&&void 0!==o[r]?a+=o[r]:t&&void 0!==t[r]?a+=t[r]:" "!==s&&s.match(" "+r+"-")&&(a=s.match(new RegExp("\\s"+r+"-([\\w-]+)"))[1]||""),A.trim(a)):""},getColumnData:function(e,t,r,o,s){if("object"!=typeof t||null===t)return t;var a,n=(e=A(e)[0]).config,i=s||n.$headers,d=n.$headerIndexed&&n.$headerIndexed[r]||i.find('[data-column="'+r+'"]:last');if(void 0!==t[r])return o?t[r]:t[i.index(d)];for(a in t)if("string"==typeof a&&d.filter(a).add(d.find(a)).length)return t[a]},isProcessing:function(e,t,r){var o=(e=A(e))[0].config,s=r||e.find("."+L.css.header);t?(void 0!==r&&0<o.sortList.length&&(s=s.filter(function(){return!this.sortDisabled&&0<=L.isValueInArray(parseFloat(A(this).attr("data-column")),o.sortList)})),e.add(s).addClass(L.css.processing+" "+o.cssProcessing)):e.add(s).removeClass(L.css.processing+" "+o.cssProcessing)},processTbody:function(e,t,r){if(e=A(e)[0],r)return e.isProcessing=!0,t.before('<colgroup class="tablesorter-savemyplace"/>'),A.fn.detach?t.detach():t.remove();var o=A(e).find("colgroup.tablesorter-savemyplace");t.insertAfter(o),o.remove(),e.isProcessing=!1},clearTableBody:function(e){A(e)[0].config.$tbodies.children().detach()},characterEquivalents:{a:"",A:"",c:"",C:"",e:"",E:"",i:"",I:"",o:"",O:"",ss:"",SS:"",u:"",U:""},replaceAccents:function(e){var t,r="[",o=L.characterEquivalents;if(!L.characterRegex){for(t in L.characterRegexArray={},o)"string"==typeof t&&(r+=o[t],L.characterRegexArray[t]=new RegExp("["+o[t]+"]","g"));L.characterRegex=new RegExp(r+"]")}if(L.characterRegex.test(e))for(t in o)"string"==typeof t&&(e=e.replace(L.characterRegexArray[t],t));return e},validateOptions:function(e){var t,r,o,s,a="headers sortForce sortList sortAppend widgets".split(" "),n=e.originalSettings;if(n){for(t in L.debug(e,"core")&&(s=new Date),n)if("undefined"===(o=typeof L.defaults[t]))console.warn('Tablesorter Warning! "table.config.'+t+'" option not recognized');else if("object"===o)for(r in n[t])o=L.defaults[t]&&typeof L.defaults[t][r],A.inArray(t,a)<0&&"undefined"===o&&console.warn('Tablesorter Warning! "table.config.'+t+"."+r+'" option not recognized');L.debug(e,"core")&&console.log("validate options time:"+L.benchmark(s))}},restoreHeaders:function(e){var t,r,o=A(e)[0].config,s=o.$table.find(o.selectorHeaders),a=s.length;for(t=0;t<a;t++)(r=s.eq(t)).find("."+L.css.headerIn).length&&r.html(o.headerContent[t])},destroy:function(e,t,r){if((e=A(e)[0]).hasInitialized){L.removeWidget(e,!0,!1);var o,s=A(e),a=e.config,n=s.find("thead:first"),i=n.find("tr."+L.css.headerRow).removeClass(L.css.headerRow+" "+a.cssHeaderRow),d=s.find("tfoot:first > tr").children("th, td");!1===t&&0<=A.inArray("uitheme",a.widgets)&&(s.triggerHandler("applyWidgetId",["uitheme"]),s.triggerHandler("applyWidgetId",["zebra"])),n.find("tr").not(i).remove(),o="sortReset update updateRows updateAll updateHeaders updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets removeWidget destroy mouseup mouseleave "+"keypress sortBegin sortEnd resetToLoadState ".split(" ").join(a.namespace+" "),s.removeData("tablesorter").unbind(o.replace(L.regex.spaces," ")),a.$headers.add(d).removeClass([L.css.header,a.cssHeader,a.cssAsc,a.cssDesc,L.css.sortAsc,L.css.sortDesc,L.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),i.find(a.selectorSort).unbind("mousedown mouseup keypress ".split(" ").join(a.namespace+" ").replace(L.regex.spaces," ")),L.restoreHeaders(e),s.toggleClass(L.css.table+" "+a.tableClass+" tablesorter-"+a.theme,!1===t),s.removeClass(a.namespace.slice(1)),e.hasInitialized=!1,delete e.config.cache,"function"==typeof r&&r(e),L.debug(a,"core")&&console.log("tablesorter has been removed")}}};A.fn.tablesorter=function(t){return this.each(function(){var e=A.extend(!0,{},L.defaults,t,L.instanceMethods);e.originalSettings=t,!this.hasInitialized&&L.buildTable&&"TABLE"!==this.nodeName?L.buildTable(this,e):L.setup(this,e)})},window.console&&window.console.log||(L.logs=[],console={},console.log=console.warn=console.error=console.table=function(){var e=1<arguments.length?arguments:arguments[0];L.logs[L.logs.length]={date:Date.now(),log:e}}),L.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),L.addParser({id:"text",is:function(){return!0},format:function(e,t){var r=t.config;return e&&(e=A.trim(r.ignoreCase?e.toLocaleLowerCase():e),e=r.sortLocaleCompare?L.replaceAccents(e):e),e},type:"text"}),L.regex.nondigit=/[^\w,. \-()]/g,L.addParser({id:"digit",is:function(e){return L.isDigit(e)},format:function(e,t){var r=L.formatFloat((e||"").replace(L.regex.nondigit,""),t);return e&&"number"==typeof r?r:e?A.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e):e},type:"numeric"}),L.regex.currencyReplace=/[+\-,. ]/g,L.regex.currencyTest=/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/,L.addParser({id:"currency",is:function(e){return e=(e||"").replace(L.regex.currencyReplace,""),L.regex.currencyTest.test(e)},format:function(e,t){var r=L.formatFloat((e||"").replace(L.regex.nondigit,""),t);return e&&"number"==typeof r?r:e?A.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e):e},type:"numeric"}),L.regex.urlProtocolTest=/^(https?|ftp|file):\/\//,L.regex.urlProtocolReplace=/(https?|ftp|file):\/\/(www\.)?/,L.addParser({id:"url",is:function(e){return L.regex.urlProtocolTest.test(e)},format:function(e){return e?A.trim(e.replace(L.regex.urlProtocolReplace,"")):e},type:"text"}),L.regex.dash=/-/g,L.regex.isoDate=/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,L.addParser({id:"isoDate",is:function(e){return L.regex.isoDate.test(e)},format:function(e){var t=e?new Date(e.replace(L.regex.dash,"/")):e;return t instanceof Date&&isFinite(t)?t.getTime():e},type:"numeric"}),L.regex.percent=/%/g,L.regex.percentTest=/(\d\s*?%|%\s*?\d)/,L.addParser({id:"percent",is:function(e){return L.regex.percentTest.test(e)&&e.length<15},format:function(e,t){return e?L.formatFloat(e.replace(L.regex.percent,""),t):e},type:"numeric"}),L.addParser({id:"image",is:function(e,t,r,o){return 0<o.find("img").length},format:function(e,t,r){return A(r).find("img").attr(t.config.imgAttr||"alt")||e},parsed:!0,type:"text"}),L.regex.dateReplace=/(\S)([AP]M)$/i,L.regex.usLongDateTest1=/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i,L.regex.usLongDateTest2=/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i,L.addParser({id:"usLongDate",is:function(e){return L.regex.usLongDateTest1.test(e)||L.regex.usLongDateTest2.test(e)},format:function(e){var t=e?new Date(e.replace(L.regex.dateReplace,"$1 $2")):e;return t instanceof Date&&isFinite(t)?t.getTime():e},type:"numeric"}),L.regex.shortDateTest=/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/,L.regex.shortDateReplace=/[\-.,]/g,L.regex.shortDateXXY=/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,L.regex.shortDateYMD=/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,L.convertFormat=function(e,t){e=(e||"").replace(L.regex.spaces," ").replace(L.regex.shortDateReplace,"/"),"mmddyyyy"===t?e=e.replace(L.regex.shortDateXXY,"$3/$1/$2"):"ddmmyyyy"===t?e=e.replace(L.regex.shortDateXXY,"$3/$2/$1"):"yyyymmdd"===t&&(e=e.replace(L.regex.shortDateYMD,"$1/$2/$3"));var r=new Date(e);return r instanceof Date&&isFinite(r)?r.getTime():""},L.addParser({id:"shortDate",is:function(e){return e=(e||"").replace(L.regex.spaces," ").replace(L.regex.shortDateReplace,"/"),L.regex.shortDateTest.test(e)},format:function(e,t,r,o){if(e){var s=t.config,a=s.$headerIndexed[o],n=a.length&&a.data("dateFormat")||L.getData(a,L.getColumnData(t,s.headers,o),"dateFormat")||s.dateFormat;return a.length&&a.data("dateFormat",n),L.convertFormat(e,n)||e}return e},type:"numeric"}),L.regex.timeTest=/^(0?[1-9]|1[0-2]):([0-5]\d)(\s[AP]M)$|^((?:[01]\d|[2][0-4]):[0-5]\d)$/i,L.regex.timeMatch=/(0?[1-9]|1[0-2]):([0-5]\d)(\s[AP]M)|((?:[01]\d|[2][0-4]):[0-5]\d)/i,L.addParser({id:"time",is:function(e){return L.regex.timeTest.test(e)},format:function(e){var t=(e||"").match(L.regex.timeMatch),r=new Date(e),o=e&&(null!==t?t[0]:"00:00 AM"),s=o?new Date("2000/01/01 "+o.replace(L.regex.dateReplace,"$1 $2")):o;return s instanceof Date&&isFinite(s)?(r instanceof Date&&isFinite(r)?r.getTime():0)?parseFloat(s.getTime()+"."+r.getTime()):s.getTime():e},type:"numeric"}),L.addParser({id:"metadata",is:function(){return!1},format:function(e,t,r){var o=t.config,s=o.parserMetadataName?o.parserMetadataName:"sortValue";return A(r).metadata()[s]},type:"numeric"}),L.addWidget({id:"zebra",priority:90,format:function(e,t,r){var o,s,a,n,i,d,l,c=new RegExp(t.cssChildRow,"i"),g=t.$tbodies.add(A(t.namespace+"_extra_table").children("tbody:not(."+t.cssInfoBlock+")"));for(i=0;i<g.length;i++)for(a=0,l=(o=g.eq(i).children("tr:visible").not(t.selectorRemove)).length,d=0;d<l;d++)s=o.eq(d),c.test(s[0].className)||a++,n=a%2==0,s.removeClass(r.zebra[n?1:0]).addClass(r.zebra[n?0:1])},remove:function(e,t,r,o){if(!o){var s,a,n=t.$tbodies,i=(r.zebra||["even","odd"]).join(" ");for(s=0;s<n.length;s++)(a=L.processTbody(e,n.eq(s),!0)).children().removeClass(i),L.processTbody(e,a,!1)}}})}(e),e.tablesorter});]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">jquery.tablesorter.min.js</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">https://github.com/Mottie/tablesorter</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="text/css" filename="jquery.tablesorter.css" type="file"><![CDATA[.tablesorter-default {
	width: 100%;
	color: #333;
	background-color: #fff;
	border-spacing: 0;
	margin: 10px 0 15px;
	text-align: left
}
.tablesorter-default th,
.tablesorter-default thead td {
	font-weight: 700;
	color: #000;
	background-color: #fff;
	border-collapse: collapse;
	border-bottom: #ccc 2px solid;
}
.tablesorter-default tfoot td,
.tablesorter-default tfoot th {
	border: 0
}
.tablesorter-default .header,
.tablesorter-default .tablesorter-header {
	background-image: url(data:image/gif;base64,R0lGODlhFQAJAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);
	background-position: center right;
	background-repeat: no-repeat;
	cursor: pointer;
	white-space: normal;
}
.tablesorter-default thead .headerSortUp,
.tablesorter-default thead .tablesorter-headerAsc,
.tablesorter-default thead .tablesorter-headerSortUp {
	background-image: url(data:image/gif;base64,R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjI8Bya2wnINUMopZAQA7);
	border-bottom: #000 2px solid
}
.tablesorter-default thead .headerSortDown,
.tablesorter-default thead .tablesorter-headerDesc,
.tablesorter-default thead .tablesorter-headerSortDown {
	background-image: url(data: image/gif;base64,R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjB+gC+jP2ptn0WskLQA7);
	border-bottom: #000 2px solid
}
.tablesorter-default thead .sorter-false {
	background-image: none;
	cursor: default;
	padding: 4px
}
.tablesorter-default tfoot .tablesorter-headerAsc,
.tablesorter-default tfoot .tablesorter-headerDesc,
.tablesorter-default tfoot .tablesorter-headerSortDown,
.tablesorter-default tfoot .tablesorter-headerSortUp {
	border-top: #000 2px solid
}
.tablesorter-default td {
	background-color: #fff;
	border-bottom: #ccc 1px solid;
	vertical-align: top
}
.tablesorter-default tbody>tr.even:hover>td,
.tablesorter-default tbody>tr.hover>td,
.tablesorter-default tbody>tr.odd:hover>td,
.tablesorter-default tbody>tr:hover>td {
	background-color: #fff;
	color: #000
}
.tablesorter-default .tablesorter-processing {
	background-position: center center!important;
	background-repeat: no-repeat!important;
	background-image: url(data:image/gif;base64,R0lGODlhFAAUAKEAAO7u7lpaWgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQBCgACACwAAAAAFAAUAAACQZRvoIDtu1wLQUAlqKTVxqwhXIiBnDg6Y4eyx4lKW5XK7wrLeK3vbq8J2W4T4e1nMhpWrZCTt3xKZ8kgsggdJmUFACH5BAEKAAIALAcAAAALAAcAAAIUVB6ii7jajgCAuUmtovxtXnmdUAAAIfkEAQoAAgAsDQACAAcACwAAAhRUIpmHy/3gUVQAQO9NetuugCFWAAAh+QQBCgACACwNAAcABwALAAACE5QVcZjKbVo6ck2AF95m5/6BSwEAIfkEAQoAAgAsBwANAAsABwAAAhOUH3kr6QaAcSrGWe1VQl+mMUIBACH5BAEKAAIALAIADQALAAcAAAIUlICmh7ncTAgqijkruDiv7n2YUAAAIfkEAQoAAgAsAAAHAAcACwAAAhQUIGmHyedehIoqFXLKfPOAaZdWAAAh+QQFCgACACwAAAIABwALAAACFJQFcJiXb15zLYRl7cla8OtlGGgUADs=)!important
}
.tablesorter-default tr.odd>td {
	background-color: #dfdfdf
}
.tablesorter-default tr.even>td {
	background-color: #efefef
}
.tablesorter-default tr.odd td.primary {
	background-color: #bfbfbf
}
.tablesorter-default td.primary,
.tablesorter-default tr.even td.primary {
	background-color: #d9d9d9
}
.tablesorter-default tr.odd td.secondary {
	background-color: #d9d9d9
}
.tablesorter-default td.secondary,
.tablesorter-default tr.even td.secondary {
	background-color: #e6e6e6
}
.tablesorter-default tr.odd td.tertiary {
	background-color: #e6e6e6
}
.tablesorter-default td.tertiary,
.tablesorter-default tr.even td.tertiary {
	background-color: #f2f2f2
}
.tablesorter-default>caption {
	background-color: #fff
}
.tablesorter-default .tablesorter-filter-row {
	background-color: #eee
}
.tablesorter-default .tablesorter-filter-row td {
	background-color: #eee;
	border-bottom: #ccc 1px solid;
	line-height: normal;
	text-align: center;
	-webkit-transition: line-height .1s ease;
	-moz-transition: line-height .1s ease;
	-o-transition: line-height .1s ease;
	transition: line-height .1s ease
}
.tablesorter-default .tablesorter-filter-row .disabled {
	opacity: .5;
	cursor: not-allowed
}
.tablesorter-default .tablesorter-filter-row.hideme td {
	padding: 2px;
	margin: 0;
	line-height: 0;
	cursor: pointer
}
.tablesorter-default .tablesorter-filter-row.hideme * {
	height: 1px;
	min-height: 0;
	border: 0;
	padding: 0;
	margin: 0;
	opacity: 0
}
.tablesorter-default input.tablesorter-filter,
.tablesorter-default select.tablesorter-filter {
	width: 95%;
	height: auto;
	margin: 4px auto;
	padding: 4px;
	background-color: #fff;
	border: 1px solid #bbb;
	color: #333;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	-webkit-transition: height .1s ease;
	-moz-transition: height .1s ease;
	-o-transition: height .1s ease;
	transition: height .1s ease
}
.tablesorter .filtered {
	display: none
}
.tablesorter .tablesorter-errorRow td {
	text-align: center;
	cursor: pointer;
	background-color: #e6bf99
}]]></data>
                  </item>
                  <item key="default"></item>
                  <item key="id">jquery.tablesorter.css</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">https://github.com/Mottie/tablesorter</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-table]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (CSS)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Event: onChange
##
# --// onChangeObjEvt //--

request = zmscontext.REQUEST
lang = request['lang']
table = zmscontext.attr('table')
ncols = max(map(lambda x: len(x), table))
weights = map(lambda x: 1, range( ncols))
for row in table:
    for cell in row:
        content = cell.get('content','')
        content = zmscontext.validateInlineLinkObj(content)
        cell['content'] = content
zmscontext.setObjProperty('table',table,lang)

# --// /onChangeObjEvt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">onChangeObjEvt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChange]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.widths"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Col-Widths [list]
##
# --// BO widths //--

REQUEST = zmscontext.REQUEST
table = zmscontext.attr('table')
ncols = max(map(lambda x: len(x), table))
weights = map(lambda x: 1, range( ncols))
for row in table:
    i = 0
    for cell in row:
        weight = len(zmscontext.re_sub('<(.*?)>', '',zmscontext.dt_exec(cell.get('content',''))))
        weights[i] = weights[i] + weight
        i += 1
return [int((x*100.0)/sum(weights)) for x in weights]

# --// EO widths //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">widths</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Col-Widths [list]]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:define="zmscontext options/zmscontext; cols python:zmscontext.attr('cols'); d python:{}">
    <tal:block tal:repeat="col python:zmscontext.attr('widths')">
        <tal:block tal:define="col_index repeat/col/index">
            <tal:block tal:condition="python:col_index<len(cols) and cols[col_index]">
                <tal:block tal:define="dummy0 python:zmscontext.operator_setitem(d,col_index+1,str(cols[col_index])+'%')"></tal:block>
            </tal:block>
        </tal:block>
    </tal:block>
    <tal:block tal:condition="python:len(d)>0">
        @media screen and (min-width:560px){
            <tal:block tal:repeat="k d">
                table#<tal:block tal:content="python:zmscontext.id"></tal:block> tr th:nth-child(<tal:block tal:content="k"></tal:block>), table#<tal:block tal:content="python:zmscontext.id"></tal:block> tr td:nth-child(<tal:block tal:content="k"></tal:block>) { width:<tal:block tal:content="python:d[k]"></tal:block> }</tal:block>
        }
    </tal:block>
</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">zmstable_colgroup_css</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS Colgroup]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- LOADING JS: PUT AT THE END OF MASTER-TEMPLATE -->
<tal:block tal:condition="python:request.get('ZMSTable.sortable',False)"
		tal:define="metaobj_url python:zmscontext.metaobj_manager.absolute_url()">
	<script type="text/javascript" charset="UTF-8" 
		tal:attributes="src python:'%s/ZMSTable.jquery.tablesorter.min.js'%(metaobj_url)">
	</script>
	<script>
		//<!--
		$(function(){ 
			$('.ZMSTable.sortable').tablesorter(); 
		});
		//-->
	</script>
	<link type="text/css" rel="stylesheet"
		tal:attributes="href python:'%s/ZMSTable.zmstable_sortable_css'%(metaobj_url)"></link>
</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">zmstable_sortable_js</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[JS Sortable]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTable.standard_html -->

<div tal:define="zmscontext    options/zmscontext;
                 Std           modules/Products.PythonScripts/standard; 
                 newline_to_br nocall:Std/newline_to_br;
                 rteformats    python:filter(lambda x: str(x.getRichedit())=='1',here.getTextFormats(request)); 
                 table         python:zmscontext.attr('table');
                 sortable      python:int(zmscontext.attr('sortable') in [1,True]);
                 req_sortable  python:sortable and request.set('ZMSTable.sortable',True);
                 caption       python:zmscontext.attr('caption');
                 table_type    python:zmscontext.attr('type');"
     class="uzk15__editorblock">
    <style tal:condition="python:zmscontext.attr('colgroup')" tal:content="structure python:zmscontext.attr('zmstable_colgroup_css')"></style>
    <table tal:attributes="id python:zmscontext.id; class python:' '.join(['ZMSTable table bs-table']+[[],['sortable']][sortable])">
        <caption tal:condition="python:caption" tal:content="structure caption"></caption>
        <tal:block tal:repeat="row table">
            <tal:block tal:condition="python:table_type==1 and row==table[0]" tal:content="structure python:'<thead>'"></tal:block>
            <tal:block tal:condition="python:table_type==1 and row==table[1]" tal:content="structure python:'<tbody>'"></tal:block>
            <tr>
                <tal:block tal:repeat="column row">
                    <tal:block tal:define="row_index     repeat/row/index;
                                           col_index     repeat/column/index;
                                           tag           python:str(column.get('tag','')).lower();
                                           format        python:column.get('format','');
                                           pattern       python:'%3Cdtml-var%20\042 getlinkurl\\((.*?),request\\)\042=\042\042>\042>\073';
                                           replacement   python:'<dtml-var \042getLinkUrl(\\1,REQUEST)\042>\042>';
                                           content       python:zmscontext.re_sub(pattern,replacement,column.get('content',''));
                                           content       python:[content,newline_to_br(content)][format==''];
                                           col_text      python:[zmscontext.dt_exec(zmscontext.renderText(format,'table_%i_%i'%(col_index,row_index),content,request)),content][format in map(lambda x: x.getId(),rteformats)];
                                           col_text      python:zmscontext.re_sub('^(B \073)','',col_text);
                                           col_text      python:zmscontext.re_sub('^<p>((\\w|\\W)*?)</p>$','\\1',col_text)">
                        <th tal:condition="python:tag == 'th'" tal:content="structure python:col_text if col_text else ' '"></th>
                        <td tal:condition="python:tag != 'th'" tal:content="structure python:col_text if col_text else ' '"></td>
                    </tal:block>
                </tal:block>
            </tr>
            <tal:block tal:condition="python:table_type==1 and row==table[0]" tal:content="structure python:'</thead>'"></tal:block>
            <tal:block tal:condition="python:table_type==1 and row==table[-1]" tal:content="structure python:'</tbody>'"></tal:block>
        </tal:block>
    </table>
</div>

<!-- /ZMSTable.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSTable]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSTable</item>
          <item key="name">ZMSTable</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">4.1.1</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSTeaserContainer</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-bullhorn]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">e</item>
                  <item key="keys" type="list">
                    <list>
                      <item>ZMSNote</item>
                      <item>ZMSFile</item>
                      <item>type(ZMSTeaserElement)</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Teaser-Elements</item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type">*</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "getTeaserElements"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=
##title=Function: Teaser-Elements
##
# --// BO getTeaserElements //--

request = container.REQUEST
teaserElmnts = []
obs = context.breadcrumbs_obj_path(portalMaster=False)
obs.reverse()
this = context.getSelf()
for ob in obs:
  abort_penetrance = ob != this and ob.meta_type == 'ZMSLinkElement'
  if abort_penetrance:
    break
  temp = []
  subobs = ob.filteredChildNodes( request, ['ZMSCustom','ZMSTeaserContainer'])
  for subob in subobs:
    if subob.meta_id == 'ZMSTeaserContainer':
      temp.extend( subob.filteredChildNodes( request))
    elif subob.getType() == 'ZMSTeaserElement':
      temp.append( subob)
  for teaserElmnt in temp:
    penetrance = teaserElmnt.attr('attr_penetrance')
    if ( penetrance in [0,'this',''] and context == ob) or \
       ( penetrance in [1,'sub_nav'] and context.meta_id in ['ZMS','ZMSFolder']) or \
       ( penetrance in [2,'sub_all']):
      teaserElmnts.insert( 0, teaserElmnt)
  abort_penetrance = ob.attr('attr_zmsteasercontainer_abort_penetrance') not in ['',0]
  if abort_penetrance:
    break
teaserElmnts.reverse()
return teaserElmnts

# --// EO getTeaserElements //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">getTeaserElements</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Function: Teaser-Elements]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Script (Python)]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "pageelement_Teaser"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=here=None,request=None
##title=Template: Teaser
##
# --// BO pageelement_Teaser //--

request = container.REQUEST
RESPONSE =  request.RESPONSE

last_borderstyle = None
last_bgcolor_border = None
teaserElmnts = context.getTeaserElements()
if teaserElmnts:
  print('<div class="ZMSTeaserContainer">')
  for teaserElmnt in teaserElmnts:
    if teaserElmnt.meta_id in ['ZMSLinkElement','ZMSFile','ZMSTeaserElement']:
      name = 'pageelement_TeaserElement'
    else:
      name = 'bodyContentZMSCustom_%s'%teaserElmnt.meta_id
    method = getattr(teaserElmnt,name,None)
    if method is not None:
      method_result = method(teaserElmnt,request)
    else:
      method_result = teaserElmnt.getBodyContent(request)
    print(method_result)
  print('</div><!-- .ZMSTeaserContainer -->')

return printed

# --// EO pageelement_Teaser //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">pageelement_Teaser</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Teaser]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Script (Python)]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTeaserContainer.renderShort -->

<tal:block tal:define="global 
		zmscontext options/zmscontext">
	<div class="form-small" tal:repeat="teaserElmnt python:zmscontext.getChildNodes(request)">
		<a tal:attributes="
						href python:'%s/manage_main?lang=%s'%(teaserElmnt.absolute_url(),request['lang']); 
						title python:zmscontext.getZMILangStr('CAPTION_EDIT')%teaserElmnt.display_type(request)"
				tal:content="structure python:teaserElmnt.display_icon(request)">
			the internal link
		</a>
		<tal:block tal:define="global 
				url      python:zmscontext.getLinkUrl(teaserElmnt.attr('attr_url'));
				img_src  python:teaserElmnt.attr('attr_img_src')+'?';
				title    python:teaserElmnt.attr('title');
				abstract python:zmscontext.search_quote(teaserElmnt.attr('attr_abstract'))">
			<tal:block tal:condition="python:title">
				<a tal:condition="python:url" tal:attributes="href url" target="_blank" class="zmi" tal:content="title"><b>The title</b></a>
				<tal:block tal:condition="python:not url" tal:content="title">The title</tal:block>
			</tal:block>
			<tal:block tal:condition="python:not title">
				<tal:block tal:condition="python:img_src">
					<div><i>&laquo;<tal:block tal:content="python:img_src[img_src.rfind('/')+1:img_src.find('?')]"></tal:block>&raquo;</i></div>
				</tal:block>
			</tal:block>
			<div tal:content="structure abstract">The abstract</div>
		</tal:block>
	</div>
</tal:block>

<!-- /ZMSTeaserContainer.renderShort -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">renderShort</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[ZMI: Render short]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSTeaserContainer</item>
          <item key="name">ZMSTeaserContainer</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.3.0</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSTeaserElement</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-bullhorn]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">f_css_defaults</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[CSS: Default]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">resource</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_penetrance</item>
                  <item key="keys" type="list">
                    <list>
                      <item>this</item>
                      <item>sub_nav</item>
                      <item>sub_all</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Penetrance</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_url</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Url</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">url</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_img</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Image</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">text</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Text</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">richtext</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTeaserElement.attr_img_src"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Image
##
# --// BO attr_img_src //--

img = zmscontext.attr('attr_img')
if img:
    return img.getHref(zmscontext.REQUEST)
return ''

# --// EO attr_img_src //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_img_src</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTeaserElement.attr_abstract"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Abstract
##
# --// BO attr_abstract //--

return zmscontext.attr('text')

# --// EO attr_abstract //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">attr_abstract</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Abstract]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- pageelement_TeaserElement -->
<div class="ZMSTeaserElement" tal:define="
			zmscontext here;
			id python:zmscontext.getId();
			attr_url python:zmscontext.attr('attr_url');
			url python:zmscontext.getLinkUrl(attr_url,request);
			url_error python:'error' in url;
			url_target python:attr_url.rfind('://')>0 and '_blank' or 'self';
			img_src_attr python:zmscontext.attr('attr_img_src');
			img_src python:img_src_attr+'?';
			img_filename python:img_src[img_src.rfind('/')+1:img_src.find('?')];
			title python:zmscontext.attr('title');
			text python:zmscontext.attr('attr_abstract');"
		tal:attributes="id id">
	<div class="graphic" tal:condition="python:img_filename">
		<a href="#" tal:omit-tag="python:(not attr_url) or url_error" tal:attributes="href url">
			<img src="#" border="0" tal:attributes="src img_src_attr;title title;alt title" />
		</a>
	</div>
	<div class="title" tal:condition="title">
		<a tal:omit-tag="python:(not attr_url) or url_error" tal:attributes="href url" tal:content="title">TITLE</a>
	</div>
	<div class="text" tal:condition="text">
		<span tal:replace="structure text">TEXT</span>
		<span class="HREF_MORE" tal:condition="python:text and (url and not url_error)"
			tal:content="structure python:here.getLangStr('HREF_MORE',request['lang'])%(' href=\042%s\042 title=\042%s\042'%(url,title))">
			MORE...
		</span>
	</div>
</div>
<!-- /pageelement_TeaserElement -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">pageelement_TeaserElement</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Teaser-Element]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Page Template]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTeaserElement.standard_html -->
<div class="ZMSTeaserContainer" 
	tal:omit-tag="python:request.get('URL').find('/manage') < 0"
	tal:define="zmscontext options/zmscontext"
	tal:content="structure python:zmscontext.pageelement_TeaserElement(zmscontext,request)">
	The teaser-element
</div>
<!-- /ZMSTeaserElement.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSTeaserElement]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSTeaserElement</item>
          <item key="name">ZMSTeaserElement</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">4.0.0</item>
          <item key="type">ZMSTeaserElement</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSTextarea</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-align-left]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<tal:block tal:define="
	zmscontext options/zmscontext;
	dummy0 python:request.set('CKEDITOR_config_removeButtons','JustifyLeft,JustifyCenter,JustifyRight')">
<script type="text/javascript">

$(function(){
	$('#text_'+getZMILang()).parent('form').submit(function() {
			var b = true;
			if (self.btnClicked != getZMILangStr('BTN_CANCEL') &&
					self.btnClicked != getZMILangStr('BTN_BACK')) {
				var txt = '<'+'xml>'+$('#text_'+getZMILang()).val().replace('&','')+'<'+'/xml>';
				if ( txt.indexOf( '<'+'dtml-') < 0) {
					try {
						var xmlString = txt.replace(/\&(\w*)\;/g,'');
						if (window.DOMParser) {
							var parser=new DOMParser();
							var doc=parser.parseFromString(xmlString,"text/xml");
							if ( doc.childNodes[0].nodeName == 'parsererror') {
								b = confirm(getZMILangStr('CAPTION_WARNING')+'\n'+doc.childNodes[0].childNodes[0].nodeValue+'\n'+getZMILangStr('MSG_CHANGE_ANYWAY')+'\n');
							}
						} else if (window.ActiveXObject) {
							var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
							xmlDoc.async="false";
							xmlDoc.loadXML(xmlString);
							if ( xmlDoc.childNodes.length == 0) {
								b = confirm(getZMILangStr('CAPTION_WARNING')+'\n'+'Invalid (X)HTML!\n'+getZMILangStr('MSG_CHANGE_ANYWAY')+'\n');
							}
						}
					}
					catch(e) {
						alert(e.message);
					}
				}
			}
			return b;
		});
	});

</script>
</tal:block>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface0</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface0</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[##
return context.getTextFormatDefault()]]>
                  </item>
                  <item key="id">format</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Format</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">text</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">Text</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">richtext</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTextarea.check_constraints"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None,options=None
##title=py: Hook: check constraints
##
# --// check_constraints //--

constraints = {}
request = zmscontext.REQUEST
obj_attr = zmscontext.getObjAttr('text')
text = zmscontext.getObjAttrValue(obj_attr,request)
if text.startswith('##') or text.find('<dtml-')>=0 or text.find('<tal:')>=0:
  constraints['RESTRICTIONS'] = constraints.get('RESTRICTIONS',[])
  constraints['RESTRICTIONS'].append(('restricted-access','text contains executable-code (py, tal, dtml)',['ZMS Administrator']))
return constraints

# --// /check_constraints //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">check_constraints</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Hook: check constraints]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTextarea.standard_html -->

<tal:block tal:define="
		zmscontext options/zmscontext;
		text          python:zmscontext.getText(request);
		format        python:zmscontext.attr('format');
		renderedText  python:zmscontext.renderText(format,'text',text,request,zmscontext.id)"
		tal:content="structure renderedText">
	The text
</tal:block>

<!-- /ZMSTextarea.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSTextarwa]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSTextarea</item>
          <item key="name">ZMSTextarea</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">3.1.2</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">ZMSVideo</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[fas fa-film]]></item>
                  <item key="default"></item>
                  <item key="id">icon_clazz</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">constant</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">title</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type">title</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Title</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">attr_dc_description</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type">attr_dc_description</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name">DC.Description</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">text</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">img</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Preview-Screen</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">image</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">videodata</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[MP4 File Upload]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">file</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">provider</item>
                  <item key="keys" type="list">
                    <list>
                      <item>fileupload</item>
                      <item>vimeo</item>
                      <item>youtube</item>
                      <item>switch</item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Video Provider]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">select</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">videoId</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Video-ID</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">string</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">videoHint</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<div id="tr_videoHint" class="form-group row"><label class="col-sm-2 control-label" for="videoHint"><span>Hinweise</span></label><div id="videoHint" class="col-sm-10">Der Kurztitel ist nur fr die interne Darstellung/Referenzierung.<br />WICHTIG: Die Option "Einbetten auf Anfrage" des YouTube Videos darf nicht deaktiviert sein!<br />Die YouTube ID kann aus der URL des Browsers beim Betrachten des Videos entnommen werden:<ol><li>http://www.youtube.com/watch?v=<strong style="color:darkred">7nxwgSxLA68</strong></li><li>http://youtu.be/<strong style="color:darkred">7nxwgSxLA68</strong></li></ol></div></div>]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">hint</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">videoWidth</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Breite</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">int</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"></item>
                  <item key="id">videoHeight</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">Hhe</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">int</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSVideo.titlealt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None
##title=py: DC.Title.Alt
##
# --// titlealt //--
return zmscontext.attr('title')
# --// /titlealt //--
]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">titlealt</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">DC.Title.Alt</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">py</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<script>
	function changeGUI() {
		$('#tr_videoId').hide();
		$('#tr_videoHint').hide();
		$('#tr_videoWidth').hide();
		$('#tr_videoHeight').hide();
		$('#tr_videodata').hide();
		if ( $('#tr_provider select option:selected').val()!='switch' ) {
			if ( $('#tr_provider select option:selected').val()=='youtube' ) {
				$('#tr_videoHint').show();
			}
			if ( $('#tr_provider select option:selected').val()=='fileupload' ) {
				$('#tr_videodata').show();
				$('#tr_videoId label').removeClass('mandatory');
			}
			else {
				$('#tr_videoId').show();
				$('#tr_videoId label').addClass('mandatory');
			}
			$('#tr_videoWidth').show();
			$('#tr_videoHeight').show();
		};
	};
	$(document).ready( function() {
		$('#tr_provider select').change(function() { changeGUI() });
		changeGUI();
	});
</script>]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">interface</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name">interface</item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">interface</item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSVideo.standard_html -->

<tal:block tal:define="
		zmscontext options/zmscontext;
		zmi python:request.get('URL').find('/manage')>=0;
		id python:zmscontext.getId();
		title python:zmscontext.attr('title');
		description python:zmscontext.attr('attr_dc_description');
		img python:zmscontext.attr('img');
		videodata python:zmscontext.attr('videodata');
		provider python:zmscontext.attr('provider');
		videoId python:zmscontext.attr('videoId');
		videoWidth python:zmscontext.attr('videoWidth');
		videoHeight python:zmscontext.attr('videoHeight');
		videoURL python:{'fileupload':'','vimeo':'//player.vimeo.com/video/%s?badge=0','youtube':'http://www.youtube.com/embed/%s','switch':'https://tube.switch.ch/embed/%s'}[provider]">

<style type="text/css" tal:condition="python:request.get('first_video_on_page',True)">
	.video-wrapper {margin: 1em 0;}
	.youtube { position: relative; padding-bottom: 55%; padding-top: 15px; height: 0; overflow: hidden;}
	.youtube iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
	.video-wrapper p.description {font-size:90%;font-style:italic;}
</style>
<tal:block tal:define="first_video_on_page python:request.set('first_video_on_page',False)"></tal:block>

<div class="note" tal:condition="zmi">
	<strong tal:content="title">Titel</strong> - web size:
	<strong tal:content="videoWidth">videoWidth</strong> x <strong tal:content="videoHeight">videoHeight</strong> Pixel.
</div>

<div tal:attributes="class python:'video-wrapper elastic-video %s'%(provider);title title;id id">
	<div class="embed-responsive embed-responsive-16by9">
	<tal:block tal:condition="python:img!='' and img!=None"
		><img tal:attributes="src python:img.getHref(request);
			width videoWidth;
			height videoHeight;
			style python:['cursor:pointer','display:none'][img==''];
			onclick python:'javascript:$(\047#%s img\047).hide()\073$(\047#%s .video\047).show()'%(id,id)"
	/></tal:block>
	<iframe tal:condition="python:provider!='fileupload'"
		tal:attributes="src python:videoURL%(videoId); width python:[None,videoWidth][videoWidth>0]; height python:[None,videoHeight][videoHeight>0];style python:['display:none',''][img=='' or img==None]"
		class="embed-responsive-item"
		frameborder="0"
		webkitallowfullscreen=""
		mozallowfullscreen=""
		allowfullscreen="">
	</iframe>
	<video tal:condition="python:provider=='fileupload' and videodata!=''"
		tal:attributes="width python:[None,videoWidth][videoWidth>0]; height python:[None,videoHeight][videoHeight>0]; style python:['display:none',''][img=='' or img==None]"
		class="embed-responsive-item"
		frameborder="0"
		controls="">
		<source src="movie.mp4" type="video/mp4" tal:attributes="src python:videodata.getHref(request)" />
		ERROR: Your browser does not support the video tag.
	</video>
	</div>    
	<div tal:condition="python:(provider=='fileupload' and videodata=='') or (provider!='fileupload' and videoId=='')"
		class="alert alert-warning">No video file uploaded or no provider video specified.
	</div>
	<p class="description" tal:condition="description" tal:content="description">description</p>
</div>

</tal:block>

<!-- /ZMSVideo.standard_html -->]]>
                  </item>
                  <item key="default"></item>
                  <item key="id">standard_html</item>
                  <item key="keys" type="list">
                    <list>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="meta_type"></item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: YouTube Video]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type">zpt</item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom">{$}</item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id">ZMSVideo</item>
          <item key="name">ZMSVideo</item>
          <item key="package">com.zms.foundation</item>
          <item key="revision">4.0.0</item>
          <item key="type">ZMSObject</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key">com.zms.foundation</item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                </list>
              </item>
              <item key="insert_custom"></item>
              <item key="insert_deny" type="list">
                <list>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id">com.zms.foundation</item>
          <item key="name">com.zms.foundation</item>
          <item key="package"></item>
          <item key="revision">4.1.0</item>
          <item key="type">ZMSPackage</item>
        </dictionary>
      </item>
    </dictionary>
  </item>
</list>